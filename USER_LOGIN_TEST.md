# 用户登录功能测试指南

## 功能概述

✅ **用户端登录页面**：基于手机号验证码登录  
✅ **订单提交检查**：未登录时自动跳转登录页面  
✅ **用户状态管理**：登录状态持久化，7天有效期  
✅ **Header用户显示**：显示用户信息和退出功能  

## 测试步骤

### 1. 直接访问登录页面
```
访问：http://localhost:5173/login
- 输入手机号（如：18960805927）
- 点击"获取验证码"
- 在开发环境会弹出：验证码: 123456
- 输入验证码：123456
- 输入姓名（如：张三）
- 点击"登录"
```

### 2. 测试订单页面登录检查
```
步骤：
1. 访问：http://localhost:5173
2. 添加任意产品到购物车
3. 进入购物车页面：http://localhost:5173/cart
4. 点击"立即预订"按钮
5. 在订单页面填写表单信息
6. 点击"提交预订"按钮

结果：
- 如果未登录 → 自动跳转到登录页面
- 登录成功后 → 自动返回订单页面
- 订单表单中的姓名和手机号会自动填充
```

### 3. 测试Header用户状态
```
登录前：
- Header右侧显示"登录"按钮
- 点击可进入登录页面

登录后：
- Header右侧显示用户名
- 鼠标悬停显示下拉菜单：用户信息和"退出登录"
- 移动端菜单中显示用户信息
```

### 4. 测试用户状态持久化
```
1. 登录成功后刷新页面 → 用户状态保持
2. 关闭浏览器重新打开 → 用户状态保持（7天内）
3. 点击"退出登录" → 清除用户状态
```

## 开发环境验证码

在开发环境中，验证码固定为：**123456**

## API 接口说明

当前为前端模拟登录，实际生产环境需要：

1. **发送验证码 API**
   ```
   POST /api/auth/send-code
   Body: { phone: "18960805927" }
   ```

2. **验证登录 API**
   ```
   POST /api/auth/verify-login
   Body: { 
     phone: "18960805927", 
     code: "123456", 
     name: "张三" 
   }
   ```

## 功能特点

- ✅ 手机号验证码登录方式
- ✅ 表单验证和错误提示
- ✅ 60秒倒计时重发验证码
- ✅ 登录状态自动检查
- ✅ 订单信息自动填充
- ✅ 响应式设计适配移动端
- ✅ 登录状态7天有效期
- ✅ 安全的本地存储管理

## 用户体验流程

```
未登录用户 → 浏览产品 → 添加购物车 → 提交订单
                                    ↓
                              检测未登录
                                    ↓
                          跳转登录页面（携带返回地址）
                                    ↓
                              手机号验证码登录
                                    ↓
                          登录成功，返回订单页面
                                    ↓
                          自动填充用户信息，继续下单
```

这样用户可以在需要时才登录，不会打断购物流程，体验更加流畅。 