(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=o(r);fetch(r.href,l)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function vn(e){const t=Object.create(null);for(const o of e.split(","))t[o]=1;return o=>o in t}const we={},ls=[],gt=()=>{},Ei=()=>!1,xo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),xn=e=>e.startsWith("onUpdate:"),Ie=Object.assign,yn=(e,t)=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},Oi=Object.prototype.hasOwnProperty,xe=(e,t)=>Oi.call(e,t),oe=Array.isArray,is=e=>Bs(e)==="[object Map]",fs=e=>Bs(e)==="[object Set]",zn=e=>Bs(e)==="[object Date]",ue=e=>typeof e=="function",Me=e=>typeof e=="string",ht=e=>typeof e=="symbol",ke=e=>e!==null&&typeof e=="object",Jr=e=>(ke(e)||ue(e))&&ue(e.then)&&ue(e.catch),Kr=Object.prototype.toString,Bs=e=>Kr.call(e),Ri=e=>Bs(e).slice(8,-1),Zr=e=>Bs(e)==="[object Object]",bn=e=>Me(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,bs=vn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yo=e=>{const t=Object.create(null);return o=>t[o]||(t[o]=e(o))},Ni=/-(\w)/g,et=yo(e=>e.replace(Ni,(t,o)=>o?o.toUpperCase():"")),Vi=/\B([A-Z])/g,Yt=yo(e=>e.replace(Vi,"-$1").toLowerCase()),bo=yo(e=>e.charAt(0).toUpperCase()+e.slice(1)),Oo=yo(e=>e?`on${bo(e)}`:""),Lt=(e,t)=>!Object.is(e,t),eo=(e,...t)=>{for(let o=0;o<e.length;o++)e[o](...t)},Zo=(e,t,o,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:o})},ro=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Li=e=>{const t=Me(e)?Number(e):NaN;return isNaN(t)?e:t};let qn;const _o=()=>qn||(qn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wo(e){if(oe(e)){const t={};for(let o=0;o<e.length;o++){const n=e[o],r=Me(n)?Fi(n):wo(n);if(r)for(const l in r)t[l]=r[l]}return t}else if(Me(e)||ke(e))return e}const Ui=/;(?![^(]*\))/g,Bi=/:([^]+)/,Di=/\/\*[^]*?\*\//g;function Fi(e){const t={};return e.replace(Di,"").split(Ui).forEach(o=>{if(o){const n=o.split(Bi);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ie(e){let t="";if(Me(e))t=e;else if(oe(e))for(let o=0;o<e.length;o++){const n=ie(e[o]);n&&(t+=n+" ")}else if(ke(e))for(const o in e)e[o]&&(t+=o+" ");return t.trim()}const Hi="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zi=vn(Hi);function Qr(e){return!!e||e===""}function qi(e,t){if(e.length!==t.length)return!1;let o=!0;for(let n=0;o&&n<e.length;n++)o=Qt(e[n],t[n]);return o}function Qt(e,t){if(e===t)return!0;let o=zn(e),n=zn(t);if(o||n)return o&&n?e.getTime()===t.getTime():!1;if(o=ht(e),n=ht(t),o||n)return e===t;if(o=oe(e),n=oe(t),o||n)return o&&n?qi(e,t):!1;if(o=ke(e),n=ke(t),o||n){if(!o||!n)return!1;const r=Object.keys(e).length,l=Object.keys(t).length;if(r!==l)return!1;for(const c in e){const a=e.hasOwnProperty(c),i=t.hasOwnProperty(c);if(a&&!i||!a&&i||!Qt(e[c],t[c]))return!1}}return String(e)===String(t)}function _n(e,t){return e.findIndex(o=>Qt(o,t))}const Yr=e=>!!(e&&e.__v_isRef===!0),h=e=>Me(e)?e:e==null?"":oe(e)||ke(e)&&(e.toString===Kr||!ue(e.toString))?Yr(e)?h(e.value):JSON.stringify(e,Xr,2):String(e),Xr=(e,t)=>Yr(t)?Xr(e,t.value):is(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((o,[n,r],l)=>(o[Ro(n,l)+" =>"]=r,o),{})}:fs(t)?{[`Set(${t.size})`]:[...t.values()].map(o=>Ro(o))}:ht(t)?Ro(t):ke(t)&&!oe(t)&&!Zr(t)?String(t):t,Ro=(e,t="")=>{var o;return ht(e)?`Symbol(${(o=e.description)!=null?o:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ee;class el{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ee,!t&&Ee&&(this.index=(Ee.scopes||(Ee.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].pause();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].resume();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].resume()}}run(t){if(this._active){const o=Ee;try{return Ee=this,t()}finally{Ee=o}}}on(){++this._on===1&&(this.prevScope=Ee,Ee=this)}off(){this._on>0&&--this._on===0&&(Ee=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let o,n;for(o=0,n=this.effects.length;o<n;o++)this.effects[o].stop();for(this.effects.length=0,o=0,n=this.cleanups.length;o<n;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,n=this.scopes.length;o<n;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function tl(e){return new el(e)}function sl(){return Ee}function Wi(e,t=!1){Ee&&Ee.cleanups.push(e)}let Ce;const No=new WeakSet;class ol{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ee&&Ee.active&&Ee.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,No.has(this)&&(No.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||rl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Wn(this),ll(this);const t=Ce,o=st;Ce=this,st=!0;try{return this.fn()}finally{il(this),Ce=t,st=o,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)$n(t);this.deps=this.depsTail=void 0,Wn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?No.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qo(this)&&this.run()}get dirty(){return Qo(this)}}let nl=0,_s,ws;function rl(e,t=!1){if(e.flags|=8,t){e.next=ws,ws=e;return}e.next=_s,_s=e}function wn(){nl++}function kn(){if(--nl>0)return;if(ws){let t=ws;for(ws=void 0;t;){const o=t.next;t.next=void 0,t.flags&=-9,t=o}}let e;for(;_s;){let t=_s;for(_s=void 0;t;){const o=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=o}}if(e)throw e}function ll(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function il(e){let t,o=e.depsTail,n=o;for(;n;){const r=n.prevDep;n.version===-1?(n===o&&(o=r),$n(n),Gi(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}e.deps=t,e.depsTail=o}function Qo(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(al(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function al(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===js)||(e.globalVersion=js,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Qo(e))))return;e.flags|=2;const t=e.dep,o=Ce,n=st;Ce=e,st=!0;try{ll(e);const r=e.fn(e._value);(t.version===0||Lt(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Ce=o,st=n,il(e),e.flags&=-3}}function $n(e,t=!1){const{dep:o,prevSub:n,nextSub:r}=e;if(n&&(n.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=n,e.nextSub=void 0),o.subs===e&&(o.subs=n,!n&&o.computed)){o.computed.flags&=-5;for(let l=o.computed.deps;l;l=l.nextDep)$n(l,!0)}!t&&!--o.sc&&o.map&&o.map.delete(o.key)}function Gi(e){const{prevDep:t,nextDep:o}=e;t&&(t.nextDep=o,e.prevDep=void 0),o&&(o.prevDep=t,e.nextDep=void 0)}let st=!0;const cl=[];function St(){cl.push(st),st=!1}function Mt(){const e=cl.pop();st=e===void 0?!0:e}function Wn(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const o=Ce;Ce=void 0;try{t()}finally{Ce=o}}}let js=0;class Ji{constructor(t,o){this.sub=t,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Cn{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ce||!st||Ce===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==Ce)o=this.activeLink=new Ji(Ce,this),Ce.deps?(o.prevDep=Ce.depsTail,Ce.depsTail.nextDep=o,Ce.depsTail=o):Ce.deps=Ce.depsTail=o,dl(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const n=o.nextDep;n.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=n),o.prevDep=Ce.depsTail,o.nextDep=void 0,Ce.depsTail.nextDep=o,Ce.depsTail=o,Ce.deps===o&&(Ce.deps=n)}return o}trigger(t){this.version++,js++,this.notify(t)}notify(t){wn();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{kn()}}}function dl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)dl(n)}const o=e.dep.subs;o!==e&&(e.prevSub=o,o&&(o.nextSub=e)),e.dep.subs=e}}const lo=new WeakMap,Kt=Symbol(""),Yo=Symbol(""),Is=Symbol("");function Re(e,t,o){if(st&&Ce){let n=lo.get(e);n||lo.set(e,n=new Map);let r=n.get(o);r||(n.set(o,r=new Cn),r.map=n,r.key=o),r.track()}}function wt(e,t,o,n,r,l){const c=lo.get(e);if(!c){js++;return}const a=i=>{i&&i.trigger()};if(wn(),t==="clear")c.forEach(a);else{const i=oe(e),u=i&&bn(o);if(i&&o==="length"){const d=Number(n);c.forEach((f,p)=>{(p==="length"||p===Is||!ht(p)&&p>=d)&&a(f)})}else switch((o!==void 0||c.has(void 0))&&a(c.get(o)),u&&a(c.get(Is)),t){case"add":i?u&&a(c.get("length")):(a(c.get(Kt)),is(e)&&a(c.get(Yo)));break;case"delete":i||(a(c.get(Kt)),is(e)&&a(c.get(Yo)));break;case"set":is(e)&&a(c.get(Kt));break}}kn()}function Ki(e,t){const o=lo.get(e);return o&&o.get(t)}function ss(e){const t=me(e);return t===e?t:(Re(t,"iterate",Is),Qe(e)?t:t.map(Ae))}function ko(e){return Re(e=me(e),"iterate",Is),e}const Zi={__proto__:null,[Symbol.iterator](){return Vo(this,Symbol.iterator,Ae)},concat(...e){return ss(this).concat(...e.map(t=>oe(t)?ss(t):t))},entries(){return Vo(this,"entries",e=>(e[1]=Ae(e[1]),e))},every(e,t){return xt(this,"every",e,t,void 0,arguments)},filter(e,t){return xt(this,"filter",e,t,o=>o.map(Ae),arguments)},find(e,t){return xt(this,"find",e,t,Ae,arguments)},findIndex(e,t){return xt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return xt(this,"findLast",e,t,Ae,arguments)},findLastIndex(e,t){return xt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return xt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Lo(this,"includes",e)},indexOf(...e){return Lo(this,"indexOf",e)},join(e){return ss(this).join(e)},lastIndexOf(...e){return Lo(this,"lastIndexOf",e)},map(e,t){return xt(this,"map",e,t,void 0,arguments)},pop(){return ms(this,"pop")},push(...e){return ms(this,"push",e)},reduce(e,...t){return Gn(this,"reduce",e,t)},reduceRight(e,...t){return Gn(this,"reduceRight",e,t)},shift(){return ms(this,"shift")},some(e,t){return xt(this,"some",e,t,void 0,arguments)},splice(...e){return ms(this,"splice",e)},toReversed(){return ss(this).toReversed()},toSorted(e){return ss(this).toSorted(e)},toSpliced(...e){return ss(this).toSpliced(...e)},unshift(...e){return ms(this,"unshift",e)},values(){return Vo(this,"values",Ae)}};function Vo(e,t,o){const n=ko(e),r=n[t]();return n!==e&&!Qe(e)&&(r._next=r.next,r.next=()=>{const l=r._next();return l.value&&(l.value=o(l.value)),l}),r}const Qi=Array.prototype;function xt(e,t,o,n,r,l){const c=ko(e),a=c!==e&&!Qe(e),i=c[t];if(i!==Qi[t]){const f=i.apply(e,l);return a?Ae(f):f}let u=o;c!==e&&(a?u=function(f,p){return o.call(this,Ae(f),p,e)}:o.length>2&&(u=function(f,p){return o.call(this,f,p,e)}));const d=i.call(c,u,n);return a&&r?r(d):d}function Gn(e,t,o,n){const r=ko(e);let l=o;return r!==e&&(Qe(e)?o.length>3&&(l=function(c,a,i){return o.call(this,c,a,i,e)}):l=function(c,a,i){return o.call(this,c,Ae(a),i,e)}),r[t](l,...n)}function Lo(e,t,o){const n=me(e);Re(n,"iterate",Is);const r=n[t](...o);return(r===-1||r===!1)&&Tn(o[0])?(o[0]=me(o[0]),n[t](...o)):r}function ms(e,t,o=[]){St(),wn();const n=me(e)[t].apply(e,o);return kn(),Mt(),n}const Yi=vn("__proto__,__v_isRef,__isVue"),ul=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ht));function Xi(e){ht(e)||(e=String(e));const t=me(this);return Re(t,"has",e),t.hasOwnProperty(e)}class fl{constructor(t=!1,o=!1){this._isReadonly=t,this._isShallow=o}get(t,o,n){if(o==="__v_skip")return t.__v_skip;const r=this._isReadonly,l=this._isShallow;if(o==="__v_isReactive")return!r;if(o==="__v_isReadonly")return r;if(o==="__v_isShallow")return l;if(o==="__v_raw")return n===(r?l?ca:hl:l?gl:ml).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const c=oe(t);if(!r){let i;if(c&&(i=Zi[o]))return i;if(o==="hasOwnProperty")return Xi}const a=Reflect.get(t,o,Te(t)?t:n);return(ht(o)?ul.has(o):Yi(o))||(r||Re(t,"get",o),l)?a:Te(a)?c&&bn(o)?a:a.value:ke(a)?r?xl(a):Ds(a):a}}class pl extends fl{constructor(t=!1){super(!1,t)}set(t,o,n,r){let l=t[o];if(!this._isShallow){const i=Bt(l);if(!Qe(n)&&!Bt(n)&&(l=me(l),n=me(n)),!oe(t)&&Te(l)&&!Te(n))return i?!1:(l.value=n,!0)}const c=oe(t)&&bn(o)?Number(o)<t.length:xe(t,o),a=Reflect.set(t,o,n,Te(t)?t:r);return t===me(r)&&(c?Lt(n,l)&&wt(t,"set",o,n):wt(t,"add",o,n)),a}deleteProperty(t,o){const n=xe(t,o);t[o];const r=Reflect.deleteProperty(t,o);return r&&n&&wt(t,"delete",o,void 0),r}has(t,o){const n=Reflect.has(t,o);return(!ht(o)||!ul.has(o))&&Re(t,"has",o),n}ownKeys(t){return Re(t,"iterate",oe(t)?"length":Kt),Reflect.ownKeys(t)}}class ea extends fl{constructor(t=!1){super(!0,t)}set(t,o){return!0}deleteProperty(t,o){return!0}}const ta=new pl,sa=new ea,oa=new pl(!0);const Xo=e=>e,Ks=e=>Reflect.getPrototypeOf(e);function na(e,t,o){return function(...n){const r=this.__v_raw,l=me(r),c=is(l),a=e==="entries"||e===Symbol.iterator&&c,i=e==="keys"&&c,u=r[e](...n),d=o?Xo:t?io:Ae;return!t&&Re(l,"iterate",i?Yo:Kt),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[d(f[0]),d(f[1])]:d(f),done:p}},[Symbol.iterator](){return this}}}}function Zs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ra(e,t){const o={get(r){const l=this.__v_raw,c=me(l),a=me(r);e||(Lt(r,a)&&Re(c,"get",r),Re(c,"get",a));const{has:i}=Ks(c),u=t?Xo:e?io:Ae;if(i.call(c,r))return u(l.get(r));if(i.call(c,a))return u(l.get(a));l!==c&&l.get(r)},get size(){const r=this.__v_raw;return!e&&Re(me(r),"iterate",Kt),Reflect.get(r,"size",r)},has(r){const l=this.__v_raw,c=me(l),a=me(r);return e||(Lt(r,a)&&Re(c,"has",r),Re(c,"has",a)),r===a?l.has(r):l.has(r)||l.has(a)},forEach(r,l){const c=this,a=c.__v_raw,i=me(a),u=t?Xo:e?io:Ae;return!e&&Re(i,"iterate",Kt),a.forEach((d,f)=>r.call(l,u(d),u(f),c))}};return Ie(o,e?{add:Zs("add"),set:Zs("set"),delete:Zs("delete"),clear:Zs("clear")}:{add(r){!t&&!Qe(r)&&!Bt(r)&&(r=me(r));const l=me(this);return Ks(l).has.call(l,r)||(l.add(r),wt(l,"add",r,r)),this},set(r,l){!t&&!Qe(l)&&!Bt(l)&&(l=me(l));const c=me(this),{has:a,get:i}=Ks(c);let u=a.call(c,r);u||(r=me(r),u=a.call(c,r));const d=i.call(c,r);return c.set(r,l),u?Lt(l,d)&&wt(c,"set",r,l):wt(c,"add",r,l),this},delete(r){const l=me(this),{has:c,get:a}=Ks(l);let i=c.call(l,r);i||(r=me(r),i=c.call(l,r)),a&&a.call(l,r);const u=l.delete(r);return i&&wt(l,"delete",r,void 0),u},clear(){const r=me(this),l=r.size!==0,c=r.clear();return l&&wt(r,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(r=>{o[r]=na(r,e,t)}),o}function Sn(e,t){const o=ra(e,t);return(n,r,l)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?n:Reflect.get(xe(o,r)&&r in n?o:n,r,l)}const la={get:Sn(!1,!1)},ia={get:Sn(!1,!0)},aa={get:Sn(!0,!1)};const ml=new WeakMap,gl=new WeakMap,hl=new WeakMap,ca=new WeakMap;function da(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ua(e){return e.__v_skip||!Object.isExtensible(e)?0:da(Ri(e))}function Ds(e){return Bt(e)?e:Mn(e,!1,ta,la,ml)}function vl(e){return Mn(e,!1,oa,ia,gl)}function xl(e){return Mn(e,!0,sa,aa,hl)}function Mn(e,t,o,n,r){if(!ke(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=ua(e);if(l===0)return e;const c=r.get(e);if(c)return c;const a=new Proxy(e,l===2?n:o);return r.set(e,a),a}function Ut(e){return Bt(e)?Ut(e.__v_raw):!!(e&&e.__v_isReactive)}function Bt(e){return!!(e&&e.__v_isReadonly)}function Qe(e){return!!(e&&e.__v_isShallow)}function Tn(e){return e?!!e.__v_raw:!1}function me(e){const t=e&&e.__v_raw;return t?me(t):e}function Pn(e){return!xe(e,"__v_skip")&&Object.isExtensible(e)&&Zo(e,"__v_skip",!0),e}const Ae=e=>ke(e)?Ds(e):e,io=e=>ke(e)?xl(e):e;function Te(e){return e?e.__v_isRef===!0:!1}function B(e){return yl(e,!1)}function fa(e){return yl(e,!0)}function yl(e,t){return Te(e)?e:new pa(e,t)}class pa{constructor(t,o){this.dep=new Cn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?t:me(t),this._value=o?t:Ae(t),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(t){const o=this._rawValue,n=this.__v_isShallow||Qe(t)||Bt(t);t=n?t:me(t),Lt(t,o)&&(this._rawValue=t,this._value=n?t:Ae(t),this.dep.trigger())}}function z(e){return Te(e)?e.value:e}const ma={get:(e,t,o)=>t==="__v_raw"?e:z(Reflect.get(e,t,o)),set:(e,t,o,n)=>{const r=e[t];return Te(r)&&!Te(o)?(r.value=o,!0):Reflect.set(e,t,o,n)}};function bl(e){return Ut(e)?e:new Proxy(e,ma)}function ga(e){const t=oe(e)?new Array(e.length):{};for(const o in e)t[o]=va(e,o);return t}class ha{constructor(t,o,n){this._object=t,this._key=o,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Ki(me(this._object),this._key)}}function va(e,t,o){const n=e[t];return Te(n)?n:new ha(e,t,o)}class xa{constructor(t,o,n){this.fn=t,this.setter=o,this._value=void 0,this.dep=new Cn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=js-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ce!==this)return rl(this,!0),!0}get value(){const t=this.dep.track();return al(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ya(e,t,o=!1){let n,r;return ue(e)?n=e:(n=e.get,r=e.set),new xa(n,r,o)}const Qs={},ao=new WeakMap;let Gt;function ba(e,t=!1,o=Gt){if(o){let n=ao.get(o);n||ao.set(o,n=[]),n.push(e)}}function _a(e,t,o=we){const{immediate:n,deep:r,once:l,scheduler:c,augmentJob:a,call:i}=o,u=R=>r?R:Qe(R)||r===!1||r===0?kt(R,1):kt(R);let d,f,p,x,C=!1,I=!1;if(Te(e)?(f=()=>e.value,C=Qe(e)):Ut(e)?(f=()=>u(e),C=!0):oe(e)?(I=!0,C=e.some(R=>Ut(R)||Qe(R)),f=()=>e.map(R=>{if(Te(R))return R.value;if(Ut(R))return u(R);if(ue(R))return i?i(R,2):R()})):ue(e)?t?f=i?()=>i(e,2):e:f=()=>{if(p){St();try{p()}finally{Mt()}}const R=Gt;Gt=d;try{return i?i(e,3,[x]):e(x)}finally{Gt=R}}:f=gt,t&&r){const R=f,U=r===!0?1/0:r;f=()=>kt(R(),U)}const E=sl(),M=()=>{d.stop(),E&&E.active&&yn(E.effects,d)};if(l&&t){const R=t;t=(...U)=>{R(...U),M()}}let $=I?new Array(e.length).fill(Qs):Qs;const j=R=>{if(!(!(d.flags&1)||!d.dirty&&!R))if(t){const U=d.run();if(r||C||(I?U.some((A,y)=>Lt(A,$[y])):Lt(U,$))){p&&p();const A=Gt;Gt=d;try{const y=[U,$===Qs?void 0:I&&$[0]===Qs?[]:$,x];$=U,i?i(t,3,y):t(...y)}finally{Gt=A}}}else d.run()};return a&&a(j),d=new ol(f),d.scheduler=c?()=>c(j,!1):j,x=R=>ba(R,!1,d),p=d.onStop=()=>{const R=ao.get(d);if(R){if(i)i(R,4);else for(const U of R)U();ao.delete(d)}},t?n?j(!0):$=d.run():c?c(j.bind(null,!0),!0):d.run(),M.pause=d.pause.bind(d),M.resume=d.resume.bind(d),M.stop=M,M}function kt(e,t=1/0,o){if(t<=0||!ke(e)||e.__v_skip||(o=o||new Set,o.has(e)))return e;if(o.add(e),t--,Te(e))kt(e.value,t,o);else if(oe(e))for(let n=0;n<e.length;n++)kt(e[n],t,o);else if(fs(e)||is(e))e.forEach(n=>{kt(n,t,o)});else if(Zr(e)){for(const n in e)kt(e[n],t,o);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&kt(e[n],t,o)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fs(e,t,o,n){try{return n?e(...n):e()}catch(r){$o(r,t,o)}}function nt(e,t,o,n){if(ue(e)){const r=Fs(e,t,o,n);return r&&Jr(r)&&r.catch(l=>{$o(l,t,o)}),r}if(oe(e)){const r=[];for(let l=0;l<e.length;l++)r.push(nt(e[l],t,o,n));return r}}function $o(e,t,o,n=!0){const r=t?t.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:c}=t&&t.appContext.config||we;if(t){let a=t.parent;const i=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${o}`;for(;a;){const d=a.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](e,i,u)===!1)return}a=a.parent}if(l){St(),Fs(l,null,10,[e,i,u]),Mt();return}}wa(e,o,r,n,c)}function wa(e,t,o,n=!0,r=!1){if(r)throw e;console.error(e)}const Le=[];let ut=-1;const as=[];let Ot=null,ns=0;const _l=Promise.resolve();let co=null;function pt(e){const t=co||_l;return e?t.then(this?e.bind(this):e):t}function ka(e){let t=ut+1,o=Le.length;for(;t<o;){const n=t+o>>>1,r=Le[n],l=As(r);l<e||l===e&&r.flags&2?t=n+1:o=n}return t}function jn(e){if(!(e.flags&1)){const t=As(e),o=Le[Le.length-1];!o||!(e.flags&2)&&t>=As(o)?Le.push(e):Le.splice(ka(t),0,e),e.flags|=1,wl()}}function wl(){co||(co=_l.then($l))}function $a(e){oe(e)?as.push(...e):Ot&&e.id===-1?Ot.splice(ns+1,0,e):e.flags&1||(as.push(e),e.flags|=1),wl()}function Jn(e,t,o=ut+1){for(;o<Le.length;o++){const n=Le[o];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Le.splice(o,1),o--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function kl(e){if(as.length){const t=[...new Set(as)].sort((o,n)=>As(o)-As(n));if(as.length=0,Ot){Ot.push(...t);return}for(Ot=t,ns=0;ns<Ot.length;ns++){const o=Ot[ns];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}Ot=null,ns=0}}const As=e=>e.id==null?e.flags&2?-1:1/0:e.id;function $l(e){try{for(ut=0;ut<Le.length;ut++){const t=Le[ut];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Fs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ut<Le.length;ut++){const t=Le[ut];t&&(t.flags&=-2)}ut=-1,Le.length=0,kl(),co=null,(Le.length||as.length)&&$l()}}let Be=null,Cl=null;function uo(e){const t=Be;return Be=e,Cl=e&&e.type.__scopeId||null,t}function ye(e,t=Be,o){if(!t||e._n)return e;const n=(...r)=>{n._d&&rr(-1);const l=uo(t);let c;try{c=e(...r)}finally{uo(l),n._d&&rr(1)}return c};return n._n=!0,n._c=!0,n._d=!0,n}function X(e,t){if(Be===null)return e;const o=Po(Be),n=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[l,c,a,i=we]=t[r];l&&(ue(l)&&(l={mounted:l,updated:l}),l.deep&&kt(c),n.push({dir:l,instance:o,value:c,oldValue:void 0,arg:a,modifiers:i}))}return e}function Ht(e,t,o,n){const r=e.dirs,l=t&&t.dirs;for(let c=0;c<r.length;c++){const a=r[c];l&&(a.oldValue=l[c].value);let i=a.dir[n];i&&(St(),nt(i,o,8,[e.el,a,e,t]),Mt())}}const Ca=Symbol("_vte"),Sl=e=>e.__isTeleport,Rt=Symbol("_leaveCb"),Ys=Symbol("_enterCb");function Sa(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return De(()=>{e.isMounted=!0}),Rl(()=>{e.isUnmounting=!0}),e}const Ze=[Function,Array],Ml={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ze,onEnter:Ze,onAfterEnter:Ze,onEnterCancelled:Ze,onBeforeLeave:Ze,onLeave:Ze,onAfterLeave:Ze,onLeaveCancelled:Ze,onBeforeAppear:Ze,onAppear:Ze,onAfterAppear:Ze,onAppearCancelled:Ze},Tl=e=>{const t=e.subTree;return t.component?Tl(t.component):t},Ma={name:"BaseTransition",props:Ml,setup(e,{slots:t}){const o=wc(),n=Sa();return()=>{const r=t.default&&Il(t.default(),!0);if(!r||!r.length)return;const l=Pl(r),c=me(e),{mode:a}=c;if(n.isLeaving)return Uo(l);const i=Kn(l);if(!i)return Uo(l);let u=en(i,c,n,o,f=>u=f);i.type!==Ue&&Es(i,u);let d=o.subTree&&Kn(o.subTree);if(d&&d.type!==Ue&&!Jt(i,d)&&Tl(o).type!==Ue){let f=en(d,c,n,o);if(Es(d,f),a==="out-in"&&i.type!==Ue)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,o.job.flags&8||o.update(),delete f.afterLeave,d=void 0},Uo(l);a==="in-out"&&i.type!==Ue?f.delayLeave=(p,x,C)=>{const I=jl(n,d);I[String(d.key)]=d,p[Rt]=()=>{x(),p[Rt]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{C(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return l}}};function Pl(e){let t=e[0];if(e.length>1){for(const o of e)if(o.type!==Ue){t=o;break}}return t}const Ta=Ma;function jl(e,t){const{leavingVNodes:o}=e;let n=o.get(t.type);return n||(n=Object.create(null),o.set(t.type,n)),n}function en(e,t,o,n,r){const{appear:l,mode:c,persisted:a=!1,onBeforeEnter:i,onEnter:u,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:x,onAfterLeave:C,onLeaveCancelled:I,onBeforeAppear:E,onAppear:M,onAfterAppear:$,onAppearCancelled:j}=t,R=String(e.key),U=jl(o,e),A=(k,v)=>{k&&nt(k,n,9,v)},y=(k,v)=>{const S=v[1];A(k,v),oe(k)?k.every(P=>P.length<=1)&&S():k.length<=1&&S()},_={mode:c,persisted:a,beforeEnter(k){let v=i;if(!o.isMounted)if(l)v=E||i;else return;k[Rt]&&k[Rt](!0);const S=U[R];S&&Jt(e,S)&&S.el[Rt]&&S.el[Rt](),A(v,[k])},enter(k){let v=u,S=d,P=f;if(!o.isMounted)if(l)v=M||u,S=$||d,P=j||f;else return;let Q=!1;const ee=k[Ys]=Se=>{Q||(Q=!0,Se?A(P,[k]):A(S,[k]),_.delayedLeave&&_.delayedLeave(),k[Ys]=void 0)};v?y(v,[k,ee]):ee()},leave(k,v){const S=String(e.key);if(k[Ys]&&k[Ys](!0),o.isUnmounting)return v();A(p,[k]);let P=!1;const Q=k[Rt]=ee=>{P||(P=!0,v(),ee?A(I,[k]):A(C,[k]),k[Rt]=void 0,U[S]===e&&delete U[S])};U[S]=e,x?y(x,[k,Q]):Q()},clone(k){const v=en(k,t,o,n,r);return r&&r(v),v}};return _}function Uo(e){if(Co(e))return e=Dt(e),e.children=null,e}function Kn(e){if(!Co(e))return Sl(e.type)&&e.children?Pl(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:o}=e;if(o){if(t&16)return o[0];if(t&32&&ue(o.default))return o.default()}}function Es(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Es(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Il(e,t=!1,o){let n=[],r=0;for(let l=0;l<e.length;l++){let c=e[l];const a=o==null?c.key:String(o)+String(c.key!=null?c.key:l);c.type===se?(c.patchFlag&128&&r++,n=n.concat(Il(c.children,t,a))):(t||c.type!==Ue)&&n.push(a!=null?Dt(c,{key:a}):c)}if(r>1)for(let l=0;l<n.length;l++)n[l].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Al(e,t){return ue(e)?Ie({name:e.name},t,{setup:e}):e}function El(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ks(e,t,o,n,r=!1){if(oe(e)){e.forEach((C,I)=>ks(C,t&&(oe(t)?t[I]:t),o,n,r));return}if($s(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ks(e,t,o,n.component.subTree);return}const l=n.shapeFlag&4?Po(n.component):n.el,c=r?null:l,{i:a,r:i}=e,u=t&&t.r,d=a.refs===we?a.refs={}:a.refs,f=a.setupState,p=me(f),x=f===we?()=>!1:C=>xe(p,C);if(u!=null&&u!==i&&(Me(u)?(d[u]=null,x(u)&&(f[u]=null)):Te(u)&&(u.value=null)),ue(i))Fs(i,a,12,[c,d]);else{const C=Me(i),I=Te(i);if(C||I){const E=()=>{if(e.f){const M=C?x(i)?f[i]:d[i]:i.value;r?oe(M)&&yn(M,l):oe(M)?M.includes(l)||M.push(l):C?(d[i]=[l],x(i)&&(f[i]=d[i])):(i.value=[l],e.k&&(d[e.k]=i.value))}else C?(d[i]=c,x(i)&&(f[i]=c)):I&&(i.value=c,e.k&&(d[e.k]=c))};c?(E.id=-1,Ge(E,o)):E()}}}_o().requestIdleCallback;_o().cancelIdleCallback;const $s=e=>!!e.type.__asyncLoader,Co=e=>e.type.__isKeepAlive;function Pa(e,t){Ol(e,"a",t)}function ja(e,t){Ol(e,"da",t)}function Ol(e,t,o=je){const n=e.__wdc||(e.__wdc=()=>{let r=o;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(So(t,n,o),o){let r=o.parent;for(;r&&r.parent;)Co(r.parent.vnode)&&Ia(n,t,o,r),r=r.parent}}function Ia(e,t,o,n){const r=So(t,e,n,!0);Hs(()=>{yn(n[t],r)},o)}function So(e,t,o=je,n=!1){if(o){const r=o[e]||(o[e]=[]),l=t.__weh||(t.__weh=(...c)=>{St();const a=zs(o),i=nt(t,o,e,c);return a(),Mt(),i});return n?r.unshift(l):r.push(l),l}}const Pt=e=>(t,o=je)=>{(!Rs||e==="sp")&&So(e,(...n)=>t(...n),o)},Aa=Pt("bm"),De=Pt("m"),Ea=Pt("bu"),Oa=Pt("u"),Rl=Pt("bum"),Hs=Pt("um"),Ra=Pt("sp"),Na=Pt("rtg"),Va=Pt("rtc");function La(e,t=je){So("ec",e,t)}const Nl="components";function qe(e,t){return Ll(Nl,e,!0,t)||e}const Vl=Symbol.for("v-ndc");function Ua(e){return Me(e)?Ll(Nl,e,!1)||e:e||Vl}function Ll(e,t,o=!0,n=!1){const r=Be||je;if(r){const l=r.type;{const a=Mc(l,!1);if(a&&(a===t||a===et(t)||a===bo(et(t))))return l}const c=Zn(r[e]||l[e],t)||Zn(r.appContext[e],t);return!c&&n?l:c}}function Zn(e,t){return e&&(e[t]||e[et(t)]||e[bo(et(t))])}function ae(e,t,o,n){let r;const l=o,c=oe(e);if(c||Me(e)){const a=c&&Ut(e);let i=!1,u=!1;a&&(i=!Qe(e),u=Bt(e),e=ko(e)),r=new Array(e.length);for(let d=0,f=e.length;d<f;d++)r[d]=t(i?u?io(Ae(e[d])):Ae(e[d]):e[d],d,void 0,l)}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,l)}else if(ke(e))if(e[Symbol.iterator])r=Array.from(e,(a,i)=>t(a,i,void 0,l));else{const a=Object.keys(e);r=new Array(a.length);for(let i=0,u=a.length;i<u;i++){const d=a[i];r[i]=t(e[d],d,i,l)}}else r=[];return r}const tn=e=>e?ni(e)?Po(e):tn(e.parent):null,Cs=Ie(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>tn(e.parent),$root:e=>tn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Bl(e),$forceUpdate:e=>e.f||(e.f=()=>{jn(e.update)}),$nextTick:e=>e.n||(e.n=pt.bind(e.proxy)),$watch:e=>ic.bind(e)}),Bo=(e,t)=>e!==we&&!e.__isScriptSetup&&xe(e,t),Ba={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:o,setupState:n,data:r,props:l,accessCache:c,type:a,appContext:i}=e;let u;if(t[0]!=="$"){const x=c[t];if(x!==void 0)switch(x){case 1:return n[t];case 2:return r[t];case 4:return o[t];case 3:return l[t]}else{if(Bo(n,t))return c[t]=1,n[t];if(r!==we&&xe(r,t))return c[t]=2,r[t];if((u=e.propsOptions[0])&&xe(u,t))return c[t]=3,l[t];if(o!==we&&xe(o,t))return c[t]=4,o[t];sn&&(c[t]=0)}}const d=Cs[t];let f,p;if(d)return t==="$attrs"&&Re(e.attrs,"get",""),d(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(o!==we&&xe(o,t))return c[t]=4,o[t];if(p=i.config.globalProperties,xe(p,t))return p[t]},set({_:e},t,o){const{data:n,setupState:r,ctx:l}=e;return Bo(r,t)?(r[t]=o,!0):n!==we&&xe(n,t)?(n[t]=o,!0):xe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=o,!0)},has({_:{data:e,setupState:t,accessCache:o,ctx:n,appContext:r,propsOptions:l}},c){let a;return!!o[c]||e!==we&&xe(e,c)||Bo(t,c)||(a=l[0])&&xe(a,c)||xe(n,c)||xe(Cs,c)||xe(r.config.globalProperties,c)},defineProperty(e,t,o){return o.get!=null?e._.accessCache[t]=0:xe(o,"value")&&this.set(e,t,o.value,null),Reflect.defineProperty(e,t,o)}};function Qn(e){return oe(e)?e.reduce((t,o)=>(t[o]=null,t),{}):e}let sn=!0;function Da(e){const t=Bl(e),o=e.proxy,n=e.ctx;sn=!1,t.beforeCreate&&Yn(t.beforeCreate,e,"bc");const{data:r,computed:l,methods:c,watch:a,provide:i,inject:u,created:d,beforeMount:f,mounted:p,beforeUpdate:x,updated:C,activated:I,deactivated:E,beforeDestroy:M,beforeUnmount:$,destroyed:j,unmounted:R,render:U,renderTracked:A,renderTriggered:y,errorCaptured:_,serverPrefetch:k,expose:v,inheritAttrs:S,components:P,directives:Q,filters:ee}=t;if(u&&Fa(u,n,null),c)for(const de in c){const ge=c[de];ue(ge)&&(n[de]=ge.bind(o))}if(r){const de=r.call(o,o);ke(de)&&(e.data=Ds(de))}if(sn=!0,l)for(const de in l){const ge=l[de],vt=ue(ge)?ge.bind(o,o):ue(ge.get)?ge.get.bind(o,o):gt,jt=!ue(ge)&&ue(ge.set)?ge.set.bind(o):gt,lt=fe({get:vt,set:jt});Object.defineProperty(n,de,{enumerable:!0,configurable:!0,get:()=>lt.value,set:Fe=>lt.value=Fe})}if(a)for(const de in a)Ul(a[de],n,o,de);if(i){const de=ue(i)?i.call(o):i;Reflect.ownKeys(de).forEach(ge=>{to(ge,de[ge])})}d&&Yn(d,e,"c");function he(de,ge){oe(ge)?ge.forEach(vt=>de(vt.bind(o))):ge&&de(ge.bind(o))}if(he(Aa,f),he(De,p),he(Ea,x),he(Oa,C),he(Pa,I),he(ja,E),he(La,_),he(Va,A),he(Na,y),he(Rl,$),he(Hs,R),he(Ra,k),oe(v))if(v.length){const de=e.exposed||(e.exposed={});v.forEach(ge=>{Object.defineProperty(de,ge,{get:()=>o[ge],set:vt=>o[ge]=vt})})}else e.exposed||(e.exposed={});U&&e.render===gt&&(e.render=U),S!=null&&(e.inheritAttrs=S),P&&(e.components=P),Q&&(e.directives=Q),k&&El(e)}function Fa(e,t,o=gt){oe(e)&&(e=on(e));for(const n in e){const r=e[n];let l;ke(r)?"default"in r?l=Ye(r.from||n,r.default,!0):l=Ye(r.from||n):l=Ye(r),Te(l)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>l.value,set:c=>l.value=c}):t[n]=l}}function Yn(e,t,o){nt(oe(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,o)}function Ul(e,t,o,n){let r=n.includes(".")?Xl(o,n):()=>o[n];if(Me(e)){const l=t[e];ue(l)&&ot(r,l)}else if(ue(e))ot(r,e.bind(o));else if(ke(e))if(oe(e))e.forEach(l=>Ul(l,t,o,n));else{const l=ue(e.handler)?e.handler.bind(o):t[e.handler];ue(l)&&ot(r,l,e)}}function Bl(e){const t=e.type,{mixins:o,extends:n}=t,{mixins:r,optionsCache:l,config:{optionMergeStrategies:c}}=e.appContext,a=l.get(t);let i;return a?i=a:!r.length&&!o&&!n?i=t:(i={},r.length&&r.forEach(u=>fo(i,u,c,!0)),fo(i,t,c)),ke(t)&&l.set(t,i),i}function fo(e,t,o,n=!1){const{mixins:r,extends:l}=t;l&&fo(e,l,o,!0),r&&r.forEach(c=>fo(e,c,o,!0));for(const c in t)if(!(n&&c==="expose")){const a=Ha[c]||o&&o[c];e[c]=a?a(e[c],t[c]):t[c]}return e}const Ha={data:Xn,props:er,emits:er,methods:xs,computed:xs,beforeCreate:Ve,created:Ve,beforeMount:Ve,mounted:Ve,beforeUpdate:Ve,updated:Ve,beforeDestroy:Ve,beforeUnmount:Ve,destroyed:Ve,unmounted:Ve,activated:Ve,deactivated:Ve,errorCaptured:Ve,serverPrefetch:Ve,components:xs,directives:xs,watch:qa,provide:Xn,inject:za};function Xn(e,t){return t?e?function(){return Ie(ue(e)?e.call(this,this):e,ue(t)?t.call(this,this):t)}:t:e}function za(e,t){return xs(on(e),on(t))}function on(e){if(oe(e)){const t={};for(let o=0;o<e.length;o++)t[e[o]]=e[o];return t}return e}function Ve(e,t){return e?[...new Set([].concat(e,t))]:t}function xs(e,t){return e?Ie(Object.create(null),e,t):t}function er(e,t){return e?oe(e)&&oe(t)?[...new Set([...e,...t])]:Ie(Object.create(null),Qn(e),Qn(t??{})):t}function qa(e,t){if(!e)return t;if(!t)return e;const o=Ie(Object.create(null),e);for(const n in t)o[n]=Ve(e[n],t[n]);return o}function Dl(){return{app:null,config:{isNativeTag:Ei,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Wa=0;function Ga(e,t){return function(n,r=null){ue(n)||(n=Ie({},n)),r!=null&&!ke(r)&&(r=null);const l=Dl(),c=new WeakSet,a=[];let i=!1;const u=l.app={_uid:Wa++,_component:n,_props:r,_container:null,_context:l,_instance:null,version:Pc,get config(){return l.config},set config(d){},use(d,...f){return c.has(d)||(d&&ue(d.install)?(c.add(d),d.install(u,...f)):ue(d)&&(c.add(d),d(u,...f))),u},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),u},component(d,f){return f?(l.components[d]=f,u):l.components[d]},directive(d,f){return f?(l.directives[d]=f,u):l.directives[d]},mount(d,f,p){if(!i){const x=u._ceVNode||F(n,r);return x.appContext=l,p===!0?p="svg":p===!1&&(p=void 0),e(x,d,p),i=!0,u._container=d,d.__vue_app__=u,Po(x.component)}},onUnmount(d){a.push(d)},unmount(){i&&(nt(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,f){return l.provides[d]=f,u},runWithContext(d){const f=Zt;Zt=u;try{return d()}finally{Zt=f}}};return u}}let Zt=null;function to(e,t){if(je){let o=je.provides;const n=je.parent&&je.parent.provides;n===o&&(o=je.provides=Object.create(n)),o[e]=t}}function Ye(e,t,o=!1){const n=je||Be;if(n||Zt){let r=Zt?Zt._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return o&&ue(t)?t.call(n&&n.proxy):t}}function Ja(){return!!(je||Be||Zt)}const Fl={},Hl=()=>Object.create(Fl),zl=e=>Object.getPrototypeOf(e)===Fl;function Ka(e,t,o,n=!1){const r={},l=Hl();e.propsDefaults=Object.create(null),ql(e,t,r,l);for(const c in e.propsOptions[0])c in r||(r[c]=void 0);o?e.props=n?r:vl(r):e.type.props?e.props=r:e.props=l,e.attrs=l}function Za(e,t,o,n){const{props:r,attrs:l,vnode:{patchFlag:c}}=e,a=me(r),[i]=e.propsOptions;let u=!1;if((n||c>0)&&!(c&16)){if(c&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let p=d[f];if(Mo(e.emitsOptions,p))continue;const x=t[p];if(i)if(xe(l,p))x!==l[p]&&(l[p]=x,u=!0);else{const C=et(p);r[C]=nn(i,a,C,x,e,!1)}else x!==l[p]&&(l[p]=x,u=!0)}}}else{ql(e,t,r,l)&&(u=!0);let d;for(const f in a)(!t||!xe(t,f)&&((d=Yt(f))===f||!xe(t,d)))&&(i?o&&(o[f]!==void 0||o[d]!==void 0)&&(r[f]=nn(i,a,f,void 0,e,!0)):delete r[f]);if(l!==a)for(const f in l)(!t||!xe(t,f))&&(delete l[f],u=!0)}u&&wt(e.attrs,"set","")}function ql(e,t,o,n){const[r,l]=e.propsOptions;let c=!1,a;if(t)for(let i in t){if(bs(i))continue;const u=t[i];let d;r&&xe(r,d=et(i))?!l||!l.includes(d)?o[d]=u:(a||(a={}))[d]=u:Mo(e.emitsOptions,i)||(!(i in n)||u!==n[i])&&(n[i]=u,c=!0)}if(l){const i=me(o),u=a||we;for(let d=0;d<l.length;d++){const f=l[d];o[f]=nn(r,i,f,u[f],e,!xe(u,f))}}return c}function nn(e,t,o,n,r,l){const c=e[o];if(c!=null){const a=xe(c,"default");if(a&&n===void 0){const i=c.default;if(c.type!==Function&&!c.skipFactory&&ue(i)){const{propsDefaults:u}=r;if(o in u)n=u[o];else{const d=zs(r);n=u[o]=i.call(null,t),d()}}else n=i;r.ce&&r.ce._setProp(o,n)}c[0]&&(l&&!a?n=!1:c[1]&&(n===""||n===Yt(o))&&(n=!0))}return n}const Qa=new WeakMap;function Wl(e,t,o=!1){const n=o?Qa:t.propsCache,r=n.get(e);if(r)return r;const l=e.props,c={},a=[];let i=!1;if(!ue(e)){const d=f=>{i=!0;const[p,x]=Wl(f,t,!0);Ie(c,p),x&&a.push(...x)};!o&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!l&&!i)return ke(e)&&n.set(e,ls),ls;if(oe(l))for(let d=0;d<l.length;d++){const f=et(l[d]);tr(f)&&(c[f]=we)}else if(l)for(const d in l){const f=et(d);if(tr(f)){const p=l[d],x=c[f]=oe(p)||ue(p)?{type:p}:Ie({},p),C=x.type;let I=!1,E=!0;if(oe(C))for(let M=0;M<C.length;++M){const $=C[M],j=ue($)&&$.name;if(j==="Boolean"){I=!0;break}else j==="String"&&(E=!1)}else I=ue(C)&&C.name==="Boolean";x[0]=I,x[1]=E,(I||xe(x,"default"))&&a.push(f)}}const u=[c,a];return ke(e)&&n.set(e,u),u}function tr(e){return e[0]!=="$"&&!bs(e)}const In=e=>e[0]==="_"||e==="$stable",An=e=>oe(e)?e.map(ft):[ft(e)],Ya=(e,t,o)=>{if(t._n)return t;const n=ye((...r)=>An(t(...r)),o);return n._c=!1,n},Gl=(e,t,o)=>{const n=e._ctx;for(const r in e){if(In(r))continue;const l=e[r];if(ue(l))t[r]=Ya(r,l,n);else if(l!=null){const c=An(l);t[r]=()=>c}}},Jl=(e,t)=>{const o=An(t);e.slots.default=()=>o},Kl=(e,t,o)=>{for(const n in t)(o||!In(n))&&(e[n]=t[n])},Xa=(e,t,o)=>{const n=e.slots=Hl();if(e.vnode.shapeFlag&32){const r=t.__;r&&Zo(n,"__",r,!0);const l=t._;l?(Kl(n,t,o),o&&Zo(n,"_",l,!0)):Gl(t,n)}else t&&Jl(e,t)},ec=(e,t,o)=>{const{vnode:n,slots:r}=e;let l=!0,c=we;if(n.shapeFlag&32){const a=t._;a?o&&a===1?l=!1:Kl(r,t,o):(l=!t.$stable,Gl(t,r)),c=t}else t&&(Jl(e,t),c={default:1});if(l)for(const a in r)!In(a)&&c[a]==null&&delete r[a]},Ge=mc;function tc(e){return sc(e)}function sc(e,t){const o=_o();o.__VUE__=!0;const{insert:n,remove:r,patchProp:l,createElement:c,createText:a,createComment:i,setText:u,setElementText:d,parentNode:f,nextSibling:p,setScopeId:x=gt,insertStaticContent:C}=e,I=(b,w,T,N=null,D=null,L=null,G=void 0,W=null,q=!!w.dynamicChildren)=>{if(b===w)return;b&&!Jt(b,w)&&(N=V(b),Fe(b,D,L,!0),b=null),w.patchFlag===-2&&(q=!1,w.dynamicChildren=null);const{type:H,ref:re,shapeFlag:K}=w;switch(H){case To:E(b,w,T,N);break;case Ue:M(b,w,T,N);break;case so:b==null&&$(w,T,N,G);break;case se:P(b,w,T,N,D,L,G,W,q);break;default:K&1?U(b,w,T,N,D,L,G,W,q):K&6?Q(b,w,T,N,D,L,G,W,q):(K&64||K&128)&&H.process(b,w,T,N,D,L,G,W,q,te)}re!=null&&D?ks(re,b&&b.ref,L,w||b,!w):re==null&&b&&b.ref!=null&&ks(b.ref,null,L,b,!0)},E=(b,w,T,N)=>{if(b==null)n(w.el=a(w.children),T,N);else{const D=w.el=b.el;w.children!==b.children&&u(D,w.children)}},M=(b,w,T,N)=>{b==null?n(w.el=i(w.children||""),T,N):w.el=b.el},$=(b,w,T,N)=>{[b.el,b.anchor]=C(b.children,w,T,N,b.el,b.anchor)},j=({el:b,anchor:w},T,N)=>{let D;for(;b&&b!==w;)D=p(b),n(b,T,N),b=D;n(w,T,N)},R=({el:b,anchor:w})=>{let T;for(;b&&b!==w;)T=p(b),r(b),b=T;r(w)},U=(b,w,T,N,D,L,G,W,q)=>{w.type==="svg"?G="svg":w.type==="math"&&(G="mathml"),b==null?A(w,T,N,D,L,G,W,q):k(b,w,D,L,G,W,q)},A=(b,w,T,N,D,L,G,W)=>{let q,H;const{props:re,shapeFlag:K,transition:ne,dirs:ce}=b;if(q=b.el=c(b.type,L,re&&re.is,re),K&8?d(q,b.children):K&16&&_(b.children,q,null,N,D,Do(b,L),G,W),ce&&Ht(b,null,N,"created"),y(q,b,b.scopeId,G,N),re){for(const $e in re)$e!=="value"&&!bs($e)&&l(q,$e,null,re[$e],L,N);"value"in re&&l(q,"value",null,re.value,L),(H=re.onVnodeBeforeMount)&&dt(H,N,b)}ce&&Ht(b,null,N,"beforeMount");const pe=oc(D,ne);pe&&ne.beforeEnter(q),n(q,w,T),((H=re&&re.onVnodeMounted)||pe||ce)&&Ge(()=>{H&&dt(H,N,b),pe&&ne.enter(q),ce&&Ht(b,null,N,"mounted")},D)},y=(b,w,T,N,D)=>{if(T&&x(b,T),N)for(let L=0;L<N.length;L++)x(b,N[L]);if(D){let L=D.subTree;if(w===L||ti(L.type)&&(L.ssContent===w||L.ssFallback===w)){const G=D.vnode;y(b,G,G.scopeId,G.slotScopeIds,D.parent)}}},_=(b,w,T,N,D,L,G,W,q=0)=>{for(let H=q;H<b.length;H++){const re=b[H]=W?Nt(b[H]):ft(b[H]);I(null,re,w,T,N,D,L,G,W)}},k=(b,w,T,N,D,L,G)=>{const W=w.el=b.el;let{patchFlag:q,dynamicChildren:H,dirs:re}=w;q|=b.patchFlag&16;const K=b.props||we,ne=w.props||we;let ce;if(T&&zt(T,!1),(ce=ne.onVnodeBeforeUpdate)&&dt(ce,T,w,b),re&&Ht(w,b,T,"beforeUpdate"),T&&zt(T,!0),(K.innerHTML&&ne.innerHTML==null||K.textContent&&ne.textContent==null)&&d(W,""),H?v(b.dynamicChildren,H,W,T,N,Do(w,D),L):G||ge(b,w,W,null,T,N,Do(w,D),L,!1),q>0){if(q&16)S(W,K,ne,T,D);else if(q&2&&K.class!==ne.class&&l(W,"class",null,ne.class,D),q&4&&l(W,"style",K.style,ne.style,D),q&8){const pe=w.dynamicProps;for(let $e=0;$e<pe.length;$e++){const be=pe[$e],He=K[be],ze=ne[be];(ze!==He||be==="value")&&l(W,be,He,ze,D,T)}}q&1&&b.children!==w.children&&d(W,w.children)}else!G&&H==null&&S(W,K,ne,T,D);((ce=ne.onVnodeUpdated)||re)&&Ge(()=>{ce&&dt(ce,T,w,b),re&&Ht(w,b,T,"updated")},N)},v=(b,w,T,N,D,L,G)=>{for(let W=0;W<w.length;W++){const q=b[W],H=w[W],re=q.el&&(q.type===se||!Jt(q,H)||q.shapeFlag&198)?f(q.el):T;I(q,H,re,null,N,D,L,G,!0)}},S=(b,w,T,N,D)=>{if(w!==T){if(w!==we)for(const L in w)!bs(L)&&!(L in T)&&l(b,L,w[L],null,D,N);for(const L in T){if(bs(L))continue;const G=T[L],W=w[L];G!==W&&L!=="value"&&l(b,L,W,G,D,N)}"value"in T&&l(b,"value",w.value,T.value,D)}},P=(b,w,T,N,D,L,G,W,q)=>{const H=w.el=b?b.el:a(""),re=w.anchor=b?b.anchor:a("");let{patchFlag:K,dynamicChildren:ne,slotScopeIds:ce}=w;ce&&(W=W?W.concat(ce):ce),b==null?(n(H,T,N),n(re,T,N),_(w.children||[],T,re,D,L,G,W,q)):K>0&&K&64&&ne&&b.dynamicChildren?(v(b.dynamicChildren,ne,T,D,L,G,W),(w.key!=null||D&&w===D.subTree)&&Zl(b,w,!0)):ge(b,w,T,re,D,L,G,W,q)},Q=(b,w,T,N,D,L,G,W,q)=>{w.slotScopeIds=W,b==null?w.shapeFlag&512?D.ctx.activate(w,T,N,G,q):ee(w,T,N,D,L,G,q):Se(b,w,q)},ee=(b,w,T,N,D,L,G)=>{const W=b.component=_c(b,N,D);if(Co(b)&&(W.ctx.renderer=te),kc(W,!1,G),W.asyncDep){if(D&&D.registerDep(W,he,G),!b.el){const q=W.subTree=F(Ue);M(null,q,w,T)}}else he(W,b,w,T,D,L,G)},Se=(b,w,T)=>{const N=w.component=b.component;if(fc(b,w,T))if(N.asyncDep&&!N.asyncResolved){de(N,w,T);return}else N.next=w,N.update();else w.el=b.el,N.vnode=w},he=(b,w,T,N,D,L,G)=>{const W=()=>{if(b.isMounted){let{next:K,bu:ne,u:ce,parent:pe,vnode:$e}=b;{const at=Ql(b);if(at){K&&(K.el=$e.el,de(b,K,G)),at.asyncDep.then(()=>{b.isUnmounted||W()});return}}let be=K,He;zt(b,!1),K?(K.el=$e.el,de(b,K,G)):K=$e,ne&&eo(ne),(He=K.props&&K.props.onVnodeBeforeUpdate)&&dt(He,pe,K,$e),zt(b,!0);const ze=or(b),it=b.subTree;b.subTree=ze,I(it,ze,f(it.el),V(it),b,D,L),K.el=ze.el,be===null&&pc(b,ze.el),ce&&Ge(ce,D),(He=K.props&&K.props.onVnodeUpdated)&&Ge(()=>dt(He,pe,K,$e),D)}else{let K;const{el:ne,props:ce}=w,{bm:pe,m:$e,parent:be,root:He,type:ze}=b,it=$s(w);zt(b,!1),pe&&eo(pe),!it&&(K=ce&&ce.onVnodeBeforeMount)&&dt(K,be,w),zt(b,!0);{He.ce&&He.ce._def.shadowRoot!==!1&&He.ce._injectChildStyle(ze);const at=b.subTree=or(b);I(null,at,T,N,b,D,L),w.el=at.el}if($e&&Ge($e,D),!it&&(K=ce&&ce.onVnodeMounted)){const at=w;Ge(()=>dt(K,be,at),D)}(w.shapeFlag&256||be&&$s(be.vnode)&&be.vnode.shapeFlag&256)&&b.a&&Ge(b.a,D),b.isMounted=!0,w=T=N=null}};b.scope.on();const q=b.effect=new ol(W);b.scope.off();const H=b.update=q.run.bind(q),re=b.job=q.runIfDirty.bind(q);re.i=b,re.id=b.uid,q.scheduler=()=>jn(re),zt(b,!0),H()},de=(b,w,T)=>{w.component=b;const N=b.vnode.props;b.vnode=w,b.next=null,Za(b,w.props,N,T),ec(b,w.children,T),St(),Jn(b),Mt()},ge=(b,w,T,N,D,L,G,W,q=!1)=>{const H=b&&b.children,re=b?b.shapeFlag:0,K=w.children,{patchFlag:ne,shapeFlag:ce}=w;if(ne>0){if(ne&128){jt(H,K,T,N,D,L,G,W,q);return}else if(ne&256){vt(H,K,T,N,D,L,G,W,q);return}}ce&8?(re&16&&Ke(H,D,L),K!==H&&d(T,K)):re&16?ce&16?jt(H,K,T,N,D,L,G,W,q):Ke(H,D,L,!0):(re&8&&d(T,""),ce&16&&_(K,T,N,D,L,G,W,q))},vt=(b,w,T,N,D,L,G,W,q)=>{b=b||ls,w=w||ls;const H=b.length,re=w.length,K=Math.min(H,re);let ne;for(ne=0;ne<K;ne++){const ce=w[ne]=q?Nt(w[ne]):ft(w[ne]);I(b[ne],ce,T,null,D,L,G,W,q)}H>re?Ke(b,D,L,!0,!1,K):_(w,T,N,D,L,G,W,q,K)},jt=(b,w,T,N,D,L,G,W,q)=>{let H=0;const re=w.length;let K=b.length-1,ne=re-1;for(;H<=K&&H<=ne;){const ce=b[H],pe=w[H]=q?Nt(w[H]):ft(w[H]);if(Jt(ce,pe))I(ce,pe,T,null,D,L,G,W,q);else break;H++}for(;H<=K&&H<=ne;){const ce=b[K],pe=w[ne]=q?Nt(w[ne]):ft(w[ne]);if(Jt(ce,pe))I(ce,pe,T,null,D,L,G,W,q);else break;K--,ne--}if(H>K){if(H<=ne){const ce=ne+1,pe=ce<re?w[ce].el:N;for(;H<=ne;)I(null,w[H]=q?Nt(w[H]):ft(w[H]),T,pe,D,L,G,W,q),H++}}else if(H>ne)for(;H<=K;)Fe(b[H],D,L,!0),H++;else{const ce=H,pe=H,$e=new Map;for(H=pe;H<=ne;H++){const We=w[H]=q?Nt(w[H]):ft(w[H]);We.key!=null&&$e.set(We.key,H)}let be,He=0;const ze=ne-pe+1;let it=!1,at=0;const ps=new Array(ze);for(H=0;H<ze;H++)ps[H]=0;for(H=ce;H<=K;H++){const We=b[H];if(He>=ze){Fe(We,D,L,!0);continue}let ct;if(We.key!=null)ct=$e.get(We.key);else for(be=pe;be<=ne;be++)if(ps[be-pe]===0&&Jt(We,w[be])){ct=be;break}ct===void 0?Fe(We,D,L,!0):(ps[ct-pe]=H+1,ct>=at?at=ct:it=!0,I(We,w[ct],T,null,D,L,G,W,q),He++)}const Fn=it?nc(ps):ls;for(be=Fn.length-1,H=ze-1;H>=0;H--){const We=pe+H,ct=w[We],Hn=We+1<re?w[We+1].el:N;ps[H]===0?I(null,ct,T,Hn,D,L,G,W,q):it&&(be<0||H!==Fn[be]?lt(ct,T,Hn,2):be--)}}},lt=(b,w,T,N,D=null)=>{const{el:L,type:G,transition:W,children:q,shapeFlag:H}=b;if(H&6){lt(b.component.subTree,w,T,N);return}if(H&128){b.suspense.move(w,T,N);return}if(H&64){G.move(b,w,T,te);return}if(G===se){n(L,w,T);for(let K=0;K<q.length;K++)lt(q[K],w,T,N);n(b.anchor,w,T);return}if(G===so){j(b,w,T);return}if(N!==2&&H&1&&W)if(N===0)W.beforeEnter(L),n(L,w,T),Ge(()=>W.enter(L),D);else{const{leave:K,delayLeave:ne,afterLeave:ce}=W,pe=()=>{b.ctx.isUnmounted?r(L):n(L,w,T)},$e=()=>{K(L,()=>{pe(),ce&&ce()})};ne?ne(L,pe,$e):$e()}else n(L,w,T)},Fe=(b,w,T,N=!1,D=!1)=>{const{type:L,props:G,ref:W,children:q,dynamicChildren:H,shapeFlag:re,patchFlag:K,dirs:ne,cacheIndex:ce}=b;if(K===-2&&(D=!1),W!=null&&(St(),ks(W,null,T,b,!0),Mt()),ce!=null&&(w.renderCache[ce]=void 0),re&256){w.ctx.deactivate(b);return}const pe=re&1&&ne,$e=!$s(b);let be;if($e&&(be=G&&G.onVnodeBeforeUnmount)&&dt(be,w,b),re&6)Js(b.component,T,N);else{if(re&128){b.suspense.unmount(T,N);return}pe&&Ht(b,null,w,"beforeUnmount"),re&64?b.type.remove(b,w,T,te,N):H&&!H.hasOnce&&(L!==se||K>0&&K&64)?Ke(H,w,T,!1,!0):(L===se&&K&384||!D&&re&16)&&Ke(q,w,T),N&&es(b)}($e&&(be=G&&G.onVnodeUnmounted)||pe)&&Ge(()=>{be&&dt(be,w,b),pe&&Ht(b,null,w,"unmounted")},T)},es=b=>{const{type:w,el:T,anchor:N,transition:D}=b;if(w===se){ts(T,N);return}if(w===so){R(b);return}const L=()=>{r(T),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(b.shapeFlag&1&&D&&!D.persisted){const{leave:G,delayLeave:W}=D,q=()=>G(T,L);W?W(b.el,L,q):q()}else L()},ts=(b,w)=>{let T;for(;b!==w;)T=p(b),r(b),b=T;r(w)},Js=(b,w,T)=>{const{bum:N,scope:D,job:L,subTree:G,um:W,m:q,a:H,parent:re,slots:{__:K}}=b;sr(q),sr(H),N&&eo(N),re&&oe(K)&&K.forEach(ne=>{re.renderCache[ne]=void 0}),D.stop(),L&&(L.flags|=8,Fe(G,b,w,T)),W&&Ge(W,w),Ge(()=>{b.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Ke=(b,w,T,N=!1,D=!1,L=0)=>{for(let G=L;G<b.length;G++)Fe(b[G],w,T,N,D)},V=b=>{if(b.shapeFlag&6)return V(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const w=p(b.anchor||b.el),T=w&&w[Ca];return T?p(T):w};let Y=!1;const J=(b,w,T)=>{b==null?w._vnode&&Fe(w._vnode,null,null,!0):I(w._vnode||null,b,w,null,null,null,T),w._vnode=b,Y||(Y=!0,Jn(),kl(),Y=!1)},te={p:I,um:Fe,m:lt,r:es,mt:ee,mc:_,pc:ge,pbc:v,n:V,o:e};return{render:J,hydrate:void 0,createApp:Ga(J)}}function Do({type:e,props:t},o){return o==="svg"&&e==="foreignObject"||o==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:o}function zt({effect:e,job:t},o){o?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function oc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Zl(e,t,o=!1){const n=e.children,r=t.children;if(oe(n)&&oe(r))for(let l=0;l<n.length;l++){const c=n[l];let a=r[l];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[l]=Nt(r[l]),a.el=c.el),!o&&a.patchFlag!==-2&&Zl(c,a)),a.type===To&&(a.el=c.el),a.type===Ue&&!a.el&&(a.el=c.el)}}function nc(e){const t=e.slice(),o=[0];let n,r,l,c,a;const i=e.length;for(n=0;n<i;n++){const u=e[n];if(u!==0){if(r=o[o.length-1],e[r]<u){t[n]=r,o.push(n);continue}for(l=0,c=o.length-1;l<c;)a=l+c>>1,e[o[a]]<u?l=a+1:c=a;u<e[o[l]]&&(l>0&&(t[n]=o[l-1]),o[l]=n)}}for(l=o.length,c=o[l-1];l-- >0;)o[l]=c,c=t[c];return o}function Ql(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ql(t)}function sr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const rc=Symbol.for("v-scx"),lc=()=>Ye(rc);function ot(e,t,o){return Yl(e,t,o)}function Yl(e,t,o=we){const{immediate:n,deep:r,flush:l,once:c}=o,a=Ie({},o),i=t&&n||!t&&l!=="post";let u;if(Rs){if(l==="sync"){const x=lc();u=x.__watcherHandles||(x.__watcherHandles=[])}else if(!i){const x=()=>{};return x.stop=gt,x.resume=gt,x.pause=gt,x}}const d=je;a.call=(x,C,I)=>nt(x,d,C,I);let f=!1;l==="post"?a.scheduler=x=>{Ge(x,d&&d.suspense)}:l!=="sync"&&(f=!0,a.scheduler=(x,C)=>{C?x():jn(x)}),a.augmentJob=x=>{t&&(x.flags|=4),f&&(x.flags|=2,d&&(x.id=d.uid,x.i=d))};const p=_a(e,t,a);return Rs&&(u?u.push(p):i&&p()),p}function ic(e,t,o){const n=this.proxy,r=Me(e)?e.includes(".")?Xl(n,e):()=>n[e]:e.bind(n,n);let l;ue(t)?l=t:(l=t.handler,o=t);const c=zs(this),a=Yl(r,l.bind(n),o);return c(),a}function Xl(e,t){const o=t.split(".");return()=>{let n=e;for(let r=0;r<o.length&&n;r++)n=n[o[r]];return n}}const ac=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${et(t)}Modifiers`]||e[`${Yt(t)}Modifiers`];function cc(e,t,...o){if(e.isUnmounted)return;const n=e.vnode.props||we;let r=o;const l=t.startsWith("update:"),c=l&&ac(n,t.slice(7));c&&(c.trim&&(r=o.map(d=>Me(d)?d.trim():d)),c.number&&(r=o.map(ro)));let a,i=n[a=Oo(t)]||n[a=Oo(et(t))];!i&&l&&(i=n[a=Oo(Yt(t))]),i&&nt(i,e,6,r);const u=n[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,nt(u,e,6,r)}}function ei(e,t,o=!1){const n=t.emitsCache,r=n.get(e);if(r!==void 0)return r;const l=e.emits;let c={},a=!1;if(!ue(e)){const i=u=>{const d=ei(u,t,!0);d&&(a=!0,Ie(c,d))};!o&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return!l&&!a?(ke(e)&&n.set(e,null),null):(oe(l)?l.forEach(i=>c[i]=null):Ie(c,l),ke(e)&&n.set(e,c),c)}function Mo(e,t){return!e||!xo(t)?!1:(t=t.slice(2).replace(/Once$/,""),xe(e,t[0].toLowerCase()+t.slice(1))||xe(e,Yt(t))||xe(e,t))}function or(e){const{type:t,vnode:o,proxy:n,withProxy:r,propsOptions:[l],slots:c,attrs:a,emit:i,render:u,renderCache:d,props:f,data:p,setupState:x,ctx:C,inheritAttrs:I}=e,E=uo(e);let M,$;try{if(o.shapeFlag&4){const R=r||n,U=R;M=ft(u.call(U,R,d,f,x,p,C)),$=a}else{const R=t;M=ft(R.length>1?R(f,{attrs:a,slots:c,emit:i}):R(f,null)),$=t.props?a:dc(a)}}catch(R){Ss.length=0,$o(R,e,1),M=F(Ue)}let j=M;if($&&I!==!1){const R=Object.keys($),{shapeFlag:U}=j;R.length&&U&7&&(l&&R.some(xn)&&($=uc($,l)),j=Dt(j,$,!1,!0))}return o.dirs&&(j=Dt(j,null,!1,!0),j.dirs=j.dirs?j.dirs.concat(o.dirs):o.dirs),o.transition&&Es(j,o.transition),M=j,uo(E),M}const dc=e=>{let t;for(const o in e)(o==="class"||o==="style"||xo(o))&&((t||(t={}))[o]=e[o]);return t},uc=(e,t)=>{const o={};for(const n in e)(!xn(n)||!(n.slice(9)in t))&&(o[n]=e[n]);return o};function fc(e,t,o){const{props:n,children:r,component:l}=e,{props:c,children:a,patchFlag:i}=t,u=l.emitsOptions;if(t.dirs||t.transition)return!0;if(o&&i>=0){if(i&1024)return!0;if(i&16)return n?nr(n,c,u):!!c;if(i&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const p=d[f];if(c[p]!==n[p]&&!Mo(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===c?!1:n?c?nr(n,c,u):!0:!!c;return!1}function nr(e,t,o){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let r=0;r<n.length;r++){const l=n[r];if(t[l]!==e[l]&&!Mo(o,l))return!0}return!1}function pc({vnode:e,parent:t},o){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=o,t=t.parent;else break}}const ti=e=>e.__isSuspense;function mc(e,t){t&&t.pendingBranch?oe(e)?t.effects.push(...e):t.effects.push(e):$a(e)}const se=Symbol.for("v-fgt"),To=Symbol.for("v-txt"),Ue=Symbol.for("v-cmt"),so=Symbol.for("v-stc"),Ss=[];let Je=null;function m(e=!1){Ss.push(Je=e?null:[])}function gc(){Ss.pop(),Je=Ss[Ss.length-1]||null}let Os=1;function rr(e,t=!1){Os+=e,e<0&&Je&&t&&(Je.hasOnce=!0)}function si(e){return e.dynamicChildren=Os>0?Je||ls:null,gc(),Os>0&&Je&&Je.push(e),e}function g(e,t,o,n,r,l){return si(s(e,t,o,n,r,l,!0))}function Pe(e,t,o,n,r){return si(F(e,t,o,n,r,!0))}function po(e){return e?e.__v_isVNode===!0:!1}function Jt(e,t){return e.type===t.type&&e.key===t.key}const oi=({key:e})=>e??null,oo=({ref:e,ref_key:t,ref_for:o})=>(typeof e=="number"&&(e=""+e),e!=null?Me(e)||Te(e)||ue(e)?{i:Be,r:e,k:t,f:!!o}:e:null);function s(e,t=null,o=null,n=0,r=null,l=e===se?0:1,c=!1,a=!1){const i={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&oi(t),ref:t&&oo(t),scopeId:Cl,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Be};return a?(En(i,o),l&128&&e.normalize(i)):o&&(i.shapeFlag|=Me(o)?8:16),Os>0&&!c&&Je&&(i.patchFlag>0||l&6)&&i.patchFlag!==32&&Je.push(i),i}const F=hc;function hc(e,t=null,o=null,n=0,r=null,l=!1){if((!e||e===Vl)&&(e=Ue),po(e)){const a=Dt(e,t,!0);return o&&En(a,o),Os>0&&!l&&Je&&(a.shapeFlag&6?Je[Je.indexOf(e)]=a:Je.push(a)),a.patchFlag=-2,a}if(Tc(e)&&(e=e.__vccOpts),t){t=vc(t);let{class:a,style:i}=t;a&&!Me(a)&&(t.class=ie(a)),ke(i)&&(Tn(i)&&!oe(i)&&(i=Ie({},i)),t.style=wo(i))}const c=Me(e)?1:ti(e)?128:Sl(e)?64:ke(e)?4:ue(e)?2:0;return s(e,t,o,n,r,c,l,!0)}function vc(e){return e?Tn(e)||zl(e)?Ie({},e):e:null}function Dt(e,t,o=!1,n=!1){const{props:r,ref:l,patchFlag:c,children:a,transition:i}=e,u=t?xc(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&oi(u),ref:t&&t.ref?o&&l?oe(l)?l.concat(oo(t)):[l,oo(t)]:oo(t):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==se?c===-1?16:c|16:c,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:i,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dt(e.ssContent),ssFallback:e.ssFallback&&Dt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return i&&n&&Es(d,i.clone(d)),d}function Z(e=" ",t=0){return F(To,null,e,t)}function Oe(e,t){const o=F(so,null,e);return o.staticCount=t,o}function O(e="",t=!1){return t?(m(),Pe(Ue,null,e)):F(Ue,null,e)}function ft(e){return e==null||typeof e=="boolean"?F(Ue):oe(e)?F(se,null,e.slice()):po(e)?Nt(e):F(To,null,String(e))}function Nt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Dt(e)}function En(e,t){let o=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(oe(t))o=16;else if(typeof t=="object")if(n&65){const r=t.default;r&&(r._c&&(r._d=!1),En(e,r()),r._c&&(r._d=!0));return}else{o=32;const r=t._;!r&&!zl(t)?t._ctx=Be:r===3&&Be&&(Be.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ue(t)?(t={default:t,_ctx:Be},o=32):(t=String(t),n&64?(o=16,t=[Z(t)]):o=8);e.children=t,e.shapeFlag|=o}function xc(...e){const t={};for(let o=0;o<e.length;o++){const n=e[o];for(const r in n)if(r==="class")t.class!==n.class&&(t.class=ie([t.class,n.class]));else if(r==="style")t.style=wo([t.style,n.style]);else if(xo(r)){const l=t[r],c=n[r];c&&l!==c&&!(oe(l)&&l.includes(c))&&(t[r]=l?[].concat(l,c):c)}else r!==""&&(t[r]=n[r])}return t}function dt(e,t,o,n=null){nt(e,t,7,[o,n])}const yc=Dl();let bc=0;function _c(e,t,o){const n=e.type,r=(t?t.appContext:e.appContext)||yc,l={uid:bc++,vnode:e,type:n,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new el(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wl(n,r),emitsOptions:ei(n,r),emit:null,emitted:null,propsDefaults:we,inheritAttrs:n.inheritAttrs,ctx:we,data:we,props:we,attrs:we,slots:we,refs:we,setupState:we,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=cc.bind(null,l),e.ce&&e.ce(l),l}let je=null;const wc=()=>je||Be;let mo,rn;{const e=_o(),t=(o,n)=>{let r;return(r=e[o])||(r=e[o]=[]),r.push(n),l=>{r.length>1?r.forEach(c=>c(l)):r[0](l)}};mo=t("__VUE_INSTANCE_SETTERS__",o=>je=o),rn=t("__VUE_SSR_SETTERS__",o=>Rs=o)}const zs=e=>{const t=je;return mo(e),e.scope.on(),()=>{e.scope.off(),mo(t)}},lr=()=>{je&&je.scope.off(),mo(null)};function ni(e){return e.vnode.shapeFlag&4}let Rs=!1;function kc(e,t=!1,o=!1){t&&rn(t);const{props:n,children:r}=e.vnode,l=ni(e);Ka(e,n,l,t),Xa(e,r,o||t);const c=l?$c(e,t):void 0;return t&&rn(!1),c}function $c(e,t){const o=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ba);const{setup:n}=o;if(n){St();const r=e.setupContext=n.length>1?Sc(e):null,l=zs(e),c=Fs(n,e,0,[e.props,r]),a=Jr(c);if(Mt(),l(),(a||e.sp)&&!$s(e)&&El(e),a){if(c.then(lr,lr),t)return c.then(i=>{ir(e,i)}).catch(i=>{$o(i,e,0)});e.asyncDep=c}else ir(e,c)}else ri(e)}function ir(e,t,o){ue(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ke(t)&&(e.setupState=bl(t)),ri(e)}function ri(e,t,o){const n=e.type;e.render||(e.render=n.render||gt);{const r=zs(e);St();try{Da(e)}finally{Mt(),r()}}}const Cc={get(e,t){return Re(e,"get",""),e[t]}};function Sc(e){const t=o=>{e.exposed=o||{}};return{attrs:new Proxy(e.attrs,Cc),slots:e.slots,emit:e.emit,expose:t}}function Po(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(bl(Pn(e.exposed)),{get(t,o){if(o in t)return t[o];if(o in Cs)return Cs[o](e)},has(t,o){return o in t||o in Cs}})):e.proxy}function Mc(e,t=!0){return ue(e)?e.displayName||e.name:e.name||t&&e.__name}function Tc(e){return ue(e)&&"__vccOpts"in e}const fe=(e,t)=>ya(e,t,Rs);function On(e,t,o){const n=arguments.length;return n===2?ke(t)&&!oe(t)?po(t)?F(e,null,[t]):F(e,t):F(e,null,t):(n>3?o=Array.prototype.slice.call(arguments,2):n===3&&po(o)&&(o=[o]),F(e,t,o))}const Pc="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ln;const ar=typeof window<"u"&&window.trustedTypes;if(ar)try{ln=ar.createPolicy("vue",{createHTML:e=>e})}catch{}const li=ln?e=>ln.createHTML(e):e=>e,jc="http://www.w3.org/2000/svg",Ic="http://www.w3.org/1998/Math/MathML",_t=typeof document<"u"?document:null,cr=_t&&_t.createElement("template"),Ac={insert:(e,t,o)=>{t.insertBefore(e,o||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,o,n)=>{const r=t==="svg"?_t.createElementNS(jc,e):t==="mathml"?_t.createElementNS(Ic,e):o?_t.createElement(e,{is:o}):_t.createElement(e);return e==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:e=>_t.createTextNode(e),createComment:e=>_t.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>_t.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,o,n,r,l){const c=o?o.previousSibling:t.lastChild;if(r&&(r===l||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),o),!(r===l||!(r=r.nextSibling)););else{cr.innerHTML=li(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=cr.content;if(n==="svg"||n==="mathml"){const i=a.firstChild;for(;i.firstChild;)a.appendChild(i.firstChild);a.removeChild(i)}t.insertBefore(a,o)}return[c?c.nextSibling:t.firstChild,o?o.previousSibling:t.lastChild]}},It="transition",gs="animation",Ns=Symbol("_vtc"),ii={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ec=Ie({},Ml,ii),Oc=e=>(e.displayName="Transition",e.props=Ec,e),Rc=Oc((e,{slots:t})=>On(Ta,Nc(e),t)),qt=(e,t=[])=>{oe(e)?e.forEach(o=>o(...t)):e&&e(...t)},dr=e=>e?oe(e)?e.some(t=>t.length>1):e.length>1:!1;function Nc(e){const t={};for(const P in e)P in ii||(t[P]=e[P]);if(e.css===!1)return t;const{name:o="v",type:n,duration:r,enterFromClass:l=`${o}-enter-from`,enterActiveClass:c=`${o}-enter-active`,enterToClass:a=`${o}-enter-to`,appearFromClass:i=l,appearActiveClass:u=c,appearToClass:d=a,leaveFromClass:f=`${o}-leave-from`,leaveActiveClass:p=`${o}-leave-active`,leaveToClass:x=`${o}-leave-to`}=e,C=Vc(r),I=C&&C[0],E=C&&C[1],{onBeforeEnter:M,onEnter:$,onEnterCancelled:j,onLeave:R,onLeaveCancelled:U,onBeforeAppear:A=M,onAppear:y=$,onAppearCancelled:_=j}=t,k=(P,Q,ee,Se)=>{P._enterCancelled=Se,Wt(P,Q?d:a),Wt(P,Q?u:c),ee&&ee()},v=(P,Q)=>{P._isLeaving=!1,Wt(P,f),Wt(P,x),Wt(P,p),Q&&Q()},S=P=>(Q,ee)=>{const Se=P?y:$,he=()=>k(Q,P,ee);qt(Se,[Q,he]),ur(()=>{Wt(Q,P?i:l),yt(Q,P?d:a),dr(Se)||fr(Q,n,I,he)})};return Ie(t,{onBeforeEnter(P){qt(M,[P]),yt(P,l),yt(P,c)},onBeforeAppear(P){qt(A,[P]),yt(P,i),yt(P,u)},onEnter:S(!1),onAppear:S(!0),onLeave(P,Q){P._isLeaving=!0;const ee=()=>v(P,Q);yt(P,f),P._enterCancelled?(yt(P,p),gr()):(gr(),yt(P,p)),ur(()=>{P._isLeaving&&(Wt(P,f),yt(P,x),dr(R)||fr(P,n,E,ee))}),qt(R,[P,ee])},onEnterCancelled(P){k(P,!1,void 0,!0),qt(j,[P])},onAppearCancelled(P){k(P,!0,void 0,!0),qt(_,[P])},onLeaveCancelled(P){v(P),qt(U,[P])}})}function Vc(e){if(e==null)return null;if(ke(e))return[Fo(e.enter),Fo(e.leave)];{const t=Fo(e);return[t,t]}}function Fo(e){return Li(e)}function yt(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.add(o)),(e[Ns]||(e[Ns]=new Set)).add(t)}function Wt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const o=e[Ns];o&&(o.delete(t),o.size||(e[Ns]=void 0))}function ur(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Lc=0;function fr(e,t,o,n){const r=e._endId=++Lc,l=()=>{r===e._endId&&n()};if(o!=null)return setTimeout(l,o);const{type:c,timeout:a,propCount:i}=Uc(e,t);if(!c)return n();const u=c+"end";let d=0;const f=()=>{e.removeEventListener(u,p),l()},p=x=>{x.target===e&&++d>=i&&f()};setTimeout(()=>{d<i&&f()},a+1),e.addEventListener(u,p)}function Uc(e,t){const o=window.getComputedStyle(e),n=C=>(o[C]||"").split(", "),r=n(`${It}Delay`),l=n(`${It}Duration`),c=pr(r,l),a=n(`${gs}Delay`),i=n(`${gs}Duration`),u=pr(a,i);let d=null,f=0,p=0;t===It?c>0&&(d=It,f=c,p=l.length):t===gs?u>0&&(d=gs,f=u,p=i.length):(f=Math.max(c,u),d=f>0?c>u?It:gs:null,p=d?d===It?l.length:i.length:0);const x=d===It&&/\b(transform|all)(,|$)/.test(n(`${It}Property`).toString());return{type:d,timeout:f,propCount:p,hasTransform:x}}function pr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((o,n)=>mr(o)+mr(e[n])))}function mr(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function gr(){return document.body.offsetHeight}function Bc(e,t,o){const n=e[Ns];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):o?e.setAttribute("class",t):e.className=t}const go=Symbol("_vod"),ai=Symbol("_vsh"),Vs={beforeMount(e,{value:t},{transition:o}){e[go]=e.style.display==="none"?"":e.style.display,o&&t?o.beforeEnter(e):hs(e,t)},mounted(e,{value:t},{transition:o}){o&&t&&o.enter(e)},updated(e,{value:t,oldValue:o},{transition:n}){!t!=!o&&(n?t?(n.beforeEnter(e),hs(e,!0),n.enter(e)):n.leave(e,()=>{hs(e,!1)}):hs(e,t))},beforeUnmount(e,{value:t}){hs(e,t)}};function hs(e,t){e.style.display=t?e[go]:"none",e[ai]=!t}const Dc=Symbol(""),Fc=/(^|;)\s*display\s*:/;function Hc(e,t,o){const n=e.style,r=Me(o);let l=!1;if(o&&!r){if(t)if(Me(t))for(const c of t.split(";")){const a=c.slice(0,c.indexOf(":")).trim();o[a]==null&&no(n,a,"")}else for(const c in t)o[c]==null&&no(n,c,"");for(const c in o)c==="display"&&(l=!0),no(n,c,o[c])}else if(r){if(t!==o){const c=n[Dc];c&&(o+=";"+c),n.cssText=o,l=Fc.test(o)}}else t&&e.removeAttribute("style");go in e&&(e[go]=l?n.display:"",e[ai]&&(n.display="none"))}const hr=/\s*!important$/;function no(e,t,o){if(oe(o))o.forEach(n=>no(e,t,n));else if(o==null&&(o=""),t.startsWith("--"))e.setProperty(t,o);else{const n=zc(e,t);hr.test(o)?e.setProperty(Yt(n),o.replace(hr,""),"important"):e[n]=o}}const vr=["Webkit","Moz","ms"],Ho={};function zc(e,t){const o=Ho[t];if(o)return o;let n=et(t);if(n!=="filter"&&n in e)return Ho[t]=n;n=bo(n);for(let r=0;r<vr.length;r++){const l=vr[r]+n;if(l in e)return Ho[t]=l}return t}const xr="http://www.w3.org/1999/xlink";function yr(e,t,o,n,r,l=zi(t)){n&&t.startsWith("xlink:")?o==null?e.removeAttributeNS(xr,t.slice(6,t.length)):e.setAttributeNS(xr,t,o):o==null||l&&!Qr(o)?e.removeAttribute(t):e.setAttribute(t,l?"":ht(o)?String(o):o)}function br(e,t,o,n,r){if(t==="innerHTML"||t==="textContent"){o!=null&&(e[t]=t==="innerHTML"?li(o):o);return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const a=l==="OPTION"?e.getAttribute("value")||"":e.value,i=o==null?e.type==="checkbox"?"on":"":String(o);(a!==i||!("_value"in e))&&(e.value=i),o==null&&e.removeAttribute(t),e._value=o;return}let c=!1;if(o===""||o==null){const a=typeof e[t];a==="boolean"?o=Qr(o):o==null&&a==="string"?(o="",c=!0):a==="number"&&(o=0,c=!0)}try{e[t]=o}catch{}c&&e.removeAttribute(r||t)}function $t(e,t,o,n){e.addEventListener(t,o,n)}function qc(e,t,o,n){e.removeEventListener(t,o,n)}const _r=Symbol("_vei");function Wc(e,t,o,n,r=null){const l=e[_r]||(e[_r]={}),c=l[t];if(n&&c)c.value=n;else{const[a,i]=Gc(t);if(n){const u=l[t]=Zc(n,r);$t(e,a,u,i)}else c&&(qc(e,a,c,i),l[t]=void 0)}}const wr=/(?:Once|Passive|Capture)$/;function Gc(e){let t;if(wr.test(e)){t={};let n;for(;n=e.match(wr);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yt(e.slice(2)),t]}let zo=0;const Jc=Promise.resolve(),Kc=()=>zo||(Jc.then(()=>zo=0),zo=Date.now());function Zc(e,t){const o=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=o.attached)return;nt(Qc(n,o.value),t,5,[n])};return o.value=e,o.attached=Kc(),o}function Qc(e,t){if(oe(t)){const o=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{o.call(e),e._stopped=!0},t.map(n=>r=>!r._stopped&&n&&n(r))}else return t}const kr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Yc=(e,t,o,n,r,l)=>{const c=r==="svg";t==="class"?Bc(e,n,c):t==="style"?Hc(e,o,n):xo(t)?xn(t)||Wc(e,t,o,n,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Xc(e,t,n,c))?(br(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&yr(e,t,n,c,l,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Me(n))?br(e,et(t),n,l,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),yr(e,t,n,c))};function Xc(e,t,o,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&kr(t)&&ue(o));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return kr(t)&&Me(o)?!1:t in e}const Ft=e=>{const t=e.props["onUpdate:modelValue"]||!1;return oe(t)?o=>eo(t,o):t};function ed(e){e.target.composing=!0}function $r(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Xe=Symbol("_assign"),le={created(e,{modifiers:{lazy:t,trim:o,number:n}},r){e[Xe]=Ft(r);const l=n||r.props&&r.props.type==="number";$t(e,t?"change":"input",c=>{if(c.target.composing)return;let a=e.value;o&&(a=a.trim()),l&&(a=ro(a)),e[Xe](a)}),o&&$t(e,"change",()=>{e.value=e.value.trim()}),t||($t(e,"compositionstart",ed),$t(e,"compositionend",$r),$t(e,"change",$r))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:o,modifiers:{lazy:n,trim:r,number:l}},c){if(e[Xe]=Ft(c),e.composing)return;const a=(l||e.type==="number")&&!/^0\d/.test(e.value)?ro(e.value):e.value,i=t??"";a!==i&&(document.activeElement===e&&e.type!=="range"&&(n&&t===o||r&&e.value.trim()===i)||(e.value=i))}},td={deep:!0,created(e,t,o){e[Xe]=Ft(o),$t(e,"change",()=>{const n=e._modelValue,r=cs(e),l=e.checked,c=e[Xe];if(oe(n)){const a=_n(n,r),i=a!==-1;if(l&&!i)c(n.concat(r));else if(!l&&i){const u=[...n];u.splice(a,1),c(u)}}else if(fs(n)){const a=new Set(n);l?a.add(r):a.delete(r),c(a)}else c(di(e,l))})},mounted:Cr,beforeUpdate(e,t,o){e[Xe]=Ft(o),Cr(e,t,o)}};function Cr(e,{value:t,oldValue:o},n){e._modelValue=t;let r;if(oe(t))r=_n(t,n.props.value)>-1;else if(fs(t))r=t.has(n.props.value);else{if(t===o)return;r=Qt(t,di(e,!0))}e.checked!==r&&(e.checked=r)}const ci={created(e,{value:t},o){e.checked=Qt(t,o.props.value),e[Xe]=Ft(o),$t(e,"change",()=>{e[Xe](cs(e))})},beforeUpdate(e,{value:t,oldValue:o},n){e[Xe]=Ft(n),t!==o&&(e.checked=Qt(t,n.props.value))}},Tt={deep:!0,created(e,{value:t,modifiers:{number:o}},n){const r=fs(t);$t(e,"change",()=>{const l=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>o?ro(cs(c)):cs(c));e[Xe](e.multiple?r?new Set(l):l:l[0]),e._assigning=!0,pt(()=>{e._assigning=!1})}),e[Xe]=Ft(n)},mounted(e,{value:t}){Sr(e,t)},beforeUpdate(e,t,o){e[Xe]=Ft(o)},updated(e,{value:t}){e._assigning||Sr(e,t)}};function Sr(e,t){const o=e.multiple,n=oe(t);if(!(o&&!n&&!fs(t))){for(let r=0,l=e.options.length;r<l;r++){const c=e.options[r],a=cs(c);if(o)if(n){const i=typeof a;i==="string"||i==="number"?c.selected=t.some(u=>String(u)===String(a)):c.selected=_n(t,a)>-1}else c.selected=t.has(a);else if(Qt(cs(c),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function cs(e){return"_value"in e?e._value:e.value}function di(e,t){const o=t?"_trueValue":"_falseValue";return o in e?e[o]:t}const an={created(e,t,o){Xs(e,t,o,null,"created")},mounted(e,t,o){Xs(e,t,o,null,"mounted")},beforeUpdate(e,t,o,n){Xs(e,t,o,n,"beforeUpdate")},updated(e,t,o,n){Xs(e,t,o,n,"updated")}};function sd(e,t){switch(e){case"SELECT":return Tt;case"TEXTAREA":return le;default:switch(t){case"checkbox":return td;case"radio":return ci;default:return le}}}function Xs(e,t,o,n,r){const c=sd(e.tagName,o.props&&o.props.type)[r];c&&c(e,t,o,n)}const od=["ctrl","shift","alt","meta"],nd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>od.some(o=>e[`${o}Key`]&&!t.includes(o))},mt=(e,t)=>{const o=e._withMods||(e._withMods={}),n=t.join(".");return o[n]||(o[n]=(r,...l)=>{for(let c=0;c<t.length;c++){const a=nd[t[c]];if(a&&a(r,t))return}return e(r,...l)})},rd=Ie({patchProp:Yc},Ac);let Mr;function ld(){return Mr||(Mr=tc(rd))}const id=(...e)=>{const t=ld().createApp(...e),{mount:o}=t;return t.mount=n=>{const r=cd(n);if(!r)return;const l=t._component;!ue(l)&&!l.render&&!l.template&&(l.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const c=o(r,!1,ad(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),c},t};function ad(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function cd(e){return Me(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ui;const jo=e=>ui=e,fi=Symbol();function cn(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ms;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ms||(Ms={}));function dd(){const e=tl(!0),t=e.run(()=>B({}));let o=[],n=[];const r=Pn({install(l){jo(r),r._a=l,l.provide(fi,r),l.config.globalProperties.$pinia=r,n.forEach(c=>o.push(c)),n=[]},use(l){return this._a?o.push(l):n.push(l),this},_p:o,_a:null,_e:e,_s:new Map,state:t});return r}const pi=()=>{};function Tr(e,t,o,n=pi){e.push(t);const r=()=>{const l=e.indexOf(t);l>-1&&(e.splice(l,1),n())};return!o&&sl()&&Wi(r),r}function os(e,...t){e.slice().forEach(o=>{o(...t)})}const ud=e=>e(),Pr=Symbol(),qo=Symbol();function dn(e,t){e instanceof Map&&t instanceof Map?t.forEach((o,n)=>e.set(n,o)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const o in t){if(!t.hasOwnProperty(o))continue;const n=t[o],r=e[o];cn(r)&&cn(n)&&e.hasOwnProperty(o)&&!Te(n)&&!Ut(n)?e[o]=dn(r,n):e[o]=n}return e}const fd=Symbol();function pd(e){return!cn(e)||!e.hasOwnProperty(fd)}const{assign:Et}=Object;function md(e){return!!(Te(e)&&e.effect)}function gd(e,t,o,n){const{state:r,actions:l,getters:c}=t,a=o.state.value[e];let i;function u(){a||(o.state.value[e]=r?r():{});const d=ga(o.state.value[e]);return Et(d,l,Object.keys(c||{}).reduce((f,p)=>(f[p]=Pn(fe(()=>{jo(o);const x=o._s.get(e);return c[p].call(x,x)})),f),{}))}return i=mi(e,u,t,o,n,!0),i}function mi(e,t,o={},n,r,l){let c;const a=Et({actions:{}},o),i={deep:!0};let u,d,f=[],p=[],x;const C=n.state.value[e];!l&&!C&&(n.state.value[e]={}),B({});let I;function E(_){let k;u=d=!1,typeof _=="function"?(_(n.state.value[e]),k={type:Ms.patchFunction,storeId:e,events:x}):(dn(n.state.value[e],_),k={type:Ms.patchObject,payload:_,storeId:e,events:x});const v=I=Symbol();pt().then(()=>{I===v&&(u=!0)}),d=!0,os(f,k,n.state.value[e])}const M=l?function(){const{state:k}=o,v=k?k():{};this.$patch(S=>{Et(S,v)})}:pi;function $(){c.stop(),f=[],p=[],n._s.delete(e)}const j=(_,k="")=>{if(Pr in _)return _[qo]=k,_;const v=function(){jo(n);const S=Array.from(arguments),P=[],Q=[];function ee(de){P.push(de)}function Se(de){Q.push(de)}os(p,{args:S,name:v[qo],store:U,after:ee,onError:Se});let he;try{he=_.apply(this&&this.$id===e?this:U,S)}catch(de){throw os(Q,de),de}return he instanceof Promise?he.then(de=>(os(P,de),de)).catch(de=>(os(Q,de),Promise.reject(de))):(os(P,he),he)};return v[Pr]=!0,v[qo]=k,v},R={_p:n,$id:e,$onAction:Tr.bind(null,p),$patch:E,$reset:M,$subscribe(_,k={}){const v=Tr(f,_,k.detached,()=>S()),S=c.run(()=>ot(()=>n.state.value[e],P=>{(k.flush==="sync"?d:u)&&_({storeId:e,type:Ms.direct,events:x},P)},Et({},i,k)));return v},$dispose:$},U=Ds(R);n._s.set(e,U);const y=(n._a&&n._a.runWithContext||ud)(()=>n._e.run(()=>(c=tl()).run(()=>t({action:j}))));for(const _ in y){const k=y[_];if(Te(k)&&!md(k)||Ut(k))l||(C&&pd(k)&&(Te(k)?k.value=C[_]:dn(k,C[_])),n.state.value[e][_]=k);else if(typeof k=="function"){const v=j(k,_);y[_]=v,a.actions[_]=k}}return Et(U,y),Et(me(U),y),Object.defineProperty(U,"$state",{get:()=>n.state.value[e],set:_=>{E(k=>{Et(k,_)})}}),n._p.forEach(_=>{Et(U,c.run(()=>_({store:U,app:n._a,pinia:n,options:a})))}),C&&l&&o.hydrate&&o.hydrate(U.$state,C),u=!0,d=!0,U}/*! #__NO_SIDE_EFFECTS__ */function Io(e,t,o){let n,r;const l=typeof t=="function";typeof e=="string"?(n=e,r=l?o:t):(r=e,n=e.id);function c(a,i){const u=Ja();return a=a||(u?Ye(fi,null):null),a&&jo(a),a=ui,a._s.has(n)||(l?mi(n,t,r,a):gd(n,r,a)),a._s.get(n)}return c.$id=n,c}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const rs=typeof document<"u";function gi(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function hd(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&gi(e.default)}const ve=Object.assign;function Wo(e,t){const o={};for(const n in t){const r=t[n];o[n]=rt(r)?r.map(e):e(r)}return o}const Ts=()=>{},rt=Array.isArray,hi=/#/g,vd=/&/g,xd=/\//g,yd=/=/g,bd=/\?/g,vi=/\+/g,_d=/%5B/g,wd=/%5D/g,xi=/%5E/g,kd=/%60/g,yi=/%7B/g,$d=/%7C/g,bi=/%7D/g,Cd=/%20/g;function Rn(e){return encodeURI(""+e).replace($d,"|").replace(_d,"[").replace(wd,"]")}function Sd(e){return Rn(e).replace(yi,"{").replace(bi,"}").replace(xi,"^")}function un(e){return Rn(e).replace(vi,"%2B").replace(Cd,"+").replace(hi,"%23").replace(vd,"%26").replace(kd,"`").replace(yi,"{").replace(bi,"}").replace(xi,"^")}function Md(e){return un(e).replace(yd,"%3D")}function Td(e){return Rn(e).replace(hi,"%23").replace(bd,"%3F")}function Pd(e){return e==null?"":Td(e).replace(xd,"%2F")}function Ls(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const jd=/\/$/,Id=e=>e.replace(jd,"");function Go(e,t,o="/"){let n,r={},l="",c="";const a=t.indexOf("#");let i=t.indexOf("?");return a<i&&a>=0&&(i=-1),i>-1&&(n=t.slice(0,i),l=t.slice(i+1,a>-1?a:t.length),r=e(l)),a>-1&&(n=n||t.slice(0,a),c=t.slice(a,t.length)),n=Rd(n??t,o),{fullPath:n+(l&&"?")+l+c,path:n,query:r,hash:Ls(c)}}function Ad(e,t){const o=t.query?e(t.query):"";return t.path+(o&&"?")+o+(t.hash||"")}function jr(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Ed(e,t,o){const n=t.matched.length-1,r=o.matched.length-1;return n>-1&&n===r&&ds(t.matched[n],o.matched[r])&&_i(t.params,o.params)&&e(t.query)===e(o.query)&&t.hash===o.hash}function ds(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function _i(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const o in e)if(!Od(e[o],t[o]))return!1;return!0}function Od(e,t){return rt(e)?Ir(e,t):rt(t)?Ir(t,e):e===t}function Ir(e,t){return rt(t)?e.length===t.length&&e.every((o,n)=>o===t[n]):e.length===1&&e[0]===t}function Rd(e,t){if(e.startsWith("/"))return e;if(!e)return t;const o=t.split("/"),n=e.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let l=o.length-1,c,a;for(c=0;c<n.length;c++)if(a=n[c],a!==".")if(a==="..")l>1&&l--;else break;return o.slice(0,l).join("/")+"/"+n.slice(c).join("/")}const At={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Us;(function(e){e.pop="pop",e.push="push"})(Us||(Us={}));var Ps;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ps||(Ps={}));function Nd(e){if(!e)if(rs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Id(e)}const Vd=/^[^#]+#/;function Ld(e,t){return e.replace(Vd,"#")+t}function Ud(e,t){const o=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-o.left-(t.left||0),top:n.top-o.top-(t.top||0)}}const Ao=()=>({left:window.scrollX,top:window.scrollY});function Bd(e){let t;if("el"in e){const o=e.el,n=typeof o=="string"&&o.startsWith("#"),r=typeof o=="string"?n?document.getElementById(o.slice(1)):document.querySelector(o):o;if(!r)return;t=Ud(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ar(e,t){return(history.state?history.state.position-t:-1)+e}const fn=new Map;function Dd(e,t){fn.set(e,t)}function Fd(e){const t=fn.get(e);return fn.delete(e),t}let Hd=()=>location.protocol+"//"+location.host;function wi(e,t){const{pathname:o,search:n,hash:r}=t,l=e.indexOf("#");if(l>-1){let a=r.includes(e.slice(l))?e.slice(l).length:1,i=r.slice(a);return i[0]!=="/"&&(i="/"+i),jr(i,"")}return jr(o,e)+n+r}function zd(e,t,o,n){let r=[],l=[],c=null;const a=({state:p})=>{const x=wi(e,location),C=o.value,I=t.value;let E=0;if(p){if(o.value=x,t.value=p,c&&c===C){c=null;return}E=I?p.position-I.position:0}else n(x);r.forEach(M=>{M(o.value,C,{delta:E,type:Us.pop,direction:E?E>0?Ps.forward:Ps.back:Ps.unknown})})};function i(){c=o.value}function u(p){r.push(p);const x=()=>{const C=r.indexOf(p);C>-1&&r.splice(C,1)};return l.push(x),x}function d(){const{history:p}=window;p.state&&p.replaceState(ve({},p.state,{scroll:Ao()}),"")}function f(){for(const p of l)p();l=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:i,listen:u,destroy:f}}function Er(e,t,o,n=!1,r=!1){return{back:e,current:t,forward:o,replaced:n,position:window.history.length,scroll:r?Ao():null}}function qd(e){const{history:t,location:o}=window,n={value:wi(e,o)},r={value:t.state};r.value||l(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function l(i,u,d){const f=e.indexOf("#"),p=f>-1?(o.host&&document.querySelector("base")?e:e.slice(f))+i:Hd()+e+i;try{t[d?"replaceState":"pushState"](u,"",p),r.value=u}catch(x){console.error(x),o[d?"replace":"assign"](p)}}function c(i,u){const d=ve({},t.state,Er(r.value.back,i,r.value.forward,!0),u,{position:r.value.position});l(i,d,!0),n.value=i}function a(i,u){const d=ve({},r.value,t.state,{forward:i,scroll:Ao()});l(d.current,d,!0);const f=ve({},Er(n.value,i,null),{position:d.position+1},u);l(i,f,!1),n.value=i}return{location:n,state:r,push:a,replace:c}}function Wd(e){e=Nd(e);const t=qd(e),o=zd(e,t.state,t.location,t.replace);function n(l,c=!0){c||o.pauseListeners(),history.go(l)}const r=ve({location:"",base:e,go:n,createHref:Ld.bind(null,e)},t,o);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function Gd(e){return typeof e=="string"||e&&typeof e=="object"}function ki(e){return typeof e=="string"||typeof e=="symbol"}const $i=Symbol("");var Or;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Or||(Or={}));function us(e,t){return ve(new Error,{type:e,[$i]:!0},t)}function bt(e,t){return e instanceof Error&&$i in e&&(t==null||!!(e.type&t))}const Rr="[^/]+?",Jd={sensitive:!1,strict:!1,start:!0,end:!0},Kd=/[.+*?^${}()[\]/\\]/g;function Zd(e,t){const o=ve({},Jd,t),n=[];let r=o.start?"^":"";const l=[];for(const u of e){const d=u.length?[]:[90];o.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const p=u[f];let x=40+(o.sensitive?.25:0);if(p.type===0)f||(r+="/"),r+=p.value.replace(Kd,"\\$&"),x+=40;else if(p.type===1){const{value:C,repeatable:I,optional:E,regexp:M}=p;l.push({name:C,repeatable:I,optional:E});const $=M||Rr;if($!==Rr){x+=10;try{new RegExp(`(${$})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${C}" (${$}): `+R.message)}}let j=I?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;f||(j=E&&u.length<2?`(?:/${j})`:"/"+j),E&&(j+="?"),r+=j,x+=20,E&&(x+=-8),I&&(x+=-20),$===".*"&&(x+=-50)}d.push(x)}n.push(d)}if(o.strict&&o.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}o.strict||(r+="/?"),o.end?r+="$":o.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const c=new RegExp(r,o.sensitive?"":"i");function a(u){const d=u.match(c),f={};if(!d)return null;for(let p=1;p<d.length;p++){const x=d[p]||"",C=l[p-1];f[C.name]=x&&C.repeatable?x.split("/"):x}return f}function i(u){let d="",f=!1;for(const p of e){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const x of p)if(x.type===0)d+=x.value;else if(x.type===1){const{value:C,repeatable:I,optional:E}=x,M=C in u?u[C]:"";if(rt(M)&&!I)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const $=rt(M)?M.join("/"):M;if(!$)if(E)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${C}"`);d+=$}}return d||"/"}return{re:c,score:n,keys:l,parse:a,stringify:i}}function Qd(e,t){let o=0;for(;o<e.length&&o<t.length;){const n=t[o]-e[o];if(n)return n;o++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ci(e,t){let o=0;const n=e.score,r=t.score;for(;o<n.length&&o<r.length;){const l=Qd(n[o],r[o]);if(l)return l;o++}if(Math.abs(r.length-n.length)===1){if(Nr(n))return 1;if(Nr(r))return-1}return r.length-n.length}function Nr(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Yd={type:0,value:""},Xd=/[a-zA-Z0-9_]/;function eu(e){if(!e)return[[]];if(e==="/")return[[Yd]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(x){throw new Error(`ERR (${o})/"${u}": ${x}`)}let o=0,n=o;const r=[];let l;function c(){l&&r.push(l),l=[]}let a=0,i,u="",d="";function f(){u&&(o===0?l.push({type:0,value:u}):o===1||o===2||o===3?(l.length>1&&(i==="*"||i==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:u,regexp:d,repeatable:i==="*"||i==="+",optional:i==="*"||i==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=i}for(;a<e.length;){if(i=e[a++],i==="\\"&&o!==2){n=o,o=4;continue}switch(o){case 0:i==="/"?(u&&f(),c()):i===":"?(f(),o=1):p();break;case 4:p(),o=n;break;case 1:i==="("?o=2:Xd.test(i)?p():(f(),o=0,i!=="*"&&i!=="?"&&i!=="+"&&a--);break;case 2:i===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+i:o=3:d+=i;break;case 3:f(),o=0,i!=="*"&&i!=="?"&&i!=="+"&&a--,d="";break;default:t("Unknown state");break}}return o===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),c(),r}function tu(e,t,o){const n=Zd(eu(e.path),o),r=ve(n,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function su(e,t){const o=[],n=new Map;t=Br({strict:!1,end:!0,sensitive:!1},t);function r(f){return n.get(f)}function l(f,p,x){const C=!x,I=Lr(f);I.aliasOf=x&&x.record;const E=Br(t,f),M=[I];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const U of R)M.push(Lr(ve({},I,{components:x?x.record.components:I.components,path:U,aliasOf:x?x.record:I})))}let $,j;for(const R of M){const{path:U}=R;if(p&&U[0]!=="/"){const A=p.record.path,y=A[A.length-1]==="/"?"":"/";R.path=p.record.path+(U&&y+U)}if($=tu(R,p,E),x?x.alias.push($):(j=j||$,j!==$&&j.alias.push($),C&&f.name&&!Ur($)&&c(f.name)),Si($)&&i($),I.children){const A=I.children;for(let y=0;y<A.length;y++)l(A[y],$,x&&x.children[y])}x=x||$}return j?()=>{c(j)}:Ts}function c(f){if(ki(f)){const p=n.get(f);p&&(n.delete(f),o.splice(o.indexOf(p),1),p.children.forEach(c),p.alias.forEach(c))}else{const p=o.indexOf(f);p>-1&&(o.splice(p,1),f.record.name&&n.delete(f.record.name),f.children.forEach(c),f.alias.forEach(c))}}function a(){return o}function i(f){const p=ru(f,o);o.splice(p,0,f),f.record.name&&!Ur(f)&&n.set(f.record.name,f)}function u(f,p){let x,C={},I,E;if("name"in f&&f.name){if(x=n.get(f.name),!x)throw us(1,{location:f});E=x.record.name,C=ve(Vr(p.params,x.keys.filter(j=>!j.optional).concat(x.parent?x.parent.keys.filter(j=>j.optional):[]).map(j=>j.name)),f.params&&Vr(f.params,x.keys.map(j=>j.name))),I=x.stringify(C)}else if(f.path!=null)I=f.path,x=o.find(j=>j.re.test(I)),x&&(C=x.parse(I),E=x.record.name);else{if(x=p.name?n.get(p.name):o.find(j=>j.re.test(p.path)),!x)throw us(1,{location:f,currentLocation:p});E=x.record.name,C=ve({},p.params,f.params),I=x.stringify(C)}const M=[];let $=x;for(;$;)M.unshift($.record),$=$.parent;return{name:E,path:I,params:C,matched:M,meta:nu(M)}}e.forEach(f=>l(f));function d(){o.length=0,n.clear()}return{addRoute:l,resolve:u,removeRoute:c,clearRoutes:d,getRoutes:a,getRecordMatcher:r}}function Vr(e,t){const o={};for(const n of t)n in e&&(o[n]=e[n]);return o}function Lr(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:ou(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function ou(e){const t={},o=e.props||!1;if("component"in e)t.default=o;else for(const n in e.components)t[n]=typeof o=="object"?o[n]:o;return t}function Ur(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function nu(e){return e.reduce((t,o)=>ve(t,o.meta),{})}function Br(e,t){const o={};for(const n in e)o[n]=n in t?t[n]:e[n];return o}function ru(e,t){let o=0,n=t.length;for(;o!==n;){const l=o+n>>1;Ci(e,t[l])<0?n=l:o=l+1}const r=lu(e);return r&&(n=t.lastIndexOf(r,n-1)),n}function lu(e){let t=e;for(;t=t.parent;)if(Si(t)&&Ci(e,t)===0)return t}function Si({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function iu(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const l=n[r].replace(vi," "),c=l.indexOf("="),a=Ls(c<0?l:l.slice(0,c)),i=c<0?null:Ls(l.slice(c+1));if(a in t){let u=t[a];rt(u)||(u=t[a]=[u]),u.push(i)}else t[a]=i}return t}function Dr(e){let t="";for(let o in e){const n=e[o];if(o=Md(o),n==null){n!==void 0&&(t+=(t.length?"&":"")+o);continue}(rt(n)?n.map(l=>l&&un(l)):[n&&un(n)]).forEach(l=>{l!==void 0&&(t+=(t.length?"&":"")+o,l!=null&&(t+="="+l))})}return t}function au(e){const t={};for(const o in e){const n=e[o];n!==void 0&&(t[o]=rt(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return t}const cu=Symbol(""),Fr=Symbol(""),Eo=Symbol(""),Nn=Symbol(""),pn=Symbol("");function vs(){let e=[];function t(n){return e.push(n),()=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)}}function o(){e=[]}return{add:t,list:()=>e.slice(),reset:o}}function Vt(e,t,o,n,r,l=c=>c()){const c=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((a,i)=>{const u=p=>{p===!1?i(us(4,{from:o,to:t})):p instanceof Error?i(p):Gd(p)?i(us(2,{from:t,to:p})):(c&&n.enterCallbacks[r]===c&&typeof p=="function"&&c.push(p),a())},d=l(()=>e.call(n&&n.instances[r],t,o,u));let f=Promise.resolve(d);e.length<3&&(f=f.then(u)),f.catch(p=>i(p))})}function Jo(e,t,o,n,r=l=>l()){const l=[];for(const c of e)for(const a in c.components){let i=c.components[a];if(!(t!=="beforeRouteEnter"&&!c.instances[a]))if(gi(i)){const d=(i.__vccOpts||i)[t];d&&l.push(Vt(d,o,n,c,a,r))}else{let u=i();l.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${c.path}"`);const f=hd(d)?d.default:d;c.mods[a]=d,c.components[a]=f;const x=(f.__vccOpts||f)[t];return x&&Vt(x,o,n,c,a,r)()}))}}return l}function Hr(e){const t=Ye(Eo),o=Ye(Nn),n=fe(()=>{const i=z(e.to);return t.resolve(i)}),r=fe(()=>{const{matched:i}=n.value,{length:u}=i,d=i[u-1],f=o.matched;if(!d||!f.length)return-1;const p=f.findIndex(ds.bind(null,d));if(p>-1)return p;const x=zr(i[u-2]);return u>1&&zr(d)===x&&f[f.length-1].path!==x?f.findIndex(ds.bind(null,i[u-2])):p}),l=fe(()=>r.value>-1&&mu(o.params,n.value.params)),c=fe(()=>r.value>-1&&r.value===o.matched.length-1&&_i(o.params,n.value.params));function a(i={}){if(pu(i)){const u=t[z(e.replace)?"replace":"push"](z(e.to)).catch(Ts);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:fe(()=>n.value.href),isActive:l,isExactActive:c,navigate:a}}function du(e){return e.length===1?e[0]:e}const uu=Al({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Hr,setup(e,{slots:t}){const o=Ds(Hr(e)),{options:n}=Ye(Eo),r=fe(()=>({[qr(e.activeClass,n.linkActiveClass,"router-link-active")]:o.isActive,[qr(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:o.isExactActive}));return()=>{const l=t.default&&du(t.default(o));return e.custom?l:On("a",{"aria-current":o.isExactActive?e.ariaCurrentValue:null,href:o.href,onClick:o.navigate,class:r.value},l)}}}),fu=uu;function pu(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function mu(e,t){for(const o in t){const n=t[o],r=e[o];if(typeof n=="string"){if(n!==r)return!1}else if(!rt(r)||r.length!==n.length||n.some((l,c)=>l!==r[c]))return!1}return!0}function zr(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const qr=(e,t,o)=>e??t??o,gu=Al({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:o}){const n=Ye(pn),r=fe(()=>e.route||n.value),l=Ye(Fr,0),c=fe(()=>{let u=z(l);const{matched:d}=r.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),a=fe(()=>r.value.matched[c.value]);to(Fr,fe(()=>c.value+1)),to(cu,a),to(pn,r);const i=B();return ot(()=>[i.value,a.value,e.name],([u,d,f],[p,x,C])=>{d&&(d.instances[f]=u,x&&x!==d&&u&&u===p&&(d.leaveGuards.size||(d.leaveGuards=x.leaveGuards),d.updateGuards.size||(d.updateGuards=x.updateGuards))),u&&d&&(!x||!ds(d,x)||!p)&&(d.enterCallbacks[f]||[]).forEach(I=>I(u))},{flush:"post"}),()=>{const u=r.value,d=e.name,f=a.value,p=f&&f.components[d];if(!p)return Wr(o.default,{Component:p,route:u});const x=f.props[d],C=x?x===!0?u.params:typeof x=="function"?x(u):x:null,E=On(p,ve({},C,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(f.instances[d]=null)},ref:i}));return Wr(o.default,{Component:E,route:u})||E}}});function Wr(e,t){if(!e)return null;const o=e(t);return o.length===1?o[0]:o}const hu=gu;function vu(e){const t=su(e.routes,e),o=e.parseQuery||iu,n=e.stringifyQuery||Dr,r=e.history,l=vs(),c=vs(),a=vs(),i=fa(At);let u=At;rs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Wo.bind(null,V=>""+V),f=Wo.bind(null,Pd),p=Wo.bind(null,Ls);function x(V,Y){let J,te;return ki(V)?(J=t.getRecordMatcher(V),te=Y):te=V,t.addRoute(te,J)}function C(V){const Y=t.getRecordMatcher(V);Y&&t.removeRoute(Y)}function I(){return t.getRoutes().map(V=>V.record)}function E(V){return!!t.getRecordMatcher(V)}function M(V,Y){if(Y=ve({},Y||i.value),typeof V=="string"){const T=Go(o,V,Y.path),N=t.resolve({path:T.path},Y),D=r.createHref(T.fullPath);return ve(T,N,{params:p(N.params),hash:Ls(T.hash),redirectedFrom:void 0,href:D})}let J;if(V.path!=null)J=ve({},V,{path:Go(o,V.path,Y.path).path});else{const T=ve({},V.params);for(const N in T)T[N]==null&&delete T[N];J=ve({},V,{params:f(T)}),Y.params=f(Y.params)}const te=t.resolve(J,Y),_e=V.hash||"";te.params=d(p(te.params));const b=Ad(n,ve({},V,{hash:Sd(_e),path:te.path})),w=r.createHref(b);return ve({fullPath:b,hash:_e,query:n===Dr?au(V.query):V.query||{}},te,{redirectedFrom:void 0,href:w})}function $(V){return typeof V=="string"?Go(o,V,i.value.path):ve({},V)}function j(V,Y){if(u!==V)return us(8,{from:Y,to:V})}function R(V){return y(V)}function U(V){return R(ve($(V),{replace:!0}))}function A(V){const Y=V.matched[V.matched.length-1];if(Y&&Y.redirect){const{redirect:J}=Y;let te=typeof J=="function"?J(V):J;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=$(te):{path:te},te.params={}),ve({query:V.query,hash:V.hash,params:te.path!=null?{}:V.params},te)}}function y(V,Y){const J=u=M(V),te=i.value,_e=V.state,b=V.force,w=V.replace===!0,T=A(J);if(T)return y(ve($(T),{state:typeof T=="object"?ve({},_e,T.state):_e,force:b,replace:w}),Y||J);const N=J;N.redirectedFrom=Y;let D;return!b&&Ed(n,te,J)&&(D=us(16,{to:N,from:te}),lt(te,te,!0,!1)),(D?Promise.resolve(D):v(N,te)).catch(L=>bt(L)?bt(L,2)?L:jt(L):ge(L,N,te)).then(L=>{if(L){if(bt(L,2))return y(ve({replace:w},$(L.to),{state:typeof L.to=="object"?ve({},_e,L.to.state):_e,force:b}),Y||N)}else L=P(N,te,!0,w,_e);return S(N,te,L),L})}function _(V,Y){const J=j(V,Y);return J?Promise.reject(J):Promise.resolve()}function k(V){const Y=ts.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(V):V()}function v(V,Y){let J;const[te,_e,b]=xu(V,Y);J=Jo(te.reverse(),"beforeRouteLeave",V,Y);for(const T of te)T.leaveGuards.forEach(N=>{J.push(Vt(N,V,Y))});const w=_.bind(null,V,Y);return J.push(w),Ke(J).then(()=>{J=[];for(const T of l.list())J.push(Vt(T,V,Y));return J.push(w),Ke(J)}).then(()=>{J=Jo(_e,"beforeRouteUpdate",V,Y);for(const T of _e)T.updateGuards.forEach(N=>{J.push(Vt(N,V,Y))});return J.push(w),Ke(J)}).then(()=>{J=[];for(const T of b)if(T.beforeEnter)if(rt(T.beforeEnter))for(const N of T.beforeEnter)J.push(Vt(N,V,Y));else J.push(Vt(T.beforeEnter,V,Y));return J.push(w),Ke(J)}).then(()=>(V.matched.forEach(T=>T.enterCallbacks={}),J=Jo(b,"beforeRouteEnter",V,Y,k),J.push(w),Ke(J))).then(()=>{J=[];for(const T of c.list())J.push(Vt(T,V,Y));return J.push(w),Ke(J)}).catch(T=>bt(T,8)?T:Promise.reject(T))}function S(V,Y,J){a.list().forEach(te=>k(()=>te(V,Y,J)))}function P(V,Y,J,te,_e){const b=j(V,Y);if(b)return b;const w=Y===At,T=rs?history.state:{};J&&(te||w?r.replace(V.fullPath,ve({scroll:w&&T&&T.scroll},_e)):r.push(V.fullPath,_e)),i.value=V,lt(V,Y,J,w),jt()}let Q;function ee(){Q||(Q=r.listen((V,Y,J)=>{if(!Js.listening)return;const te=M(V),_e=A(te);if(_e){y(ve(_e,{replace:!0,force:!0}),te).catch(Ts);return}u=te;const b=i.value;rs&&Dd(Ar(b.fullPath,J.delta),Ao()),v(te,b).catch(w=>bt(w,12)?w:bt(w,2)?(y(ve($(w.to),{force:!0}),te).then(T=>{bt(T,20)&&!J.delta&&J.type===Us.pop&&r.go(-1,!1)}).catch(Ts),Promise.reject()):(J.delta&&r.go(-J.delta,!1),ge(w,te,b))).then(w=>{w=w||P(te,b,!1),w&&(J.delta&&!bt(w,8)?r.go(-J.delta,!1):J.type===Us.pop&&bt(w,20)&&r.go(-1,!1)),S(te,b,w)}).catch(Ts)}))}let Se=vs(),he=vs(),de;function ge(V,Y,J){jt(V);const te=he.list();return te.length?te.forEach(_e=>_e(V,Y,J)):console.error(V),Promise.reject(V)}function vt(){return de&&i.value!==At?Promise.resolve():new Promise((V,Y)=>{Se.add([V,Y])})}function jt(V){return de||(de=!V,ee(),Se.list().forEach(([Y,J])=>V?J(V):Y()),Se.reset()),V}function lt(V,Y,J,te){const{scrollBehavior:_e}=e;if(!rs||!_e)return Promise.resolve();const b=!J&&Fd(Ar(V.fullPath,0))||(te||!J)&&history.state&&history.state.scroll||null;return pt().then(()=>_e(V,Y,b)).then(w=>w&&Bd(w)).catch(w=>ge(w,V,Y))}const Fe=V=>r.go(V);let es;const ts=new Set,Js={currentRoute:i,listening:!0,addRoute:x,removeRoute:C,clearRoutes:t.clearRoutes,hasRoute:E,getRoutes:I,resolve:M,options:e,push:R,replace:U,go:Fe,back:()=>Fe(-1),forward:()=>Fe(1),beforeEach:l.add,beforeResolve:c.add,afterEach:a.add,onError:he.add,isReady:vt,install(V){const Y=this;V.component("RouterLink",fu),V.component("RouterView",hu),V.config.globalProperties.$router=Y,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>z(i)}),rs&&!es&&i.value===At&&(es=!0,R(r.location).catch(_e=>{}));const J={};for(const _e in At)Object.defineProperty(J,_e,{get:()=>i.value[_e],enumerable:!0});V.provide(Eo,Y),V.provide(Nn,vl(J)),V.provide(pn,i);const te=V.unmount;ts.add(V),V.unmount=function(){ts.delete(V),ts.size<1&&(u=At,Q&&Q(),Q=null,i.value=At,es=!1,de=!1),te()}}};function Ke(V){return V.reduce((Y,J)=>Y.then(()=>k(J)),Promise.resolve())}return Js}function xu(e,t){const o=[],n=[],r=[],l=Math.max(t.matched.length,e.matched.length);for(let c=0;c<l;c++){const a=t.matched[c];a&&(e.matched.find(u=>ds(u,a))?n.push(a):o.push(a));const i=e.matched[c];i&&(t.matched.find(u=>ds(u,i))||r.push(i))}return[o,n,r]}function Ne(){return Ye(Eo)}function qs(e){return Ye(Nn)}function yu(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function bu(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function ys(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"})])}function Gr(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Mi(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function ho(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function Vn(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function Ko(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function mn(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function vo(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function _u(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function wu(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})])}function gn(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])}function Ti(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})])}function ku(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})])}function Pi(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}function ji(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Ln(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})])}function Un(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})])}function $u(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function Ii(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})])}function Cu(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function Su(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})])}function Ct(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}function Bn(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})])}function hn(e,t){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const Ws=Io("product",{state:()=>({products:[],loading:!1,error:null,legacyProducts:[{id:1,name:"入户门",price:1700,priceUnit:"起",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400",description:"高品质防盗门，多种材质和规格可选，安全性能优异",category:"入户门",features:["防盗","耐腐蚀","多种材质","可选配锁具"],variants:[{type:"锌合金子母门",material:"锌合金",price:3e3,priceUnit:"个",specifications:["子母门标准尺寸"],features:["防盗","耐腐蚀","送指纹锁","安全性高"],notes:"送指纹锁，如果无需默认指纹锁便宜300元"},{type:"锌合金单开门",material:"锌合金",price:2500,priceUnit:"个",specifications:["单开门标准尺寸"],features:["防盗","耐腐蚀","送指纹锁","经济实用"],notes:"送指纹锁，如果无需默认指纹锁便宜300元"},{type:"铝合金卡门板",material:"铝合金",price:1700,priceUnit:"平方米",specifications:["2cm厚度","超过规格按平方算"],features:["坚固","美观","默认普通锁","包边计算"],notes:"包边有量尺寸算平方米；默认普通锁，如果无需默认普通锁便宜200元"}]},{id:2,name:"房间门",price:1e3,priceUnit:"起",image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400",description:"多种材质房间门，适用于各类室内空间",category:"房间门",features:["多种材质","美观","耐用","易安装"],variants:[{type:"免漆木门",material:"免漆木材",price:1e3,priceUnit:"个",specifications:["标准房间门尺寸"],features:["环保","免漆","经济实用","易安装"]},{type:"烤漆木门",material:"烤漆木材",price:1300,priceUnit:"个",specifications:["标准房间门尺寸"],features:["高档","烤漆工艺","光滑美观","耐磨"]},{type:"铝木门",material:"铝木复合",price:1400,priceUnit:"个",specifications:["标准房间门尺寸"],features:["复合材料","坚固","美观","隔音"]},{type:"全铝门",material:"全铝",price:1500,priceUnit:"个",specifications:["标准房间门尺寸"],features:["防潮","防腐","耐用","轻量"]}]},{id:3,name:"卫生间门",price:700,priceUnit:"起",image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400",description:"卫生间专用门，防潮防水，密封性好",category:"卫生间门",features:["防潮","防水","易清洁","密封性好"],variants:[{type:"单包设计",material:"防潮材料",price:700,priceUnit:"个",specifications:["单包设计"],features:["防潮","防水","经济型","易清洁"]},{type:"双包设计",material:"防潮材料",price:1e3,priceUnit:"个",specifications:["双包设计"],features:["防潮","防水","密封性好","高档"]}]},{id:4,name:"厨房推拉门",price:600,priceUnit:"起",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400",description:"厨房专用推拉门，视野开阔，滑动顺畅",category:"厨房推拉门",features:["滑动顺畅","视野开阔","现代简约","铝合金材质"],variants:[{type:"标准框 4.5cm",material:"铝合金",price:600,priceUnit:"平方米",specifications:["4.5cm宽框"],features:["标准边框","经济实用","坚固耐用","易安装"]},{type:"极窄框 1.0cm",material:"铝合金",price:630,priceUnit:"平方米",specifications:["1.0cm极窄框"],features:["极窄边框","视野开阔","现代简约","滑动顺畅"]}]},{id:5,name:"阳台推拉门",price:900,priceUnit:"起",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400",description:"重型阳台推拉门，2.0cm厚材料，坚固耐用",category:"阳台推拉门",features:["重型材料","坚固耐用","多色可选","可配纱窗"],colors:["黑色","咖啡色","灰色"],variants:[{type:"两轨设计",material:"重型铝合金",price:900,priceUnit:"平方米",specifications:["两轨设计","2.0cm厚材料"],features:["重型材料","两轨","无纱窗","简约"],notes:"可以做吊轨，但是吊轨容易出问题"},{type:"三轨设计",material:"重型铝合金",price:1100,priceUnit:"平方米",specifications:["三轨设计","2.0cm厚材料"],features:["重型材料","三轨","配纱窗","坚固"],notes:"可以做吊轨，但是吊轨容易出问题"}]},{id:6,name:"折叠门",price:500,priceUnit:"平方米",image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400",description:"多功能折叠门，节省空间，灵活便利",category:"折叠门",material:"铝合金",specifications:["可折叠设计"],features:["节省空间","灵活便利","多功能","现代设计"]},{id:7,name:"推拉窗",price:260,priceUnit:"起",image:"https://images.unsplash.com/photo-1560185893-a55cbc8c57e8?w=400",description:"铝合金推拉窗，多种配置可选，经济实用",category:"推拉窗",features:["多种配置","经济实用","多色可选","钢化玻璃"],colors:["黑色","咖啡色","白色","灰色"],variants:[{type:"标配版",material:"铝合金",price:260,priceUnit:"平方米",specifications:["单轮单层","白色透明玻璃","不满2平方按2平方算"],features:["经济实用","标配","钢化玻璃不加钱","多色可选"],notes:"换颜色要镀膜+10元/平方；不满2平方按2平方算，520/个"},{type:"选配版",material:"铝合金",price:350,priceUnit:"平方米",specifications:["双轮双层","钢化中空玻璃","不满2平方按2平方算"],features:["隔音隔热","安全钢化","双层玻璃","中空设计"],notes:"换颜色要镀膜+10元/平方；中空好处：隔音隔热；钢化玻璃安全性更好"}]},{id:8,name:"平开窗",price:350,priceUnit:"平方米",image:"https://images.unsplash.com/photo-1560185893-a55cbc8c57e8?w=400",description:"铝合金平开窗，可定制设计，灵活开启",category:"平开窗",material:"铝合金",specifications:["可出设计图","开扇价格550/扇"],features:["定制设计","灵活开启","多色可选","节能"],colors:["黑色","咖啡色","白色","灰色"],notes:"基础价格为（固定价+350）*平方+开扇价格（550/扇，满3平方可以送一扇）"},{id:9,name:"纱窗",price:150,priceUnit:"起",image:"https://images.unsplash.com/photo-1560185893-a55cbc8c57e8?w=400",description:"铝合金外壳+不锈钢纱网，防蚊虫透气",category:"纱窗",features:["铝合金外壳","不锈钢纱网","防蚊虫","透气"],variants:[{type:"小片纱窗",material:"铝合金+不锈钢",price:150,priceUnit:"个",specifications:["小片设计","适用于窗户"],features:["铝合金外壳","不锈钢纱网","防蚊虫","透气"],notes:"10个以上可以便宜140/个"},{type:"大片纱窗",material:"铝合金+不锈钢",price:300,priceUnit:"个",specifications:["大片设计","适用于推拉门"],features:["铝合金外壳","不锈钢纱网","防蚊虫","透气"]}]},{id:10,name:"防盗栏",price:150,priceUnit:"平方米",image:"https://images.unsplash.com/photo-1560185893-a55cbc8c57e8?w=400",description:"安全防护栏，保护家庭安全",category:"防盗栏",material:"钢材",specifications:["标准防盗规格"],features:["安全防护","坚固耐用","防盗","美观"]},{id:11,name:"瓷膏",price:100,priceUnit:"起",image:"https://images.unsplash.com/photo-1560185893-a55cbc8c57e8?w=400",description:"门窗密封专用瓷膏，防水耐候",category:"瓷膏",features:["密封","防水","耐候","多规格"],variants:[{type:"3米长",material:"密封材料",price:100,priceUnit:"条",specifications:["3米长度"],features:["密封","防水","耐候","经济型"]},{type:"6米长",material:"密封材料",price:190,priceUnit:"条",specifications:["6米长度"],features:["密封","防水","耐候","长效"],priceRange:"180-200"}]}],categories:["门","窗户","其他配件"],categoryHierarchy:{门:{name:"门",icon:"🚪",subcategories:{入户门:{name:"入户门",materials:["锌合金材质","铝合金材质"]},房间门:{name:"房间门",materials:["免漆木门","烤漆木门","铝木门","全铝门"]},卫生间门:{name:"卫生间门",materials:["单包设计","双包设计"]},厨房推拉门:{name:"厨房推拉门",materials:["标准框设计","极窄框设计"]},阳台推拉门:{name:"阳台推拉门",materials:["两轨设计","三轨设计"]},折叠门:{name:"折叠门",materials:["标准规格"]}}},窗户:{name:"窗户",icon:"🪟",subcategories:{推拉窗:{name:"推拉窗",materials:["标配版","选配版"]},平开窗:{name:"平开窗",materials:["标准规格"]}}},其他配件:{name:"其他配件",icon:"🔧",subcategories:{纱窗:{name:"纱窗",materials:["小片规格","大片规格"]},防盗栏:{name:"防盗栏",materials:["标准规格"]},瓷膏:{name:"瓷膏",materials:["3米长","6米长"]}}}},categoryMapping:{门:["入户门","房间门","卫生间门","厨房推拉门","阳台推拉门","折叠门"],窗户:["推拉窗","平开窗"],其他配件:["纱窗","防盗栏","瓷膏"]},materialMapping:{锌合金子母门:"锌合金材质",锌合金单开门:"锌合金材质",铝合金卡门板:"铝合金材质",免漆木门:"免漆木门",烤漆木门:"烤漆木门",铝木门:"铝木门",全铝门:"全铝门",单包设计:"单包设计",双包设计:"双包设计","标准框 4.5cm":"标准框设计","极窄框 1.0cm":"极窄框设计",两轨设计:"两轨设计",三轨设计:"三轨设计",标配版:"标配版",选配版:"选配版",小片纱窗:"小片规格",大片纱窗:"大片规格","3米长":"3米长","6米长":"6米长"}}),getters:{getProductById:e=>t=>e.products.find(o=>o.id===parseInt(t)),getProductsByCategory:e=>t=>{if(!e.categoryMapping[t])return[];const o=e.categoryMapping[t];return e.products.filter(n=>o.includes(n.category))},getProductsBySubcategory:e=>t=>e.products.filter(o=>o.category===t),getProductsByMaterial:e=>(t,o)=>e.products.filter(r=>r.category===t).filter(r=>r.variants&&r.variants.length>0?r.variants.some(l=>e.materialMapping[l.type]===o):o==="标准规格"),getProductFrontendCategory:e=>t=>{for(const[o,n]of Object.entries(e.categoryMapping))if(n.includes(t.category))return o;return"其他配件"},getCategoryHierarchy:e=>e.categoryHierarchy,getSubcategories:e=>t=>{var o;return((o=e.categoryHierarchy[t])==null?void 0:o.subcategories)||{}},getMaterials:e=>(t,o)=>{var n,r;return((r=(n=e.categoryHierarchy[t])==null?void 0:n.subcategories[o])==null?void 0:r.materials)||[]},getSubcategoryProductCount:e=>t=>e.products.filter(o=>o.category===t).length,getMaterialProductCount:e=>(t,o)=>e.products.filter(r=>r.category===t).filter(r=>r.variants&&r.variants.length>0?r.variants.some(l=>e.materialMapping[l.type]===o):o==="标准规格").length},actions:{async fetchProducts(){this.loading=!0,this.error=null;try{const e=await fetch("/api/products");if(e.ok){const t=await e.json();this.products=t.data||[]}else throw new Error("获取产品数据失败")}catch(e){console.error("获取产品失败:",e),this.error=e.message,this.products=this.legacyProducts}finally{this.loading=!1}},async refreshProducts(){await this.fetchProducts()}}}),Gs=Io("cart",{state:()=>({items:[]}),getters:{cartTotal:e=>e.items.reduce((t,o)=>t+o.price*o.quantity,0),cartItemCount:e=>e.items.reduce((t,o)=>t+o.quantity,0)},actions:{addToCart(e){const{selectedColor:t,selectedVariant:o,quantity:n=1,...r}=e,l=this.items.find(c=>c.id===r.id&&c.selectedColor===t&&c.selectedVariant===o);l?l.quantity+=n:this.items.push({id:r.id,name:r.name,price:r.price,priceUnit:r.priceUnit||"个",image:r.image,category:r.category,material:r.material,selectedColor:t,selectedVariant:o,quantity:n,notes:r.notes})},removeFromCart(e,t=null,o=null){const n=this.items.findIndex(r=>r.id===e&&r.selectedColor===t&&r.selectedVariant===o);n>-1&&this.items.splice(n,1)},updateQuantity(e,t,o,n){const r=this.items.find(l=>l.id===e&&l.selectedColor===t&&l.selectedVariant===o);r&&(r.quantity=n,r.quantity<=0&&this.removeFromCart(e,t,o))},clearCart(){this.items=[]}}}),Mu=Io("order",{state:()=>({orders:[],currentOrder:null}),actions:{createOrder(e){const t={id:Date.now(),...e,status:"pending",createdAt:new Date().toISOString()};return this.orders.push(t),this.currentOrder=t,t},updateOrderStatus(e,t){const o=this.orders.find(n=>n.id===e);o&&(o.status=t,o.updatedAt=new Date().toISOString())}}}),Xt=Io("user",{state:()=>({user:null,isLoggedIn:!1,token:null}),getters:{getCurrentUser:e=>e.user,isUserLoggedIn:e=>e.isLoggedIn,userPhone:e=>{var t;return(t=e.user)==null?void 0:t.phone},userName:e=>{var t;return(t=e.user)==null?void 0:t.name},userToken:e=>e.token},actions:{async setUserInfo(e,t){return this.user=e,this.token=t,this.isLoggedIn=!0,localStorage.setItem("user_info",JSON.stringify(e)),localStorage.setItem("user_token",t),!0},async login(e){return this.user=e,this.isLoggedIn=!0,localStorage.setItem("user_info",JSON.stringify({...e,loginTime:new Date().toISOString()})),!0},async register(e){return this.user=e,this.isLoggedIn=!0,localStorage.setItem("user_info",JSON.stringify({...e,registerTime:new Date().toISOString(),loginTime:new Date().toISOString()})),!0},logout(){this.user=null,this.token=null,this.isLoggedIn=!1,localStorage.removeItem("user_info"),localStorage.removeItem("user_token")},checkLoginStatus(){const e=localStorage.getItem("user_info"),t=localStorage.getItem("user_token");if(e&&t)try{const o=JSON.parse(e);return this.user=o,this.token=t,this.isLoggedIn=!0,!0}catch(o){return console.error("解析用户信息失败:",o),this.logout(),!1}else if(e)try{const o=JSON.parse(e),n=new Date(o.loginTime);return(new Date-n)/(1e3*60*60*24)<7?(this.user=o,this.isLoggedIn=!0,!0):(this.logout(),!1)}catch(o){return console.error("解析用户信息失败:",o),this.logout(),!1}return!1},updateUser(e){this.user&&(this.user={...this.user,...e},localStorage.setItem("user_info",JSON.stringify(this.user)))},getUserForOrder(){return this.isLoggedIn&&this.user?{customerName:this.user.name,customerPhone:this.user.phone}:null}}}),tt=(e,t)=>{const o=e.__vccOpts||e;for(const[n,r]of t)o[n]=r;return o},Tu={class:"card hover:shadow-lg transition-shadow duration-200"},Pu={class:"aspect-w-16 aspect-h-9 bg-gray-200 relative"},ju=["src","alt"],Iu={key:1,class:"w-full h-48 bg-gray-100 flex items-center justify-center"},Au={class:"p-6"},Eu={class:"flex items-start justify-between mb-2"},Ou={class:"text-lg font-semibold text-secondary-900"},Ru={class:"text-sm bg-primary-100 text-primary-800 px-2 py-1 rounded"},Nu={class:"text-secondary-600 text-sm mb-3 line-clamp-2"},Vu={key:0,class:"mb-3"},Lu={class:"text-xs text-secondary-500"},Uu={class:"flex flex-wrap gap-1 mt-1"},Bu={key:0,class:"text-xs text-secondary-500"},Du={key:1,class:"mb-3"},Fu={class:"text-sm font-medium text-secondary-700"},Hu={key:2,class:"mb-3"},zu={class:"flex flex-wrap gap-1"},qu={key:0,class:"text-xs text-gray-500"},Wu={key:3,class:"mb-3"},Gu={class:"flex flex-wrap gap-1"},Ju={key:4,class:"mb-4"},Ku={class:"flex flex-wrap gap-1"},Zu={key:0,class:"text-xs text-secondary-500"},Qu={key:5,class:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded"},Yu={class:"text-xs text-yellow-700"},Xu={class:"flex items-center justify-between"},e0={class:"text-2xl font-bold text-primary-600"},t0={class:"text-sm text-secondary-500 font-normal"},s0={key:0,class:"text-xs text-secondary-400"},o0={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(e){const t=e,o=Ne(),n=Gs();Ws();const r=u=>u?(u.startsWith("http://")||u.startsWith("https://")||u.startsWith("/uploads/"),u):"",l=u=>{const d=t.product.image;if(console.log("产品图片加载失败，尝试直接访问后端:",d),d&&d.startsWith("/uploads/")&&!u.target.dataset.retried){const f=`http://localhost:3000${d}`;u.target.src=f,u.target.dataset.retried="true",console.log("切换到直接访问:",f)}else u.target.style.display="none"},c=u=>({入户门:"门",房间门:"门",卫生间门:"门",厨房推拉门:"门",阳台推拉门:"门",折叠门:"门",推拉窗:"窗户",平开窗:"窗户",纱窗:"其他配件",防盗栏:"其他配件",瓷膏:"其他配件"})[u]||"其他配件",a=()=>{o.push({name:"ProductDetail",params:{id:t.product.id}})},i=()=>{if(t.product.variants&&t.product.variants.length>0){a();return}if(t.product.colors&&t.product.colors.length>0){a();return}const u={id:t.product.id,name:t.product.name,price:t.product.price,priceUnit:t.product.priceUnit||"个",image:t.product.image,category:t.product.category,material:t.product.material,selectedColor:null,selectedVariant:null,quantity:1,notes:t.product.notes};n.addToCart(u),alert("已添加到购物车")};return(u,d)=>(m(),g("div",Tu,[s("div",Pu,[e.product.image?(m(),g("img",{key:0,src:r(e.product.image),alt:e.product.name,class:"w-full h-48 object-cover",onError:l},null,40,ju)):(m(),g("div",Iu,d[0]||(d[0]=[s("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),s("div",Au,[s("div",Eu,[s("h3",Ou,h(e.product.name),1),s("span",Ru,h(c(e.product.category)),1)]),s("p",Nu,h(e.product.description),1),e.product.variants&&e.product.variants.length?(m(),g("div",Vu,[s("span",Lu,h(e.product.variants.length)+"种类型可选：",1),s("div",Uu,[(m(!0),g(se,null,ae(e.product.variants.slice(0,2),f=>(m(),g("span",{key:f.type,class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded"},h(f.type),1))),128)),e.product.variants.length>2?(m(),g("span",Bu," +"+h(e.product.variants.length-2)+"种 ",1)):O("",!0)])])):e.product.material?(m(),g("div",Du,[d[1]||(d[1]=s("span",{class:"text-xs text-secondary-500"},"材料：",-1)),s("span",Fu,h(e.product.material),1)])):O("",!0),!e.product.variants&&e.product.specifications&&e.product.specifications.length?(m(),g("div",Hu,[s("div",zu,[(m(!0),g(se,null,ae(e.product.specifications.slice(0,2),f=>(m(),g("span",{key:f,class:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded"},h(f),1))),128)),e.product.specifications.length>2?(m(),g("span",qu," +"+h(e.product.specifications.length-2)+"项 ",1)):O("",!0)])])):O("",!0),e.product.colors&&e.product.colors.length?(m(),g("div",Wu,[d[2]||(d[2]=s("span",{class:"text-xs text-secondary-500 block mb-1"},"可选颜色：",-1)),s("div",Gu,[(m(!0),g(se,null,ae(e.product.colors,f=>(m(),g("span",{key:f,class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded"},h(f),1))),128))])])):O("",!0),e.product.features&&e.product.features.length?(m(),g("div",Ju,[s("div",Ku,[(m(!0),g(se,null,ae(e.product.features.slice(0,3),f=>(m(),g("span",{key:f,class:"text-xs bg-secondary-100 text-secondary-700 px-2 py-1 rounded"},h(f),1))),128)),e.product.features.length>3?(m(),g("span",Zu," +"+h(e.product.features.length-3)+"项 ",1)):O("",!0)])])):O("",!0),!e.product.variants&&e.product.notes?(m(),g("div",Qu,[s("span",Yu,"💡 "+h(e.product.notes),1)])):O("",!0),s("div",Xu,[s("div",e0,[Z(" ¥"+h(e.product.price)+" ",1),s("span",t0,"/"+h(e.product.priceUnit||"个"),1),e.product.priceRange?(m(),g("div",s0," ("+h(e.product.priceRange)+") ",1)):O("",!0)]),s("div",{class:"flex space-x-2"},[s("button",{onClick:a,class:"btn-secondary text-sm py-1 px-3"}," 查看详情 "),s("button",{onClick:i,class:"btn-primary text-sm py-1 px-3"}," 加入购物车 ")])])])]))}},Ai=tt(o0,[["__scopeId","data-v-7cce74a4"]]),n0={class:"category-hierarchy"},r0={class:"flex flex-wrap justify-center gap-4 mb-8"},l0={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},i0=["onClick"],a0={class:"flex items-center"},c0={class:"text-2xl mr-3"},d0={class:"font-semibold text-lg"},u0={class:"ml-2 text-sm text-gray-500"},f0={class:"border-t border-gray-100"},p0=["onClick"],m0={class:"font-medium"},g0={class:"flex items-center space-x-2"},h0={class:"text-sm text-gray-500"},v0={class:"bg-gray-50 border-t border-gray-100"},x0=["onClick"],y0={class:"text-xs text-gray-500"},b0={key:0,class:"bg-blue-50 rounded-lg p-4 mb-6"},_0={class:"flex items-center justify-between"},w0={class:"flex items-center space-x-2"},k0={class:"flex items-center space-x-2 text-blue-700"},$0={key:0},C0={key:2},S0={key:4,class:"font-semibold"},M0={__name:"CategoryHierarchy",props:{selectedFilter:{type:Object,default:()=>({primaryCategory:null,subcategory:null,material:null})}},emits:["filter-change"],setup(e,{emit:t}){const o=e,n=t,r=Ws(),l=B([]),c=B([]),a=B(null),i=B(null),u=B(null),d=fe(()=>r.getCategoryHierarchy),f=j=>r.getProductsByCategory(j),p=j=>r.getSubcategoryProductCount(j),x=(j,R)=>r.getMaterialProductCount(j,R),C=j=>{l.value.includes(j)?l.value=l.value.filter(R=>R!==j):l.value.push(j),a.value=j,i.value=null,u.value=null,c.value=[],$()},I=(j,R)=>{c.value.includes(R)?c.value=c.value.filter(U=>U!==R):c.value.push(R),a.value=j,i.value=R,u.value=null,$()},E=(j,R,U)=>{a.value=j,i.value=R,u.value=U,$()},M=()=>{a.value=null,i.value=null,u.value=null,l.value=[],c.value=[],$()},$=()=>{n("filter-change",{primaryCategory:a.value,subcategory:i.value,material:u.value})};return ot(()=>o.selectedFilter,j=>{j&&(a.value=j.primaryCategory,i.value=j.subcategory,u.value=j.material,j.primaryCategory&&(l.value.includes(j.primaryCategory)||l.value.push(j.primaryCategory)),j.subcategory&&(c.value.includes(j.subcategory)||c.value.push(j.subcategory)))},{immediate:!0,deep:!0}),ot(()=>r.products,()=>{},{immediate:!0}),(j,R)=>(m(),g("div",n0,[R[1]||(R[1]=s("div",{class:"text-center mb-8"},[s("h2",{class:"text-3xl font-bold text-secondary-900 mb-4"},"产品分类"),s("p",{class:"text-secondary-600"},"按分类和材质精确筛选您需要的产品")],-1)),s("div",r0,[s("button",{onClick:M,class:ie(["px-6 py-2 rounded-full transition-colors",!a.value&&!i.value&&!u.value?"bg-primary-600 text-white":"bg-white text-secondary-700 hover:bg-primary-50 border border-gray-200"])}," 全部产品 ",2)]),s("div",l0,[(m(!0),g(se,null,ae(d.value,(U,A)=>(m(),g("div",{key:A,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},[s("div",{onClick:y=>C(A),class:ie(["p-4 cursor-pointer transition-colors flex items-center justify-between",a.value===A?"bg-primary-100 border-b border-primary-200":"hover:bg-gray-50"])},[s("div",a0,[s("span",c0,h(U.icon),1),s("span",d0,h(U.name),1),s("span",u0," ("+h(f(A).length)+") ",1)]),F(z(ho),{class:ie(["w-5 h-5 text-gray-400 transition-transform",l.value.includes(A)?"rotate-180":""])},null,8,["class"])],10,i0),X(s("div",f0,[(m(!0),g(se,null,ae(U.subcategories,(y,_)=>(m(),g("div",{key:_,class:"border-b border-gray-50 last:border-b-0"},[s("div",{onClick:k=>I(A,_),class:ie(["px-4 py-3 cursor-pointer transition-colors flex items-center justify-between",i.value===_?"bg-blue-50 text-blue-700":"hover:bg-gray-50"])},[s("span",m0,h(y.name),1),s("div",g0,[s("span",h0," ("+h(p(_))+") ",1),F(z(Ko),{class:ie(["w-4 h-4 text-gray-400 transition-transform",c.value.includes(_)?"rotate-90":""])},null,8,["class"])])],10,p0),X(s("div",v0,[(m(!0),g(se,null,ae(y.materials,k=>(m(),g("div",{key:k,onClick:v=>E(A,_,k),class:ie(["px-8 py-2 cursor-pointer transition-colors flex items-center justify-between text-sm",u.value===k&&i.value===_?"bg-green-100 text-green-700 font-medium":"hover:bg-gray-100 text-gray-600"])},[s("span",null,h(k),1),s("span",y0," ("+h(x(_,k))+") ",1)],10,x0))),128))],512),[[Vs,c.value.includes(_)]])]))),128))],512),[[Vs,l.value.includes(A)]])]))),128))]),a.value||i.value||u.value?(m(),g("div",b0,[s("div",_0,[s("div",w0,[F(z(_u),{class:"w-5 h-5 text-blue-600"}),R[0]||(R[0]=s("span",{class:"text-blue-800 font-medium"},"当前筛选：",-1)),s("div",k0,[a.value?(m(),g("span",$0,h(a.value),1)):O("",!0),a.value&&i.value?(m(),Pe(z(Ko),{key:1,class:"w-4 h-4"})):O("",!0),i.value?(m(),g("span",C0,h(i.value),1)):O("",!0),i.value&&u.value?(m(),Pe(z(Ko),{key:3,class:"w-4 h-4"})):O("",!0),u.value?(m(),g("span",S0,h(u.value),1)):O("",!0)])]),s("button",{onClick:M,class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," 清除筛选 ")])])):O("",!0)]))}},T0=tt(M0,[["__scopeId","data-v-55df0723"]]),P0={class:"py-16"},j0={class:"container mx-auto px-4"},I0={class:"grid grid-cols-1 md:grid-cols-3 gap-8"},A0={class:"text-center"},E0={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},O0={class:"text-center"},R0={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},N0={class:"text-center"},V0={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},L0={class:"py-16 bg-gray-50"},U0={class:"container mx-auto px-4"},B0={class:"container mx-auto px-4"},D0={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},F0={key:0,class:"text-center py-12"},H0={__name:"Home",setup(e){const t=qs(),o=Ne(),n=Ws(),r=B(null),l=B({primaryCategory:null,subcategory:null,material:null}),c=fe(()=>n.products),a=fe(()=>{const p=l.value;return!p.primaryCategory&&!p.subcategory&&!p.material?c.value:p.primaryCategory&&!p.subcategory&&!p.material?n.getProductsByCategory(p.primaryCategory):p.subcategory&&!p.material?n.getProductsBySubcategory(p.subcategory):p.subcategory&&p.material?n.getProductsByMaterial(p.subcategory,p.material):c.value}),i=p=>{l.value=p;const x={};p.primaryCategory&&(x.primaryCategory=p.primaryCategory),p.subcategory&&(x.subcategory=p.subcategory),p.material&&(x.material=p.material),o.replace({query:x}),setTimeout(()=>{u()},100)},u=()=>{var p;(p=r.value)==null||p.scrollIntoView({behavior:"smooth"})},d=()=>{o.push("/chat")};De(async()=>{await n.fetchProducts(),f()}),ot(()=>t.query,p=>{f()},{deep:!0});const f=()=>{const p=t.query;p.primaryCategory||p.subcategory||p.material?(l.value={primaryCategory:p.primaryCategory||null,subcategory:p.subcategory||null,material:p.material||null},setTimeout(()=>{u()},100)):l.value={primaryCategory:null,subcategory:null,material:null}};return(p,x)=>(m(),g("div",null,[s("section",{class:"bg-gradient-to-r from-primary-600 to-primary-800 text-white"},[s("div",{class:"container mx-auto px-4 py-16"},[s("div",{class:"max-w-3xl"},[x[0]||(x[0]=s("h1",{class:"text-4xl md:text-6xl font-bold mb-6"},[Z(" 专业门窗 "),s("br"),s("span",{class:"text-primary-200"},"品质生活")],-1)),x[1]||(x[1]=s("p",{class:"text-xl md:text-2xl text-primary-100 mb-8"}," 宝得利门窗，为您打造舒适安全的家居环境 ",-1)),s("div",{class:"flex flex-col sm:flex-row gap-4"},[s("button",{onClick:u,class:"bg-white text-primary-600 px-8 py-3 rounded-lg font-semibold hover:bg-primary-50 transition-colors"}," 浏览产品 "),s("button",{onClick:d,class:"border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-primary-600 transition-colors"}," 联系我们 ")])])])]),s("section",P0,[s("div",j0,[x[8]||(x[8]=s("div",{class:"text-center mb-12"},[s("h2",{class:"text-3xl font-bold text-secondary-900 mb-4"},"为什么选择宝得利？"),s("p",{class:"text-secondary-600 max-w-2xl mx-auto"}," 我们专注于门窗制造多年，致力于为客户提供最优质的产品和服务 ")],-1)),s("div",I0,[s("div",A0,[s("div",E0,[F(z(Ln),{class:"w-8 h-8 text-primary-600"})]),x[2]||(x[2]=s("h3",{class:"text-xl font-semibold mb-2"},"品质保证",-1)),x[3]||(x[3]=s("p",{class:"text-secondary-600"},"严格的质量控制，确保每一扇门窗都符合最高标准",-1))]),s("div",O0,[s("div",R0,[F(z(Bn),{class:"w-8 h-8 text-primary-600"})]),x[4]||(x[4]=s("h3",{class:"text-xl font-semibold mb-2"},"专业安装",-1)),x[5]||(x[5]=s("p",{class:"text-secondary-600"},"经验丰富的安装团队，提供专业的安装服务",-1))]),s("div",N0,[s("div",V0,[F(z(wu),{class:"w-8 h-8 text-primary-600"})]),x[6]||(x[6]=s("h3",{class:"text-xl font-semibold mb-2"},"贴心服务",-1)),x[7]||(x[7]=s("p",{class:"text-secondary-600"},"从咨询到售后，全程贴心服务，让您无忧选购",-1))])])])]),s("section",L0,[s("div",U0,[F(T0,{onFilterChange:i,"selected-filter":l.value},null,8,["selected-filter"])])]),s("section",{ref_key:"productsSection",ref:r,"data-products-section":"",class:"py-16"},[s("div",B0,[x[10]||(x[10]=s("div",{class:"text-center mb-12"},[s("h2",{class:"text-3xl font-bold text-secondary-900 mb-4"},"热门产品"),s("p",{class:"text-secondary-600"},"精选优质门窗产品，为您的家居增添美感")],-1)),s("div",D0,[(m(!0),g(se,null,ae(a.value,C=>(m(),Pe(Ai,{key:C.id,product:C},null,8,["product"]))),128))]),a.value.length===0?(m(),g("div",F0,x[9]||(x[9]=[s("p",{class:"text-secondary-500"},"暂无相关产品",-1)]))):O("",!0)])],512)]))}},z0={key:0,class:"container mx-auto px-4 py-8"},q0={class:"flex mb-8 text-sm sticky top-20 bg-white z-10 py-4 border-b border-gray-100"},W0={class:"text-secondary-600"},G0={class:"text-secondary-900"},J0={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16"},K0={class:"space-y-4 sticky top-32 self-start"},Z0={class:"aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden"},Q0=["src","alt"],Y0={class:"grid grid-cols-4 gap-4"},X0=["src","alt"],ef={class:"space-y-6"},tf={class:"flex items-center gap-3 mb-2"},sf={class:"text-3xl font-bold text-secondary-900"},of={class:"bg-primary-100 text-primary-800 px-3 py-1 rounded-full text-sm"},nf={class:"text-secondary-600"},rf={key:0},lf={class:"flex flex-wrap gap-2 mb-4"},af=["onClick"],cf={key:0,class:"bg-gray-50 rounded-lg p-4 mb-4"},df={class:"flex justify-between items-start"},uf={class:"font-medium text-gray-900 mb-1"},ff={class:"text-sm text-gray-600 mb-2"},pf={class:"flex flex-wrap gap-1"},mf={class:"text-right"},gf={class:"text-lg font-bold text-orange-600"},hf={class:"text-sm text-gray-500"},vf={key:0,class:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-700"},xf={key:1},yf={class:"bg-gray-50 rounded-lg p-4"},bf={class:"text-secondary-700 font-medium"},_f={key:2},wf={class:"flex flex-wrap gap-2"},kf={key:3},$f={class:"flex flex-wrap gap-2"},Cf=["onClick"],Sf={class:"flex items-center justify-center gap-2"},Mf={key:0,class:"absolute -top-1 -right-1 w-4 h-4 bg-orange-500 rounded-full flex items-center justify-center"},Tf={key:4},Pf={class:"flex flex-wrap gap-2"},jf=["onClick"],If={class:"bg-white border border-gray-200 rounded-lg p-6 sticky top-32 shadow-lg"},Af={class:"mb-6"},Ef={class:"flex items-baseline gap-2 mb-2"},Of={class:"text-4xl font-bold text-red-600"},Rf={class:"text-gray-500 text-lg"},Nf={key:0,class:"text-sm text-gray-400 ml-2"},Vf={key:0,class:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"},Lf={class:"text-sm text-blue-700 space-y-1"},Uf={key:0},Bf={key:1},Df={key:2},Ff={class:"mb-6"},Hf={class:"flex items-center gap-4"},zf={class:"flex items-center border border-gray-300 rounded-lg"},qf={class:"text-right flex-1"},Wf={class:"text-xl font-bold text-red-600"},Gf={class:"space-y-3"},Jf={class:"mt-6 pt-6 border-t border-gray-200"},Kf={class:"space-y-3 text-sm text-gray-600"},Zf={class:"flex items-center gap-2"},Qf={class:"flex items-center gap-2"},Yf={class:"flex items-center gap-2"},Xf={class:"mt-16"},ep={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6"},tp={key:1,class:"container mx-auto px-4 py-16 text-center"},sp={__name:"ProductDetail",props:{id:{type:String,required:!0}},setup(e){const t=e;qs();const o=Ne(),n=Ws(),r=Gs(),l=B(1),c=B(""),a=B(""),i=B(null),u=fe(()=>n.getProductById(t.id)),d=fe(()=>u.value?n.getProductsByCategory(u.value.category).filter(y=>y.id!==u.value.id).slice(0,4):[]),f=fe(()=>{var y;return i.value?i.value.price:((y=u.value)==null?void 0:y.price)||0}),p=fe(()=>{var y;return i.value?i.value.priceUnit||"个":((y=u.value)==null?void 0:y.priceUnit)||"个"}),x=fe(()=>{var y;return i.value?i.value.priceRange||null:((y=u.value)==null?void 0:y.priceRange)||null}),C=fe(()=>{var y;return i.value?i.value.features||[]:((y=u.value)==null?void 0:y.features)||[]}),I=fe(()=>{var y;return i.value?i.value.specifications||[]:((y=u.value)==null?void 0:y.specifications)||[]}),E=fe(()=>{var y;return i.value?i.value.notes||null:((y=u.value)==null?void 0:y.notes)||null}),M=fe(()=>f.value*l.value),$=y=>({白色:"bg-white",黑色:"bg-black",灰色:"bg-gray-500",深灰:"bg-gray-700",浅灰:"bg-gray-300",咖啡色:"bg-amber-800",棕色:"bg-yellow-800",深棕:"bg-yellow-900",木色:"bg-yellow-600",原木色:"bg-amber-600",红色:"bg-red-500",绿色:"bg-green-500",蓝色:"bg-blue-500",金色:"bg-yellow-400",银色:"bg-gray-400"})[y]||"bg-gray-400",j=()=>{l.value+=1},R=()=>{l.value>1&&(l.value-=1)},U=()=>{if(!u.value){alert("产品信息不存在");return}if(u.value.variants&&u.value.variants.length>0&&!i.value){alert("请选择产品类型");return}if(u.value.colors&&u.value.colors.length>0&&!a.value){alert("请选择颜色");return}if(I.value&&I.value.length>0&&!c.value){alert("请选择规格");return}const y={id:u.value.id,name:[u.value.name,i.value?i.value.type:null,a.value?a.value:null,c.value?c.value:null].filter(Boolean).join(" - "),price:f.value,priceUnit:p.value,image:u.value.image,category:u.value.category,material:i.value?i.value.material:u.value.material,selectedColor:a.value||null,selectedVariant:i.value?i.value.type:null,selectedSpecification:c.value||null,quantity:l.value,notes:E.value};r.addToCart(y),alert("已添加到购物车")},A=()=>{if(!u.value){alert("产品信息不存在");return}if(u.value.variants&&u.value.variants.length>0&&!i.value){alert("请选择产品类型");return}if(u.value.colors&&u.value.colors.length>0&&!a.value){alert("请选择颜色");return}if(I.value&&I.value.length>0&&!c.value){alert("请选择规格");return}U(),o.push("/cart")};return De(()=>{u.value&&(u.value.variants&&u.value.variants.length>0&&(i.value=u.value.variants[0]),u.value.colors&&u.value.colors.length>0&&(a.value=u.value.colors[0]),I.value&&I.value.length>0?c.value=I.value[0]:u.value.specifications&&u.value.specifications.length>0&&(c.value=u.value.specifications[0]))}),(y,_)=>{const k=qe("router-link");return u.value?(m(),g("div",z0,[s("nav",q0,[F(k,{to:"/",class:"text-primary-600 hover:text-primary-700"},{default:ye(()=>_[1]||(_[1]=[Z("首页")])),_:1,__:[1]}),_[2]||(_[2]=s("span",{class:"mx-2 text-secondary-400"},"/",-1)),s("span",W0,h(u.value.category),1),_[3]||(_[3]=s("span",{class:"mx-2 text-secondary-400"},"/",-1)),s("span",G0,h(u.value.name),1)]),s("div",J0,[s("div",K0,[s("div",Z0,[s("img",{src:u.value.image,alt:u.value.name,class:"w-full h-[500px] object-cover rounded-lg"},null,8,Q0)]),s("div",Y0,[(m(),g(se,null,ae(4,v=>s("div",{key:v,class:"aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden cursor-pointer hover:opacity-75 transition-opacity"},[s("img",{src:u.value.image,alt:`${u.value.name} ${v}`,class:"w-full h-20 object-cover rounded-lg"},null,8,X0)])),64))])]),s("div",ef,[s("div",null,[s("div",tf,[s("h1",sf,h(u.value.name),1),s("span",of,h(u.value.category),1)]),s("p",nf,h(u.value.description),1)]),u.value.variants&&u.value.variants.length?(m(),g("div",rf,[_[4]||(_[4]=s("h3",{class:"text-lg font-semibold mb-3"},"产品类型",-1)),s("div",lf,[(m(!0),g(se,null,ae(u.value.variants,v=>{var S;return m(),g("button",{key:v.type,onClick:P=>i.value=v,class:ie(["border-2 rounded-md px-3 py-2 text-sm font-medium transition-all duration-200 hover:shadow-sm",((S=i.value)==null?void 0:S.type)===v.type?"border-orange-500 bg-orange-50 text-orange-700 shadow-sm":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"])},h(v.type),11,af)}),128))]),i.value?(m(),g("div",cf,[s("div",df,[s("div",null,[s("h4",uf,h(i.value.type),1),s("p",ff,h(i.value.material),1),s("div",pf,[(m(!0),g(se,null,ae(i.value.features.slice(0,3),v=>(m(),g("span",{key:v,class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded"},h(v),1))),128))])]),s("div",mf,[s("span",gf,"¥"+h(i.value.price),1),s("span",hf,"/"+h(i.value.priceUnit),1)])]),i.value.notes?(m(),g("div",vf," 💡 "+h(i.value.notes),1)):O("",!0)])):O("",!0)])):u.value.material?(m(),g("div",xf,[_[5]||(_[5]=s("h3",{class:"text-lg font-semibold mb-3"},"材料",-1)),s("div",yf,[s("span",bf,h(u.value.material),1)])])):O("",!0),C.value&&C.value.length?(m(),g("div",_f,[_[6]||(_[6]=s("h3",{class:"text-lg font-semibold mb-3"},"产品特点",-1)),s("div",wf,[(m(!0),g(se,null,ae(C.value,v=>(m(),g("span",{key:v,class:"bg-secondary-100 text-secondary-700 px-3 py-1 rounded-full text-sm"},h(v),1))),128))])])):O("",!0),u.value.colors&&u.value.colors.length?(m(),g("div",kf,[_[8]||(_[8]=s("h3",{class:"text-lg font-semibold mb-3"},"颜色选择",-1)),s("div",$f,[(m(!0),g(se,null,ae(u.value.colors,v=>(m(),g("button",{key:v,onClick:S=>a.value=v,class:ie(["relative border-2 rounded-md px-3 py-2 text-sm font-medium transition-all duration-200 hover:shadow-sm min-w-[80px]",a.value===v?"border-orange-500 bg-orange-50 text-orange-700 shadow-sm":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"])},[s("span",Sf,[s("span",{class:ie(["w-3 h-3 rounded-full border border-gray-300",$(v)])},null,2),Z(" "+h(v),1)]),a.value===v?(m(),g("div",Mf,_[7]||(_[7]=[s("svg",{class:"w-2.5 h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))):O("",!0)],10,Cf))),128))])])):O("",!0),I.value&&I.value.length?(m(),g("div",Tf,[_[9]||(_[9]=s("h3",{class:"text-lg font-semibold mb-3"},"规格选择",-1)),s("div",Pf,[(m(!0),g(se,null,ae(I.value,v=>(m(),g("button",{key:v,onClick:S=>c.value=v,class:ie(["border-2 rounded-md px-3 py-2 text-sm font-medium transition-all duration-200 hover:shadow-sm",c.value===v?"border-orange-500 bg-orange-50 text-orange-700 shadow-sm":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"])},h(v),11,jf))),128))])])):O("",!0),s("div",If,[s("div",Af,[s("div",Ef,[s("span",Of,"¥"+h(f.value),1),s("span",Rf,"/"+h(p.value),1),x.value?(m(),g("div",Nf," ("+h(x.value)+") ",1)):O("",!0)]),_[10]||(_[10]=s("div",{class:"text-sm text-gray-600"},[s("span",{class:"bg-red-100 text-red-700 px-2 py-1 rounded text-xs mr-2"},"特价"),Z(" 全场包邮，免费安装 ")],-1))]),i.value||a.value||c.value?(m(),g("div",Vf,[_[11]||(_[11]=s("h4",{class:"text-sm font-semibold text-blue-800 mb-2"},"已选择",-1)),s("div",Lf,[i.value?(m(),g("p",Uf,"类型: "+h(i.value.type)+" - "+h(i.value.material),1)):O("",!0),a.value?(m(),g("p",Bf,"颜色: "+h(a.value),1)):O("",!0),c.value?(m(),g("p",Df,"规格: "+h(c.value),1)):O("",!0)])])):O("",!0),s("div",Ff,[_[13]||(_[13]=s("div",{class:"flex items-center justify-between mb-3"},[s("label",{class:"text-sm font-medium text-gray-700"},"数量"),s("span",{class:"text-sm text-gray-500"},"有货 (限购2件)")],-1)),s("div",Hf,[s("div",zf,[s("button",{onClick:R,class:"px-4 py-2 hover:bg-gray-100 transition-colors border-r border-gray-300"},[F(z(Ti),{class:"w-4 h-4"})]),X(s("input",{"onUpdate:modelValue":_[0]||(_[0]=v=>l.value=v),type:"number",min:"1",max:"2",class:"w-16 text-center border-0 focus:ring-0 py-2"},null,512),[[le,l.value]]),s("button",{onClick:j,class:"px-4 py-2 hover:bg-gray-100 transition-colors border-l border-gray-300"},[F(z(ji),{class:"w-4 h-4"})])]),s("div",qf,[_[12]||(_[12]=s("div",{class:"text-sm text-gray-600"},"小计",-1)),s("div",Wf,"¥"+h(M.value.toFixed(2)),1)])])]),s("div",Gf,[s("button",{onClick:A,class:"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold py-4 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}," 立即购买 "),s("button",{onClick:U,class:"w-full bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-semibold py-4 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg"},[F(z(Un),{class:"w-5 h-5"}),_[14]||(_[14]=Z(" 加入购物车 "))])]),s("div",Jf,[s("div",Kf,[s("div",Zf,[F(z(Ii),{class:"w-4 h-4 text-green-600"}),_[15]||(_[15]=s("span",null,"免费配送到门",-1))]),s("div",Qf,[F(z(Ln),{class:"w-4 h-4 text-blue-600"}),_[16]||(_[16]=s("span",null,"质保3年，终身维护",-1))]),s("div",Yf,[F(z(Bn),{class:"w-4 h-4 text-purple-600"}),_[17]||(_[17]=s("span",null,"专业安装团队",-1))])])])])])]),s("div",Xf,[_[18]||(_[18]=s("h2",{class:"text-2xl font-bold text-secondary-900 mb-8"},"相关产品",-1)),s("div",ep,[(m(!0),g(se,null,ae(d.value,v=>(m(),Pe(Ai,{key:v.id,product:v},null,8,["product"]))),128))])])])):(m(),g("div",tp,[_[20]||(_[20]=s("h1",{class:"text-2xl font-bold text-secondary-900 mb-4"},"产品未找到",-1)),_[21]||(_[21]=s("p",{class:"text-secondary-600 mb-8"},"抱歉，您查找的产品不存在。",-1)),F(k,{to:"/",class:"btn-primary"},{default:ye(()=>_[19]||(_[19]=[Z(" 返回首页 ")])),_:1,__:[19]})]))}}},op=["disabled"],np={key:0,class:"absolute z-50 w-full mt-2 bg-white border border-secondary-200 rounded-lg shadow-lg max-h-60 overflow-auto"},rp={class:"py-1"},lp={key:0,class:"px-3 py-2 border-b border-secondary-100"},ip={class:"max-h-48 overflow-y-auto"},ap=["onClick"],cp={class:"block truncate"},dp={key:0,class:"px-4 py-3 text-sm text-secondary-500 text-center"},up={__name:"CustomSelect",props:{modelValue:{type:[String,Number],default:""},options:{type:Array,default:()=>[]},placeholder:{type:String,default:"请选择"},disabled:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const o=e,n=t,r=B(null),l=B(null),c=B(!1),a=B(""),i=fe(()=>{const x=o.options.find(C=>C.value===o.modelValue);return x?x.label:""}),u=fe(()=>!o.searchable||!a.value?o.options:o.options.filter(x=>x.label.toLowerCase().includes(a.value.toLowerCase()))),d=()=>{o.disabled||(c.value=!c.value,c.value&&o.searchable&&pt(()=>{var x;(x=l.value)==null||x.focus()}))},f=x=>{n("update:modelValue",x.value),c.value=!1,a.value=""},p=x=>{r.value&&!r.value.contains(x.target)&&(c.value=!1,a.value="")};return De(()=>{document.addEventListener("click",p)}),Hs(()=>{document.removeEventListener("click",p)}),ot(()=>o.modelValue,()=>{a.value=""}),(x,C)=>(m(),g("div",{class:"relative",ref_key:"selectWrapper",ref:r},[s("button",{onClick:d,class:ie(["w-full px-4 py-3 text-left bg-white border-2 rounded-lg transition-all duration-200 flex items-center justify-between",c.value?"border-primary-500 ring-2 ring-primary-200":"border-secondary-300 hover:border-secondary-400",e.disabled?"bg-gray-100 cursor-not-allowed":"cursor-pointer"]),disabled:e.disabled},[s("span",{class:ie(["block truncate",e.modelValue?"text-secondary-900":"text-secondary-500"])},h(i.value||e.placeholder),3),F(z(ho),{class:ie(["w-5 h-5 transition-transform duration-200",c.value?"transform rotate-180 text-primary-600":"text-secondary-400"])},null,8,["class"])],10,op),F(Rc,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:ye(()=>[c.value?(m(),g("div",np,[s("div",rp,[e.searchable?(m(),g("div",lp,[X(s("input",{ref_key:"searchInput",ref:l,"onUpdate:modelValue":C[0]||(C[0]=I=>a.value=I),type:"text",placeholder:"搜索区县...",class:"w-full px-3 py-2 text-sm border border-secondary-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[le,a.value]])])):O("",!0),s("div",ip,[(m(!0),g(se,null,ae(u.value,I=>(m(),g("button",{key:I.value,onClick:E=>f(I),class:ie(["w-full px-4 py-3 text-left hover:bg-primary-50 transition-colors duration-150 flex items-center justify-between",e.modelValue===I.value?"bg-primary-100 text-primary-900":"text-secondary-900"])},[s("span",cp,h(I.label),1),e.modelValue===I.value?(m(),Pe(z(Mi),{key:0,class:"w-5 h-5 text-primary-600"})):O("",!0)],10,ap))),128)),u.value.length===0?(m(),g("div",dp," 暂无匹配结果 ")):O("",!0)])])])):O("",!0)]),_:1})],512))}},fp=tt(up,[["__scopeId","data-v-7f09e4e5"]]),pp={class:"container mx-auto px-4 py-8"},mp={key:0,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},gp={class:"lg:col-span-2 space-y-6"},hp={class:"bg-white rounded-lg shadow-md p-6"},vp={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xp={key:0,class:"text-red-500 text-sm mt-1"},yp={class:"mt-4"},bp={class:"bg-white rounded-lg shadow-md p-6"},_p={class:"space-y-4"},wp={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},kp={class:"bg-white rounded-lg shadow-md p-6"},$p={class:"space-y-4"},Cp={class:"lg:col-span-1"},Sp={class:"bg-white rounded-lg shadow-md p-6 sticky top-24"},Mp={class:"space-y-4 mb-6"},Tp=["src","alt"],Pp={class:"flex-grow"},jp={class:"font-medium text-sm"},Ip={class:"text-xs text-secondary-600"},Ap={class:"text-xs"},Ep={class:"font-medium text-sm"},Op={key:0,class:"mb-6 p-4 bg-gray-50 rounded-lg"},Rp={class:"space-y-1 text-sm"},Np={key:0,class:"text-secondary-600"},Vp={key:1,class:"text-secondary-600"},Lp={key:2,class:"text-secondary-600"},Up={key:3,class:"text-secondary-600"},Bp={class:"space-y-3 mb-6"},Dp={class:"flex justify-between"},Fp={class:"border-t pt-3"},Hp={class:"flex justify-between text-lg font-semibold"},zp={class:"text-primary-600"},qp=["disabled"],Wp={key:1,class:"text-center py-16"},Gp={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Jp={class:"bg-white rounded-lg p-8 max-w-md mx-4"},Kp={class:"text-center"},Zp={class:"text-secondary-600 mb-4"},Qp={__name:"Order",setup(e){const t=Ne(),o=Gs(),n=Mu(),r=Xt(),l=B(!1),c=B(!1),a=B(""),i=B({customerName:"",customerPhone:"",wechatId:"",district:"",detailAddress:"",notes:""}),u=[{value:"玉屏街道",label:"🏙️ 玉屏街道"},{value:"龙山街道",label:"🏙️ 龙山街道"},{value:"龙江街道",label:"🏙️ 龙江街道"},{value:"宏路街道",label:"🏙️ 宏路街道"},{value:"石竹街道",label:"🏙️ 石竹街道"},{value:"音西街道",label:"🏙️ 音西街道"},{value:"阳下街道",label:"🏙️ 阳下街道"},{value:"海口镇",label:"🏘️ 海口镇"},{value:"城头镇",label:"🏘️ 城头镇"},{value:"南岭镇",label:"🏘️ 南岭镇"},{value:"龙田镇",label:"🏘️ 龙田镇"},{value:"江镜镇",label:"🏘️ 江镜镇"},{value:"港头镇",label:"🏘️ 港头镇"},{value:"高山镇",label:"🏘️ 高山镇"},{value:"沙埔镇",label:"🏘️ 沙埔镇"},{value:"三山镇",label:"🏘️ 三山镇"},{value:"东瀚镇",label:"🏘️ 东瀚镇"},{value:"渔溪镇",label:"🏘️ 渔溪镇"},{value:"上迳镇",label:"🏘️ 上迳镇"},{value:"新厝镇",label:"🏘️ 新厝镇"},{value:"江阴镇",label:"🏘️ 江阴镇"},{value:"东张镇",label:"🏘️ 东张镇"},{value:"镜洋镇",label:"🏘️ 镜洋镇"},{value:"一都镇",label:"🏘️ 一都镇"}],d=fe(()=>o.items),f=fe(()=>o.cartTotal),p=fe(()=>n.currentOrder),x=fe(()=>i.value.customerName&&i.value.customerPhone&&i.value.district&&i.value.detailAddress&&!a.value),C=()=>{const M=i.value.customerPhone;a.value="",M?/^1[3-9]\d{9}$/.test(M)||(a.value="请输入正确的11位手机号"):a.value="请输入手机号"},I=async()=>{if(x.value){l.value=!0;try{const M={customerName:i.value.customerName,phone:i.value.customerPhone,wechatId:i.value.wechatId,address:`福清市${i.value.district} ${i.value.detailAddress}`,notes:i.value.notes,items:d.value.map(j=>({productId:j.id,productName:j.name,quantity:j.quantity,price:j.price,priceUnit:j.priceUnit,color:j.selectedColor,specification:j.selectedVariant,image:j.image})),totalAmount:f.value,status:"pending"},$=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.token}`},body:JSON.stringify(M)});if($.ok){const j=await $.json();n.currentOrder=j.data,o.clearCart(),c.value=!0}else{const j=await $.json();alert(j.message||"订单提交失败，请稍后重试")}}catch(M){console.error("订单提交失败:",M),alert("网络错误，请检查网络连接后重试")}finally{l.value=!1}}},E=()=>{c.value=!1,t.push("/")};return De(()=>{if(r.checkLoginStatus(),!r.isLoggedIn){t.push({name:"UserLogin",query:{redirect:"/order"}});return}r.user&&(i.value.customerName=r.user.name||"",i.value.customerPhone=r.user.phone||"")}),(M,$)=>{var R;const j=qe("router-link");return m(),g("div",pp,[$[33]||($[33]=s("h1",{class:"text-3xl font-bold text-secondary-900 mb-8"},"门窗预订",-1)),d.value.length>0?(m(),g("div",mp,[s("div",gp,[s("div",hp,[$[9]||($[9]=s("h2",{class:"text-xl font-semibold mb-4"},"联系信息",-1)),s("div",vp,[s("div",null,[$[6]||($[6]=s("label",{class:"block text-sm font-medium text-secondary-700 mb-2"},"姓名 *",-1)),X(s("input",{"onUpdate:modelValue":$[0]||($[0]=U=>i.value.customerName=U),type:"text",required:"",class:"input-field",placeholder:"请输入您的姓名"},null,512),[[le,i.value.customerName]])]),s("div",null,[$[7]||($[7]=s("label",{class:"block text-sm font-medium text-secondary-700 mb-2"},"手机号 *",-1)),X(s("input",{"onUpdate:modelValue":$[1]||($[1]=U=>i.value.customerPhone=U),type:"tel",required:"",maxlength:"11",class:ie(["input-field",{"border-red-500":a.value}]),placeholder:"请输入11位手机号",onInput:C},null,34),[[le,i.value.customerPhone]]),a.value?(m(),g("p",xp,h(a.value),1)):O("",!0)])]),s("div",yp,[$[8]||($[8]=s("label",{class:"block text-sm font-medium text-secondary-700 mb-2"},"微信号",-1)),X(s("input",{"onUpdate:modelValue":$[2]||($[2]=U=>i.value.wechatId=U),type:"text",class:"input-field",placeholder:"请输入您的微信号（选填）"},null,512),[[le,i.value.wechatId]])])]),s("div",bp,[$[13]||($[13]=s("h2",{class:"text-xl font-semibold mb-4"},"地址信息",-1)),s("div",_p,[s("div",wp,[$[11]||($[11]=s("div",null,[s("label",{class:"block text-sm font-medium text-secondary-700 mb-2"},"城市"),s("input",{type:"text",value:"福清市",disabled:"",class:"input-field bg-gray-100 text-gray-600"})],-1)),s("div",null,[$[10]||($[10]=s("label",{class:"block text-sm font-medium text-secondary-700 mb-2"},"区县 *",-1)),F(fp,{modelValue:i.value.district,"onUpdate:modelValue":$[3]||($[3]=U=>i.value.district=U),options:u,placeholder:"请选择区县",searchable:""},null,8,["modelValue"])])]),s("div",null,[$[12]||($[12]=s("label",{class:"block text-sm font-medium text-secondary-700 mb-2"},"详细地址 *",-1)),X(s("textarea",{"onUpdate:modelValue":$[4]||($[4]=U=>i.value.detailAddress=U),required:"",rows:"3",class:"input-field",placeholder:"请输入详细地址，如街道名称、小区名称、门牌号等"},null,512),[[le,i.value.detailAddress]])])])]),s("div",kp,[$[16]||($[16]=s("h2",{class:"text-xl font-semibold mb-4"},"订单备注",-1)),s("div",$p,[s("div",null,[$[14]||($[14]=s("label",{class:"block text-sm font-medium text-secondary-700 mb-2"},"特殊要求",-1)),X(s("textarea",{"onUpdate:modelValue":$[5]||($[5]=U=>i.value.notes=U),rows:"3",class:"input-field",placeholder:"请输入特殊要求或备注信息（选填）"},null,512),[[le,i.value.notes]]),$[15]||($[15]=s("p",{class:"text-sm text-secondary-600 mt-1"}," 我们的专业技术人员将与您联系确认测量和安装时间 ",-1))])])])]),s("div",Cp,[s("div",Sp,[$[26]||($[26]=s("h2",{class:"text-xl font-semibold mb-4"},"预订详情",-1)),s("div",Mp,[(m(!0),g(se,null,ae(d.value,U=>(m(),g("div",{key:U.id,class:"flex items-center gap-3 pb-4 border-b"},[s("img",{src:U.image,alt:U.name,class:"w-12 h-12 object-cover rounded"},null,8,Tp),s("div",Pp,[s("h4",jp,h(U.name),1),s("p",Ip,h(U.specification),1),s("p",Ap,"x"+h(U.quantity),1)]),s("p",Ep,"¥"+h((U.price*U.quantity).toFixed(2)),1)]))),128))]),i.value.customerName||i.value.customerPhone?(m(),g("div",Op,[$[21]||($[21]=s("h3",{class:"text-sm font-medium text-secondary-700 mb-2"},"预订信息",-1)),s("div",Rp,[i.value.customerName?(m(),g("p",Np,[$[17]||($[17]=s("span",{class:"font-medium"},"姓名:",-1)),Z(" "+h(i.value.customerName),1)])):O("",!0),i.value.customerPhone?(m(),g("p",Vp,[$[18]||($[18]=s("span",{class:"font-medium"},"手机:",-1)),Z(" "+h(i.value.customerPhone),1)])):O("",!0),i.value.wechatId?(m(),g("p",Lp,[$[19]||($[19]=s("span",{class:"font-medium"},"微信:",-1)),Z(" "+h(i.value.wechatId),1)])):O("",!0),i.value.district?(m(),g("p",Up,[$[20]||($[20]=s("span",{class:"font-medium"},"地址:",-1)),Z(" 福清市"+h(i.value.district),1)])):O("",!0)])])):O("",!0),s("div",Bp,[s("div",Dp,[$[22]||($[22]=s("span",{class:"text-secondary-600"},"商品总价:",-1)),s("span",null,"¥"+h(f.value.toFixed(2)),1)]),$[25]||($[25]=s("div",{class:"flex justify-between"},[s("span",{class:"text-secondary-600"},"上门测量:"),s("span",{class:"text-green-600"},"免费")],-1)),s("div",Fp,[s("div",Hp,[$[23]||($[23]=s("span",null,"预估总价:",-1)),s("span",zp,"¥"+h(f.value.toFixed(2)),1)]),$[24]||($[24]=s("p",{class:"text-xs text-secondary-500 mt-1"}," * 最终价格以实际测量后为准 ",-1))])]),s("button",{onClick:I,disabled:!x.value,class:ie(["w-full py-3 px-6 rounded-lg font-medium transition-colors",x.value?"bg-primary-600 hover:bg-primary-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"])},h(l.value?"提交中...":"提交预订"),11,qp),$[27]||($[27]=s("div",{class:"mt-6 p-4 bg-blue-50 rounded-lg"},[s("h3",{class:"text-sm font-medium text-blue-900 mb-2"},"服务承诺"),s("ul",{class:"text-xs text-blue-700 space-y-1"},[s("li",null,"• 免费上门测量"),s("li",null,"• 专业技术团队"),s("li",null,"• 精确尺寸定制"),s("li",null,"• 质量保证承诺")])],-1))])])])):(m(),g("div",Wp,[$[29]||($[29]=Oe('<div class="w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6"><svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m-2.4 0L3 3m4 10v6a1 1 0 001 1h8a1 1 0 001-1v-6M7 13l-2-5m2 5l2 2m6-2l2 2"></path></svg></div><h2 class="text-2xl font-semibold text-secondary-900 mb-4"> 购物车是空的 </h2><p class="text-secondary-600 mb-8"> 请先添加门窗产品到购物车，然后再进行预订 </p>',3)),F(j,{to:"/",class:"btn-primary"},{default:ye(()=>$[28]||($[28]=[Z(" 选购门窗 ")])),_:1,__:[28]})])),c.value?(m(),g("div",Gp,[s("div",Jp,[s("div",Kp,[$[30]||($[30]=s("div",{class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},[s("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),$[31]||($[31]=s("h3",{class:"text-xl font-semibold text-secondary-900 mb-2"},"预订提交成功！",-1)),s("p",Zp," 预订编号: "+h((R=p.value)==null?void 0:R.orderNo),1),$[32]||($[32]=s("p",{class:"text-sm text-secondary-500 mb-6"}," 我们将在24小时内联系您确认测量和安装时间，请保持手机畅通 ",-1)),s("button",{onClick:E,class:"btn-primary w-full"},"返回首页")])])])):O("",!0)])}}},Yp={class:"container mx-auto px-4 py-8"},Xp={key:0},em={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},tm={class:"lg:col-span-2 space-y-4"},sm={class:"flex items-center gap-4"},om={class:"w-20 h-20 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0"},nm=["src","alt"],rm={class:"flex-grow"},lm={class:"flex items-center gap-2 mb-1"},im={class:"font-semibold text-secondary-900"},am={class:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded"},cm={class:"space-y-1 text-sm text-secondary-600"},dm={key:0},um={key:1},fm={key:2},pm={key:3},mm={class:"text-primary-600 font-medium mt-2"},gm={key:0,class:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-700"},hm={class:"flex items-center gap-3"},vm={class:"flex items-center border border-secondary-300 rounded-lg"},xm=["onClick"],ym={class:"w-12 text-center"},bm=["onClick"],_m={class:"text-right min-w-[80px]"},wm={class:"font-semibold text-secondary-900"},km=["onClick"],$m={class:"lg:col-span-1"},Cm={class:"bg-white rounded-lg shadow-md p-6 sticky top-24"},Sm={class:"space-y-3 mb-6"},Mm={class:"flex justify-between"},Tm={class:"flex justify-between"},Pm={class:"border-t pt-3"},jm={class:"flex justify-between text-lg font-semibold"},Im={class:"text-primary-600"},Am={class:"mt-6 space-y-3 text-sm text-secondary-600"},Em={class:"flex items-center gap-2"},Om={class:"flex items-center gap-2"},Rm={class:"flex items-center gap-2"},Nm={key:1,class:"text-center py-16"},Vm={class:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-6"},Lm={__name:"Cart",setup(e){const t=Ne(),o=Gs(),n=fe(()=>o.items),r=fe(()=>o.cartTotal),l=fe(()=>o.cartItemCount),c=f=>{o.updateQuantity(f.id,f.selectedColor,f.selectedVariant,f.quantity+1)},a=f=>{f.quantity>1&&o.updateQuantity(f.id,f.selectedColor,f.selectedVariant,f.quantity-1)},i=f=>{confirm("确定要删除这个商品吗？")&&o.removeFromCart(f.id,f.selectedColor,f.selectedVariant)},u=()=>{confirm("确定要清空购物车吗？")&&o.clearCart()},d=()=>{t.push("/order")};return(f,p)=>{const x=qe("router-link");return m(),g("div",Yp,[p[11]||(p[11]=s("h1",{class:"text-3xl font-bold text-secondary-900 mb-8"},"购物车",-1)),n.value.length>0?(m(),g("div",Xp,[s("div",em,[s("div",tm,[(m(!0),g(se,null,ae(n.value,C=>(m(),g("div",{key:`${C.id}-${C.selectedColor}-${C.selectedVariant}`,class:"bg-white rounded-lg shadow-md p-6"},[s("div",sm,[s("div",om,[s("img",{src:C.image,alt:C.name,class:"w-full h-full object-cover"},null,8,nm)]),s("div",rm,[s("div",lm,[s("h3",im,h(C.name),1),s("span",am,h(C.category),1)]),s("div",cm,[C.material?(m(),g("p",dm,"材料: "+h(C.material),1)):O("",!0),C.selectedVariant?(m(),g("p",um,"类型: "+h(C.selectedVariant),1)):O("",!0),C.selectedColor?(m(),g("p",fm,"颜色: "+h(C.selectedColor),1)):O("",!0),C.selectedSpecification?(m(),g("p",pm,"规格: "+h(C.selectedSpecification),1)):O("",!0)]),s("p",mm,"¥"+h(C.price)+"/"+h(C.priceUnit),1),C.notes?(m(),g("div",gm," 💡 "+h(C.notes),1)):O("",!0)]),s("div",hm,[s("div",vm,[s("button",{onClick:I=>a(C),class:"px-3 py-2 hover:bg-gray-100 transition-colors"},[F(z(Ti),{class:"w-4 h-4"})],8,xm),s("span",ym,h(C.quantity),1),s("button",{onClick:I=>c(C),class:"px-3 py-2 hover:bg-gray-100 transition-colors"},[F(z(ji),{class:"w-4 h-4"})],8,bm)]),s("div",_m,[s("p",wm," ¥"+h((C.price*C.quantity).toFixed(2)),1)]),s("button",{onClick:I=>i(C),class:"p-2 text-red-500 hover:text-red-700 transition-colors"},[F(z($u),{class:"w-5 h-5"})],8,km)])])]))),128))]),s("div",$m,[s("div",Cm,[p[7]||(p[7]=s("h2",{class:"text-xl font-semibold mb-4"},"订单摘要",-1)),s("div",Sm,[s("div",Mm,[p[0]||(p[0]=s("span",{class:"text-secondary-600"},"商品总数:",-1)),s("span",null,h(l.value)+"件",1)]),s("div",Tm,[p[1]||(p[1]=s("span",{class:"text-secondary-600"},"商品总价:",-1)),s("span",null,"¥"+h(r.value.toFixed(2)),1)]),p[3]||(p[3]=s("div",{class:"flex justify-between"},[s("span",{class:"text-secondary-600"},"配送费:"),s("span",{class:"text-green-600"},"免费")],-1)),s("div",Pm,[s("div",jm,[p[2]||(p[2]=s("span",null,"总计:",-1)),s("span",Im,"¥"+h(r.value.toFixed(2)),1)])])]),s("button",{onClick:d,class:"w-full btn-primary mb-4"}," 去结算 "),s("button",{onClick:u,class:"w-full btn-secondary"}," 清空购物车 "),s("div",Am,[s("div",Em,[F(z(Ii),{class:"w-4 h-4"}),p[4]||(p[4]=s("span",null,"免费配送",-1))]),s("div",Om,[F(z(Ln),{class:"w-4 h-4"}),p[5]||(p[5]=s("span",null,"品质保证",-1))]),s("div",Rm,[F(z(Bn),{class:"w-4 h-4"}),p[6]||(p[6]=s("span",null,"专业安装",-1))])])])])])])):(m(),g("div",Nm,[s("div",Vm,[F(z(Un),{class:"w-12 h-12 text-gray-400"})]),p[9]||(p[9]=s("h2",{class:"text-2xl font-semibold text-secondary-900 mb-4"}," 购物车是空的 ",-1)),p[10]||(p[10]=s("p",{class:"text-secondary-600 mb-8"}," 还没有添加任何商品，去挑选一些心仪的门窗吧！ ",-1)),F(x,{to:"/",class:"btn-primary"},{default:ye(()=>p[8]||(p[8]=[Z(" 去购物 ")])),_:1,__:[8]})]))])}}},Um={class:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center px-4"},Bm={class:"max-w-md w-full"},Dm={class:"mb-6"},Fm={class:"bg-white rounded-2xl shadow-xl p-8"},Hm={class:"text-center mb-8"},zm={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},qm={class:"mb-6"},Wm={class:"grid grid-cols-2 gap-2 p-1 bg-gray-100 rounded-xl"},Gm={class:"relative"},Jm={key:0,class:"text-red-500 text-sm mt-1"},Km={key:0},Zm={class:"relative"},Qm=["type"],Ym={key:1},Xm={key:0},e1={class:"flex space-x-3"},t1=["disabled"],s1={key:0},o1={key:1},n1={key:2},r1={key:1},l1=["disabled"],i1={key:0},a1={key:1},c1={class:"mt-6 text-center"},d1={class:"text-sm text-gray-600"},u1={__name:"UserLogin",setup(e){const t=Ne(),o=qs(),n=Xt(),r=B(!1),l=B(!1),c=B(!1),a=B(!1),i=B(0),u=B(""),d=B("password"),f=B(!1),p=B({phone:"",password:"",verificationCode:"",name:""});let x=null;const C=fe(()=>{const A=p.value.phone&&!u.value;return d.value==="password"?A&&p.value.password:a.value?A&&p.value.verificationCode&&p.value.name:A}),I=()=>d.value==="password"||a.value?"登录":"获取验证码",E=()=>d.value==="password"||a.value?"登录中...":"获取验证码...",M=()=>{const A=p.value.phone;u.value="",A?/^1[3-9]\d{9}$/.test(A)||(u.value="请输入正确的11位手机号"):u.value="请输入手机号"},$=()=>{i.value=60,x=setInterval(()=>{i.value--,i.value<=0&&(clearInterval(x),x=null)},1e3)},j=async()=>{if(!(!p.value.phone||u.value)){l.value=!0;try{const y=await(await fetch("/api/users/send-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:p.value.phone})})).json();if(!y.success)throw new Error(y.message||"发送验证码失败");c.value=!0,a.value=!0,$()}catch(A){console.error("发送验证码失败:",A),alert(A.message||"发送验证码失败，请稍后重试")}finally{l.value=!1}}},R=async()=>{if(C.value){if(d.value==="code"&&!a.value){await j();return}r.value=!0;try{const y=await(await fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:p.value.phone,password:d.value==="password"?p.value.password:void 0,name:d.value==="code"?p.value.name:void 0,verificationCode:d.value==="code"?p.value.verificationCode:void 0,loginType:d.value})})).json();if(!y.success)throw new Error(y.message||"登录失败");await n.setUserInfo(y.data.user,y.data.token);const _=o.query.redirect||"/";t.push(_)}catch(A){console.error("登录失败:",A),alert(A.message||"登录失败，请稍后重试")}finally{r.value=!1}}},U=()=>{o.query.redirect==="/order"?t.push("/cart"):t.push("/")};return Hs(()=>{x&&clearInterval(x)}),(A,y)=>{const _=qe("router-link");return m(),g("div",Um,[s("div",Bm,[s("div",Dm,[s("button",{onClick:U,class:"flex items-center text-primary-600 hover:text-primary-700 transition-colors"},[F(z(Vn),{class:"w-5 h-5 mr-1"}),y[7]||(y[7]=Z(" 返回 "))])]),s("div",Fm,[s("div",Hm,[s("div",zm,[F(z(Ct),{class:"w-8 h-8 text-primary-600"})]),y[8]||(y[8]=s("h1",{class:"text-2xl font-bold text-gray-900"},"用户登录",-1)),y[9]||(y[9]=s("p",{class:"text-gray-600 mt-2"},"欢迎回到宝得利门窗",-1))]),s("div",qm,[s("div",Wm,[s("button",{onClick:y[0]||(y[0]=k=>d.value="password"),class:ie(["px-4 py-2 text-sm font-medium rounded-lg transition-colors",d.value==="password"?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," 密码登录 ",2),s("button",{onClick:y[1]||(y[1]=k=>d.value="code"),class:ie(["px-4 py-2 text-sm font-medium rounded-lg transition-colors",d.value==="code"?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," 验证码登录 ",2)])]),s("form",{onSubmit:mt(R,["prevent"]),class:"space-y-6"},[s("div",null,[y[10]||(y[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"手机号",-1)),s("div",Gm,[X(s("input",{"onUpdate:modelValue":y[2]||(y[2]=k=>p.value.phone=k),type:"tel",maxlength:"11",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 pl-12",placeholder:"请输入11位手机号",onInput:M},null,544),[[le,p.value.phone]]),F(z(Pi),{class:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"})]),u.value?(m(),g("p",Jm,h(u.value),1)):O("",!0)]),d.value==="password"?(m(),g("div",Km,[y[11]||(y[11]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"密码",-1)),s("div",Zm,[X(s("input",{"onUpdate:modelValue":y[3]||(y[3]=k=>p.value.password=k),type:f.value?"text":"password",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 pl-12 pr-12",placeholder:"请输入密码"},null,8,Qm),[[an,p.value.password]]),F(z(gn),{class:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"}),s("button",{type:"button",onClick:y[4]||(y[4]=k=>f.value=!f.value),class:"absolute right-4 top-3.5 text-gray-400 hover:text-gray-600"},[f.value?(m(),Pe(z(mn),{key:1,class:"w-5 h-5"})):(m(),Pe(z(vo),{key:0,class:"w-5 h-5"}))])])])):O("",!0),d.value==="code"?(m(),g("div",Ym,[a.value?(m(),g("div",Xm,[y[12]||(y[12]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"验证码",-1)),s("div",e1,[X(s("input",{"onUpdate:modelValue":y[5]||(y[5]=k=>p.value.verificationCode=k),type:"text",maxlength:"6",required:"",class:"flex-1 px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"请输入验证码"},null,512),[[le,p.value.verificationCode]]),s("button",{type:"button",onClick:j,disabled:l.value||i.value>0,class:"px-4 py-3 bg-primary-100 text-primary-700 rounded-xl hover:bg-primary-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors whitespace-nowrap"},[l.value?(m(),g("span",s1,"发送中...")):i.value>0?(m(),g("span",o1,h(i.value)+"s",1)):(m(),g("span",n1,h(c.value?"重新发送":"获取验证码"),1))],8,t1)])])):O("",!0),a.value?(m(),g("div",r1,[y[13]||(y[13]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"姓名",-1)),X(s("input",{"onUpdate:modelValue":y[6]||(y[6]=k=>p.value.name=k),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"请输入您的姓名"},null,512),[[le,p.value.name]])])):O("",!0)])):O("",!0),s("button",{type:"submit",disabled:r.value||!C.value,class:"w-full bg-primary-600 text-white py-3 px-4 rounded-xl hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium"},[r.value?(m(),g("span",i1,[y[14]||(y[14]=s("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),Z(" "+h(E()),1)])):(m(),g("span",a1,h(I()),1))],8,l1)],32),s("div",c1,[s("p",d1,[y[16]||(y[16]=Z(" 还没有账户？ ")),F(_,{to:"/register",class:"text-primary-600 hover:text-primary-700 font-medium transition-colors"},{default:ye(()=>y[15]||(y[15]=[Z(" 立即注册 ")])),_:1,__:[15]})])]),y[17]||(y[17]=s("div",{class:"mt-4 text-center"},[s("p",{class:"text-sm text-gray-500"}," 登录即表示您同意我们的服务条款和隐私政策 ")],-1))])])])}}},f1=tt(u1,[["__scopeId","data-v-0dda92bb"]]),p1={class:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center px-4 py-8"},m1={class:"max-w-md w-full"},g1={class:"mb-6"},h1={class:"bg-white rounded-2xl shadow-xl p-8"},v1={class:"text-center mb-8"},x1={class:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4"},y1={class:"mb-8"},b1={class:"flex items-center justify-center space-x-4"},_1={class:"flex items-center"},w1={class:"flex items-center"},k1={class:"relative"},$1={key:0,class:"text-red-500 text-sm mt-1"},C1={class:"relative"},S1=["type"],M1={key:0,class:"text-red-500 text-sm mt-1"},T1={class:"relative"},P1=["type"],j1={key:0,class:"text-red-500 text-sm mt-1"},I1=["value"],A1={class:"text-center mb-6"},E1={class:"text-sm text-gray-600"},O1={class:"font-medium text-primary-600"},R1={class:"flex space-x-3"},N1=["disabled"],V1={key:0},L1={key:1},U1={class:"mt-4"},B1=["disabled"],D1={key:0},F1={key:1},H1={class:"mt-6 text-center"},z1={class:"text-sm text-gray-600"},q1={__name:"UserRegister",setup(e){const t=Ne(),o=qs(),n=Xt(),r=B(!1),l=B(1),c=B(0),a=B(""),i=B(""),u=B(""),d=B(!1),f=B(!1),p=B({name:"",phone:"",password:"",confirmPassword:"",wechatId:"",district:"",address:"",verificationCode:""}),x=[{value:"玉屏街道",label:"🏙️ 玉屏街道"},{value:"龙山街道",label:"🏙️ 龙山街道"},{value:"龙江街道",label:"🏙️ 龙江街道"},{value:"宏路街道",label:"🏙️ 宏路街道"},{value:"石竹街道",label:"🏙️ 石竹街道"},{value:"音西街道",label:"🏙️ 音西街道"},{value:"阳下街道",label:"🏙️ 阳下街道"},{value:"海口镇",label:"🏘️ 海口镇"},{value:"城头镇",label:"🏘️ 城头镇"},{value:"南岭镇",label:"🏘️ 南岭镇"},{value:"龙田镇",label:"🏘️ 龙田镇"},{value:"江镜镇",label:"🏘️ 江镜镇"},{value:"港头镇",label:"🏘️ 港头镇"},{value:"高山镇",label:"🏘️ 高山镇"},{value:"沙埔镇",label:"🏘️ 沙埔镇"},{value:"三山镇",label:"🏘️ 三山镇"},{value:"东瀚镇",label:"🏘️ 东瀚镇"},{value:"渔溪镇",label:"🏘️ 渔溪镇"},{value:"上迳镇",label:"🏘️ 上迳镇"},{value:"新厝镇",label:"🏘️ 新厝镇"},{value:"江阴镇",label:"🏘️ 江阴镇"},{value:"东张镇",label:"🏘️ 东张镇"},{value:"镜洋镇",label:"🏘️ 镜洋镇"},{value:"一都镇",label:"🏘️ 一都镇"}];let C=null;const I=fe(()=>l.value===1?p.value.name&&p.value.phone&&p.value.password&&p.value.confirmPassword&&!a.value&&!i.value&&!u.value:l.value===2?p.value.verificationCode:!1),E=()=>{const k=p.value.phone;a.value="",k?/^1[3-9]\d{9}$/.test(k)||(a.value="请输入正确的11位手机号"):a.value="请输入手机号"},M=()=>{const k=p.value.password;i.value="",k?k.length<6?i.value="密码长度至少6位":/^(?=.*[a-zA-Z])(?=.*\d)/.test(k)||(i.value="密码至少包含一个字母和一个数字"):i.value="请输入密码",p.value.confirmPassword&&$()},$=()=>{const k=p.value.password,v=p.value.confirmPassword;u.value="",v?k!==v&&(u.value="两次输入的密码不一致"):u.value="请确认密码"},j=()=>{c.value=60,C=setInterval(()=>{c.value--,c.value<=0&&(clearInterval(C),C=null)},1e3)},R=async()=>{r.value=!0;try{await new Promise(k=>setTimeout(k,1e3)),l.value=2,j()}catch(k){console.error("发送验证码失败:",k),alert("发送验证码失败，请稍后重试")}finally{r.value=!1}},U=async()=>{if(!(c.value>0))try{await new Promise(k=>setTimeout(k,1e3)),j()}catch(k){console.error("重发验证码失败:",k),alert("重发验证码失败，请稍后重试")}},A=async()=>{r.value=!0;try{const v=await(await fetch("/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:p.value.phone,password:p.value.password,name:p.value.name,wechatId:p.value.wechatId,district:p.value.district,address:p.value.address,verificationCode:p.value.verificationCode})})).json();if(!v.success)throw new Error(v.message||"注册失败");await n.setUserInfo(v.data.user,v.data.token),alert("注册成功！欢迎加入宝得利门窗！");const S=o.query.redirect||"/";t.push(S)}catch(k){console.error("注册失败:",k),alert(k.message||"注册失败，请稍后重试")}finally{r.value=!1}},y=async()=>{I.value&&(l.value===1?await R():l.value===2&&await A())},_=()=>{const k=o.query.redirect||"/";t.push(k)};return Hs(()=>{C&&clearInterval(C)}),(k,v)=>{const S=qe("router-link");return m(),g("div",p1,[s("div",m1,[s("div",g1,[s("button",{onClick:_,class:"flex items-center text-primary-600 hover:text-primary-700 transition-colors"},[F(z(Vn),{class:"w-5 h-5 mr-1"}),v[11]||(v[11]=Z(" 返回 "))])]),s("div",h1,[s("div",v1,[s("div",x1,[F(z(Su),{class:"w-8 h-8 text-primary-600"})]),v[12]||(v[12]=s("h1",{class:"text-2xl font-bold text-gray-900"},"用户注册",-1)),v[13]||(v[13]=s("p",{class:"text-gray-600 mt-2"},"创建您的宝得利门窗账户",-1))]),s("div",y1,[s("div",b1,[s("div",_1,[s("div",{class:ie(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",l.value>=1?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"])}," 1 ",2),v[14]||(v[14]=s("span",{class:"ml-2 text-sm text-gray-600"},"基本信息",-1))]),v[16]||(v[16]=s("div",{class:"w-8 h-px bg-gray-300"},null,-1)),s("div",w1,[s("div",{class:ie(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",l.value>=2?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"])}," 2 ",2),v[15]||(v[15]=s("span",{class:"ml-2 text-sm text-gray-600"},"验证手机",-1))])])]),s("form",{onSubmit:mt(y,["prevent"]),class:"space-y-6"},[X(s("div",null,[s("div",null,[v[17]||(v[17]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"姓名 *",-1)),X(s("input",{"onUpdate:modelValue":v[0]||(v[0]=P=>p.value.name=P),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"请输入您的真实姓名"},null,512),[[le,p.value.name]])]),s("div",null,[v[18]||(v[18]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"手机号 *",-1)),s("div",k1,[X(s("input",{"onUpdate:modelValue":v[1]||(v[1]=P=>p.value.phone=P),type:"tel",maxlength:"11",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 pl-12",placeholder:"请输入11位手机号",onInput:E},null,544),[[le,p.value.phone]]),F(z(Pi),{class:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"})]),a.value?(m(),g("p",$1,h(a.value),1)):O("",!0)]),s("div",null,[v[19]||(v[19]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"设置密码 *",-1)),s("div",C1,[X(s("input",{"onUpdate:modelValue":v[2]||(v[2]=P=>p.value.password=P),type:d.value?"text":"password",required:"",minlength:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 pl-12 pr-12",placeholder:"请输入6位以上密码",onInput:M},null,40,S1),[[an,p.value.password]]),F(z(gn),{class:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"}),s("button",{type:"button",onClick:v[3]||(v[3]=P=>d.value=!d.value),class:"absolute right-4 top-3.5 text-gray-400 hover:text-gray-600"},[d.value?(m(),Pe(z(mn),{key:1,class:"w-5 h-5"})):(m(),Pe(z(vo),{key:0,class:"w-5 h-5"}))])]),i.value?(m(),g("p",M1,h(i.value),1)):O("",!0)]),s("div",null,[v[20]||(v[20]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"确认密码 *",-1)),s("div",T1,[X(s("input",{"onUpdate:modelValue":v[4]||(v[4]=P=>p.value.confirmPassword=P),type:f.value?"text":"password",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 pl-12 pr-12",placeholder:"请再次输入密码",onInput:$},null,40,P1),[[an,p.value.confirmPassword]]),F(z(gn),{class:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"}),s("button",{type:"button",onClick:v[5]||(v[5]=P=>f.value=!f.value),class:"absolute right-4 top-3.5 text-gray-400 hover:text-gray-600"},[f.value?(m(),Pe(z(mn),{key:1,class:"w-5 h-5"})):(m(),Pe(z(vo),{key:0,class:"w-5 h-5"}))])]),u.value?(m(),g("p",j1,h(u.value),1)):O("",!0)]),s("div",null,[v[21]||(v[21]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"微信号",-1)),X(s("input",{"onUpdate:modelValue":v[6]||(v[6]=P=>p.value.wechatId=P),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"请输入微信号（可选）"},null,512),[[le,p.value.wechatId]])]),s("div",null,[v[23]||(v[23]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"所在区域",-1)),X(s("select",{"onUpdate:modelValue":v[7]||(v[7]=P=>p.value.district=P),class:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},[v[22]||(v[22]=s("option",{value:""},"请选择所在区域（可选）",-1)),(m(),g(se,null,ae(x,P=>s("option",{key:P.value,value:P.value},h(P.label),9,I1)),64))],512),[[Tt,p.value.district]])]),s("div",null,[v[24]||(v[24]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"详细地址",-1)),X(s("textarea",{"onUpdate:modelValue":v[8]||(v[8]=P=>p.value.address=P),rows:"3",class:"w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"请输入详细地址（可选）"},null,512),[[le,p.value.address]])])],512),[[Vs,l.value===1]]),X(s("div",null,[s("div",A1,[v[26]||(v[26]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"验证手机号",-1)),s("p",E1,[v[25]||(v[25]=Z(" 验证码已发送至 ")),s("span",O1,h(p.value.phone),1)])]),s("div",null,[v[27]||(v[27]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"验证码 *",-1)),s("div",R1,[X(s("input",{"onUpdate:modelValue":v[9]||(v[9]=P=>p.value.verificationCode=P),type:"text",maxlength:"6",required:"",class:"flex-1 px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"请输入6位验证码"},null,512),[[le,p.value.verificationCode]]),s("button",{type:"button",onClick:U,disabled:c.value>0,class:"px-4 py-3 bg-primary-100 text-primary-700 rounded-xl hover:bg-primary-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors whitespace-nowrap"},[c.value>0?(m(),g("span",V1,h(c.value)+"s",1)):(m(),g("span",L1,"重新发送"))],8,N1)])]),s("div",U1,[s("button",{type:"button",onClick:v[10]||(v[10]=P=>l.value=1),class:"text-sm text-primary-600 hover:text-primary-700 transition-colors"}," 返回修改信息 ")])],512),[[Vs,l.value===2]]),s("button",{type:"submit",disabled:r.value||!I.value,class:"w-full bg-primary-600 text-white py-3 px-4 rounded-xl hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium"},[r.value?(m(),g("span",D1,[v[28]||(v[28]=s("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),Z(" "+h(l.value===1?"发送验证码...":"注册中..."),1)])):(m(),g("span",F1,h(l.value===1?"发送验证码":"完成注册"),1))],8,B1)],32),s("div",H1,[s("p",z1,[v[30]||(v[30]=Z(" 已有账户？ ")),F(S,{to:"/login",class:"text-primary-600 hover:text-primary-700 font-medium transition-colors"},{default:ye(()=>v[29]||(v[29]=[Z(" 立即登录 ")])),_:1,__:[29]})])]),v[31]||(v[31]=s("div",{class:"mt-4 text-center"},[s("p",{class:"text-xs text-gray-500"},[Z(" 注册即表示您同意我们的 "),s("a",{href:"#",class:"text-primary-600 hover:text-primary-700"},"服务条款"),Z(" 和 "),s("a",{href:"#",class:"text-primary-600 hover:text-primary-700"},"隐私政策")])],-1))])])])}}},W1=tt(q1,[["__scopeId","data-v-fe8048fc"]]),G1={class:"min-h-screen bg-gray-50"},J1={class:"bg-white border-b border-gray-200"},K1={class:"container mx-auto px-4 py-6"},Z1={class:"flex items-center justify-between"},Q1={class:"flex space-x-4"},Y1=["onClick"],X1={class:"container mx-auto px-4 py-8"},eg={key:0,class:"space-y-6"},tg={class:"bg-white rounded-lg shadow-sm p-6"},sg={class:"flex flex-wrap gap-4"},og={key:0,class:"text-center py-8"},ng={key:1,class:"text-center py-12"},rg={key:2,class:"space-y-4"},lg={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},ig={class:"flex justify-between items-center"},ag={class:"flex items-center space-x-4"},cg={class:"font-medium text-gray-900"},dg={class:"text-sm text-gray-600"},ug={class:"px-6 py-4"},fg={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},pg={class:"text-sm text-gray-600 space-y-1"},mg={class:"text-lg font-semibold text-primary-600"},gg={class:"flex space-x-3 pt-4 border-t border-gray-200"},hg=["onClick"],vg=["onClick"],xg={key:1,class:"space-y-6"},yg={class:"bg-white rounded-lg shadow-sm p-6"},bg={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},_g=["onClick"],wg={class:"flex justify-between items-start mb-2"},kg={class:"font-medium"},$g={class:"text-sm text-gray-600 mb-1"},Cg={class:"text-sm text-gray-500"},Sg={key:0,class:"bg-white rounded-lg shadow-sm p-6"},Mg={class:"text-lg font-semibold mb-6"},Tg={class:"space-y-6"},Pg={class:"flex items-center space-x-4"},jg={class:"text-sm text-gray-600"},Ig={class:"flex items-center space-x-4"},Ag={class:"text-sm text-gray-600"},Eg={class:"flex items-center space-x-4"},Og={class:"text-sm text-gray-600"},Rg={class:"flex items-center space-x-4"},Ng={class:"text-sm text-gray-600"},Vg={class:"flex items-center space-x-4"},Lg={class:"text-sm text-gray-600"},Ug={key:2,class:"space-y-6"},Bg={class:"bg-white rounded-lg shadow-sm p-6"},Dg={key:0,class:"text-center py-8"},Fg={key:1,class:"max-w-2xl mx-auto"},Hg=["value"],zg={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},qg=["value"],Wg={class:"flex flex-1"},Gg={class:"flex flex-col"},Jg={class:"block text-sm font-medium text-gray-900"},Kg={class:"mt-1 flex items-center text-sm text-gray-500"},Zg={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qg={class:"flex space-x-4"},Yg=["disabled"],Xg={__name:"UserOrders",setup(e){const t=Ne(),o=Xt(),n=B("orders"),r=B(!1),l=B(!1),c=B([]),a=B(null),i=B(!1),u=B({status:""}),d=B({orderId:"",serviceType:"",description:"",contactName:"",contactPhone:""}),f=[{key:"orders",label:"我的订单"},{key:"tracking",label:"订单追踪"},{key:"aftersales",label:"订单售后"}],p=[{value:"repair",label:"维修服务",description:"产品损坏需要维修"},{value:"replace",label:"更换服务",description:"产品质量问题需要更换"},{value:"consultation",label:"咨询服务",description:"使用问题咨询"}],x=fe(()=>c.value.filter(y=>y.status!=="cancelled"&&y.status!=="pending")),C=fe(()=>c.value.filter(y=>y.status==="completed")),I=async()=>{if(!o.isLoggedIn){t.push("/login");return}r.value=!0;try{const y=new URLSearchParams;u.value.status&&y.append("status",u.value.status);const _=await fetch(`/api/users/orders?${y}`,{headers:{Authorization:`Bearer ${o.token}`,"Content-Type":"application/json"}});if(_.ok){const k=await _.json();console.log("订单数据:",k),k.success?(c.value=k.data.orders||[],c.value.forEach(v=>{if(typeof v.items=="string")try{v.items=JSON.parse(v.items)}catch(S){console.error("解析订单商品失败:",S),v.items=[]}})):(console.error("API请求失败:",k.message),c.value=[])}else console.error("HTTP请求失败:",_.status,_.statusText),_.status===401?(o.logout(),t.push("/login")):c.value=[]}catch(y){console.error("加载订单失败:",y),c.value=[]}finally{r.value=!1}},E=y=>{console.log("查看订单追踪:",y),n.value="tracking",a.value=y},M=y=>{console.log("选择追踪订单:",y),a.value=y},$=y=>{n.value="aftersales",i.value=!0,d.value.orderId=y.id,d.value.contactName=y.customerName,d.value.contactPhone=y.phone},j=async()=>{l.value=!0;try{await new Promise(y=>setTimeout(y,1e3)),alert("售后申请提交成功，我们将在24小时内联系您"),i.value=!1,d.value={orderId:"",serviceType:"",description:"",contactName:"",contactPhone:""}}catch(y){console.error("Error submitting after sales:",y),alert("网络错误，请稍后重试")}finally{l.value=!1}},R=y=>({pending:"待处理",measuring:"测量中",measured:"已测量",producing:"生产中",installing:"安装中",completed:"已完成",cancelled:"已取消"})[y]||y,U=y=>({pending:"bg-yellow-100 text-yellow-800",measuring:"bg-blue-100 text-blue-800",measured:"bg-indigo-100 text-indigo-800",producing:"bg-purple-100 text-purple-800",installing:"bg-orange-100 text-orange-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[y]||"bg-gray-100 text-gray-800",A=y=>y?new Date(y).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return De(async()=>{if(!o.checkLoginStatus()){console.log("用户未登录，跳转到登录页"),t.push("/login?redirect="+encodeURIComponent("/orders"));return}console.log("用户已登录，当前用户:",o.user),console.log("用户令牌:",o.token),await I(),o.user&&(d.value.contactName=o.user.name||"",d.value.contactPhone=o.user.phone||"")}),(y,_)=>{const k=qe("router-link");return m(),g("div",G1,[s("div",J1,[s("div",K1,[s("div",Z1,[_[8]||(_[8]=s("h1",{class:"text-2xl font-bold text-gray-900"},"订单服务中心",-1)),s("div",Q1,[(m(),g(se,null,ae(f,v=>s("button",{key:v.key,onClick:S=>n.value=v.key,class:ie(["px-4 py-2 rounded-lg font-medium transition-colors",n.value===v.key?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},h(v.label),11,Y1)),64))])])])]),s("div",X1,[n.value==="orders"?(m(),g("div",eg,[s("div",tg,[s("div",sg,[s("div",null,[_[10]||(_[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"订单状态",-1)),X(s("select",{"onUpdate:modelValue":_[0]||(_[0]=v=>u.value.status=v),class:"input-field"},_[9]||(_[9]=[Oe('<option value="">全部状态</option><option value="pending">待处理</option><option value="measuring">测量中</option><option value="measured">已测量</option><option value="producing">生产中</option><option value="installing">安装中</option><option value="completed">已完成</option><option value="cancelled">已取消</option>',8)]),512),[[Tt,u.value.status]])]),s("div",{class:"flex items-end"},[s("button",{onClick:I,class:"btn-primary"},"筛选")])])]),r.value?(m(),g("div",og,_[11]||(_[11]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),s("p",{class:"mt-2 text-gray-600"},"加载中...",-1)]))):c.value.length===0?(m(),g("div",ng,[_[13]||(_[13]=Oe('<div class="w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">暂无订单</h3><p class="text-gray-600 mb-4">您还没有任何订单</p>',3)),F(k,{to:"/",class:"btn-primary"},{default:ye(()=>_[12]||(_[12]=[Z("去购买")])),_:1,__:[12]})])):(m(),g("div",rg,[(m(!0),g(se,null,ae(c.value,v=>(m(),g("div",{key:v.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},[s("div",lg,[s("div",ig,[s("div",ag,[s("h3",cg,"订单号: "+h(v.orderNo),1),s("span",{class:ie(["px-2 py-1 rounded-full text-xs font-medium",U(v.status)])},h(R(v.status)),3)]),s("div",dg,h(A(v.createdAt)),1)])]),s("div",ug,[s("div",fg,[s("div",null,[_[14]||(_[14]=s("h4",{class:"font-medium text-gray-900 mb-2"},"联系信息",-1)),s("div",pg,[s("p",null,"联系人："+h(v.customerName),1),s("p",null,"电话："+h(v.phone),1),s("p",null,"地址："+h(v.address),1)])]),s("div",null,[_[15]||(_[15]=s("h4",{class:"font-medium text-gray-900 mb-2"},"订单金额",-1)),s("div",mg," ¥"+h(v.totalAmount),1)])]),s("div",gg,[s("button",{onClick:S=>E(v),class:"btn-secondary text-sm"}," 订单追踪 ",8,hg),v.status==="completed"?(m(),g("button",{key:0,onClick:S=>$(v),class:"btn-secondary text-sm"}," 申请售后 ",8,vg)):O("",!0)])])]))),128))]))])):O("",!0),n.value==="tracking"?(m(),g("div",xg,[s("div",yg,[_[16]||(_[16]=s("h2",{class:"text-lg font-semibold mb-4"},"选择要追踪的订单",-1)),s("div",bg,[(m(!0),g(se,null,ae(x.value,v=>(m(),g("div",{key:v.id,onClick:S=>M(v),class:"p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-primary-50 transition-colors"},[s("div",wg,[s("span",kg,h(v.orderNo),1),s("span",{class:ie(["px-2 py-1 rounded-full text-xs font-medium",U(v.status)])},h(R(v.status)),3)]),s("p",$g,h(v.customerName),1),s("p",Cg,h(A(v.createdAt)),1)],8,_g))),128))])]),a.value?(m(),g("div",Sg,[s("h2",Mg,"订单追踪 - "+h(a.value.orderNo),1),s("div",Tg,[s("div",Pg,[_[18]||(_[18]=s("div",{class:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),s("div",null,[_[17]||(_[17]=s("h3",{class:"font-medium"},"订单已创建",-1)),s("p",jg,h(A(a.value.createdAt)),1)])]),s("div",Ig,[s("div",{class:ie(["w-8 h-8 rounded-full flex items-center justify-center",a.value.measurementScheduled?"bg-green-500":"bg-gray-300"])},_[19]||(_[19]=[s("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]),2),s("div",null,[_[20]||(_[20]=s("h3",{class:"font-medium"},"测量预约",-1)),s("p",Ag,h(a.value.measurementScheduled?A(a.value.measurementScheduled):"待预约"),1)])]),s("div",Eg,[s("div",{class:ie(["w-8 h-8 rounded-full flex items-center justify-center",a.value.measurementCompleted?"bg-green-500":"bg-gray-300"])},_[21]||(_[21]=[s("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),2),s("div",null,[_[22]||(_[22]=s("h3",{class:"font-medium"},"测量完成",-1)),s("p",Og,h(a.value.measurementCompleted?A(a.value.measurementCompleted):"待完成"),1)])]),s("div",Rg,[s("div",{class:ie(["w-8 h-8 rounded-full flex items-center justify-center",a.value.installationScheduled?"bg-green-500":"bg-gray-300"])},_[23]||(_[23]=[s("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]),2),s("div",null,[_[24]||(_[24]=s("h3",{class:"font-medium"},"安装预约",-1)),s("p",Ng,h(a.value.installationScheduled?A(a.value.installationScheduled):"待预约"),1)])]),s("div",Vg,[s("div",{class:ie(["w-8 h-8 rounded-full flex items-center justify-center",a.value.status==="completed"?"bg-green-500":"bg-gray-300"])},_[25]||(_[25]=[s("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})],-1)]),2),s("div",null,[_[26]||(_[26]=s("h3",{class:"font-medium"},"安装完成",-1)),s("p",Lg,h(a.value.status==="completed"&&a.value.installationCompleted?A(a.value.installationCompleted):"待完成"),1)])])])])):O("",!0)])):O("",!0),n.value==="aftersales"?(m(),g("div",Ug,[s("div",Bg,[_[35]||(_[35]=s("h2",{class:"text-lg font-semibold mb-4"},"售后服务",-1)),i.value?O("",!0):(m(),g("div",Dg,[_[27]||(_[27]=Oe('<div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M12 2.25a9.75 9.75 0 11-9.75 9.75A9.75 9.75 0 0112 2.25z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">售后服务支持</h3><p class="text-gray-600 mb-6">我们提供专业的售后服务，包括产品维修、更换、咨询等</p><div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"><div class="text-center"><div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h4 class="font-medium">质量保证</h4><p class="text-sm text-gray-600">产品质量问题免费维修</p></div><div class="text-center"><div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2"><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h4 class="font-medium">快速响应</h4><p class="text-sm text-gray-600">24小时内响应服务请求</p></div><div class="text-center"><div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2"><svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-2-2v-1M15 10V6a2 2 0 00-2-2H7a2 2 0 00-2 2v4a2 2 0 002 2h1m8 0h2a2 2 0 002-2v-6a2 2 0 00-2-2h-2V4"></path></svg></div><h4 class="font-medium">专业咨询</h4><p class="text-sm text-gray-600">专业技术人员在线咨询</p></div></div>',4)),s("button",{onClick:_[1]||(_[1]=v=>i.value=!0),class:"btn-primary"}," 申请售后服务 ")])),i.value?(m(),g("div",Fg,[_[34]||(_[34]=s("h3",{class:"text-lg font-medium mb-6"},"申请售后服务",-1)),s("form",{onSubmit:mt(j,["prevent"]),class:"space-y-6"},[s("div",null,[_[29]||(_[29]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"选择订单",-1)),X(s("select",{"onUpdate:modelValue":_[2]||(_[2]=v=>d.value.orderId=v),required:"",class:"input-field"},[_[28]||(_[28]=s("option",{value:""},"请选择订单",-1)),(m(!0),g(se,null,ae(C.value,v=>(m(),g("option",{key:v.id,value:v.id},h(v.orderNo)+" - "+h(v.customerName),9,Hg))),128))],512),[[Tt,d.value.orderId]])]),s("div",null,[_[30]||(_[30]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"服务类型",-1)),s("div",zg,[(m(),g(se,null,ae(p,v=>s("label",{key:v.value,class:ie(["relative flex cursor-pointer rounded-lg border bg-white p-4 shadow-sm focus:outline-none",d.value.serviceType===v.value?"border-primary-600 ring-2 ring-primary-600":"border-gray-300"])},[X(s("input",{"onUpdate:modelValue":_[3]||(_[3]=S=>d.value.serviceType=S),type:"radio",value:v.value,class:"sr-only"},null,8,qg),[[ci,d.value.serviceType]]),s("div",Wg,[s("div",Gg,[s("span",Jg,h(v.label),1),s("span",Kg,h(v.description),1)])])],2)),64))])]),s("div",null,[_[31]||(_[31]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"问题描述",-1)),X(s("textarea",{"onUpdate:modelValue":_[4]||(_[4]=v=>d.value.description=v),rows:"4",required:"",class:"input-field",placeholder:"请详细描述遇到的问题，以便我们更好地为您服务"},null,512),[[le,d.value.description]])]),s("div",Zg,[s("div",null,[_[32]||(_[32]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"联系人",-1)),X(s("input",{"onUpdate:modelValue":_[5]||(_[5]=v=>d.value.contactName=v),type:"text",required:"",class:"input-field",placeholder:"请输入联系人姓名"},null,512),[[le,d.value.contactName]])]),s("div",null,[_[33]||(_[33]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"联系电话",-1)),X(s("input",{"onUpdate:modelValue":_[6]||(_[6]=v=>d.value.contactPhone=v),type:"tel",required:"",class:"input-field",placeholder:"请输入联系电话"},null,512),[[le,d.value.contactPhone]])])]),s("div",Qg,[s("button",{type:"submit",disabled:l.value,class:"btn-primary"},h(l.value?"提交中...":"提交申请"),9,Yg),s("button",{type:"button",onClick:_[7]||(_[7]=v=>i.value=!1),class:"btn-secondary"}," 取消 ")])],32)])):O("",!0)])])):O("",!0)])])}}},eh={class:"min-h-screen bg-gray-100 p-8"},th={class:"max-w-4xl mx-auto"},sh={class:"bg-white rounded-lg p-6 mb-6"},oh={class:"space-y-2"},nh={class:"bg-white rounded-lg p-6 mb-6"},rh={key:0,class:"mt-4 p-4 bg-gray-100 rounded"},lh={class:"text-sm overflow-auto"},ih={class:"bg-white rounded-lg p-6"},ah={class:"text-lg font-semibold mb-4"},ch={key:0,class:"text-gray-500"},dh={key:1,class:"space-y-4"},uh={class:"grid grid-cols-2 gap-4 text-sm"},fh={__name:"OrdersDebug",setup(e){const t=Ne(),o=Xt(),n=B([]),r=B(null),l=()=>{const u=o.checkLoginStatus();console.log("登录状态检查结果:",u),alert(`登录状态: ${u?"已登录":"未登录"}`)},c=()=>{t.push("/login?redirect="+encodeURIComponent("/orders-debug"))},a=async()=>{if(!o.token){alert("无用户令牌，请先登录");return}try{const d=await(await fetch("/api/users/orders",{headers:{Authorization:`Bearer ${o.token}`,"Content-Type":"application/json"}})).json();r.value=d,d.success&&d.data&&d.data.orders&&(n.value=d.data.orders,n.value.forEach(f=>{if(typeof f.items=="string")try{f.items=JSON.parse(f.items)}catch(p){console.error("解析订单商品失败:",p),f.items=[]}})),console.log("API 测试结果:",d)}catch(u){console.error("API 测试失败:",u),r.value={error:u.message}}},i=async()=>{var u,d;if(!o.token){alert("无用户令牌，请先登录");return}try{const f={customerName:((u=o.user)==null?void 0:u.name)||"测试用户",phone:((d=o.user)==null?void 0:d.phone)||"13800000000",address:"测试地址123号",items:[{productId:999,productName:"调试测试产品",quantity:1,price:100,priceUnit:"个"}],totalAmount:100,notes:"这是调试页面创建的测试订单"},x=await(await fetch("/api/orders",{method:"POST",headers:{Authorization:`Bearer ${o.token}`,"Content-Type":"application/json"},body:JSON.stringify(f)})).json();r.value=x,x.success?(alert("订单创建成功！"),await a()):alert("订单创建失败: "+x.message),console.log("创建订单结果:",x)}catch(f){console.error("创建订单失败:",f),r.value={error:f.message}}};return De(()=>{console.log("调试页面加载完成"),console.log("当前用户状态:",{isLoggedIn:o.isLoggedIn,user:o.user,hasToken:!!o.token})}),(u,d)=>(m(),g("div",eh,[s("div",th,[d[14]||(d[14]=s("h1",{class:"text-2xl font-bold mb-6"},"订单系统调试页面",-1)),s("div",sh,[d[3]||(d[3]=s("h2",{class:"text-lg font-semibold mb-4"},"用户登录状态",-1)),s("div",oh,[s("p",null,[d[0]||(d[0]=s("strong",null,"是否登录:",-1)),Z(" "+h(z(o).isLoggedIn?"✅ 是":"❌ 否"),1)]),s("p",null,[d[1]||(d[1]=s("strong",null,"用户信息:",-1)),Z(" "+h(z(o).user||"无"),1)]),s("p",null,[d[2]||(d[2]=s("strong",null,"令牌:",-1)),Z(" "+h(z(o).token?"有令牌":"无令牌"),1)])]),s("div",{class:"mt-4 space-x-4"},[s("button",{onClick:l,class:"bg-blue-500 text-white px-4 py-2 rounded"}," 检查登录状态 "),s("button",{onClick:c,class:"bg-green-500 text-white px-4 py-2 rounded"}," 去登录 ")])]),s("div",nh,[d[5]||(d[5]=s("h2",{class:"text-lg font-semibold mb-4"},"API 测试",-1)),s("div",{class:"space-x-4 mb-4"},[s("button",{onClick:a,class:"bg-purple-500 text-white px-4 py-2 rounded"}," 测试用户订单API "),s("button",{onClick:i,class:"bg-orange-500 text-white px-4 py-2 rounded"}," 测试创建订单 ")]),r.value?(m(),g("div",rh,[d[4]||(d[4]=s("h3",{class:"font-semibold mb-2"},"API 结果:",-1)),s("pre",lh,h(JSON.stringify(r.value,null,2)),1)])):O("",!0)]),s("div",ih,[s("h2",ah,"订单数据 ("+h(n.value.length)+" 条)",1),n.value.length===0?(m(),g("div",ch," 暂无订单数据 ")):(m(),g("div",dh,[(m(!0),g(se,null,ae(n.value,f=>(m(),g("div",{key:f.id,class:"border border-gray-200 rounded p-4"},[s("div",uh,[s("div",null,[d[6]||(d[6]=s("strong",null,"订单ID:",-1)),Z(" "+h(f.id),1)]),s("div",null,[d[7]||(d[7]=s("strong",null,"订单号:",-1)),Z(" "+h(f.orderNo),1)]),s("div",null,[d[8]||(d[8]=s("strong",null,"客户名:",-1)),Z(" "+h(f.customerName),1)]),s("div",null,[d[9]||(d[9]=s("strong",null,"电话:",-1)),Z(" "+h(f.phone),1)]),s("div",null,[d[10]||(d[10]=s("strong",null,"状态:",-1)),Z(" "+h(f.status),1)]),s("div",null,[d[11]||(d[11]=s("strong",null,"金额:",-1)),Z(" ¥"+h(f.totalAmount),1)]),s("div",null,[d[12]||(d[12]=s("strong",null,"创建时间:",-1)),Z(" "+h(f.createdAt),1)]),s("div",null,[d[13]||(d[13]=s("strong",null,"商品数量:",-1)),Z(" "+h(f.items?f.items.length:"无"),1)])])]))),128))]))])])]))}},ph={class:"min-h-screen bg-gray-50 flex flex-col"},mh={class:"bg-white shadow-sm border-b px-4 py-3"},gh={class:"flex items-center justify-between max-w-4xl mx-auto"},hh={class:"flex items-center space-x-3"},vh={class:"flex items-center space-x-2"},xh={class:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center"},yh={class:"text-xs text-gray-500"},bh={class:"flex items-center space-x-2"},_h=["disabled"],wh={class:"flex-1 overflow-hidden"},kh={class:"max-w-4xl mx-auto h-full flex flex-col"},$h={class:"max-w-xs lg:max-w-md"},Ch={class:"text-sm whitespace-pre-wrap"},Sh={class:"text-xs text-gray-500"},Mh={class:"text-xs text-gray-400"},Th={key:0,class:"flex justify-start"},Ph={class:"border-t bg-white p-4"},jh={class:"flex items-end space-x-3"},Ih={class:"flex-1"},Ah=["disabled"],Eh=["disabled"],Oh={__name:"Chat",setup(e){const t=Ne(),o=Xt(),n=B([]),r=B(""),l=B(""),c=B(!1),a=B(!1),i=B(!1),u=B(!1),d=B(null),f=B(null),p=()=>"session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),x=async()=>{try{c.value=!1;let k=localStorage.getItem("chat_session_id");k||(k=p(),localStorage.setItem("chat_session_id",k));const S=await(await fetch("/api/chat/session",{method:"POST",headers:{"Content-Type":"application/json",...o.token&&{Authorization:`Bearer ${o.token}`}},body:JSON.stringify({sessionId:k})})).json();S.success&&(l.value=S.data.sessionId,n.value=S.data.messages||[],c.value=!0,n.value.length===0&&await C(),await pt(),j())}catch(k){console.error("初始化会话失败:",k)}},C=async()=>{var k,v;try{const P=await(await fetch("/api/chat/message",{method:"POST",headers:{"Content-Type":"application/json",...o.token&&{Authorization:`Bearer ${o.token}`}},body:JSON.stringify({sessionId:l.value,message:"你好",userName:(k=o.user)==null?void 0:k.name,userPhone:(v=o.user)==null?void 0:v.phone})})).json();P.success&&(n.value.push(P.data.userMessage),n.value.push(P.data.aiMessage),await pt(),j())}catch(S){console.error("发送欢迎消息失败:",S)}},I=async()=>{var v,S;if(!r.value.trim()||i.value)return;const k=r.value.trim();r.value="",i.value=!0,a.value=!0;try{const Q=await(await fetch("/api/chat/message",{method:"POST",headers:{"Content-Type":"application/json",...o.token&&{Authorization:`Bearer ${o.token}`}},body:JSON.stringify({sessionId:l.value,message:k,userName:(v=o.user)==null?void 0:v.name,userPhone:(S=o.user)==null?void 0:S.phone})})).json();Q.success&&(n.value.push(Q.data.userMessage),await pt(),j(),setTimeout(()=>{a.value=!1,n.value.push(Q.data.aiMessage),Q.data.needHuman&&console.log("检测到需要人工服务，标记消息为待处理"),pt(()=>{j()})},1e3))}catch(P){console.error("发送消息失败:",P),a.value=!1}finally{i.value=!1}},E=async()=>{if(!u.value){u.value=!0;try{(await(await fetch(`/api/chat/request-human/${l.value}`,{method:"POST",headers:{"Content-Type":"application/json",...o.token&&{Authorization:`Bearer ${o.token}`}},body:JSON.stringify({message:"用户请求转接人工客服"})})).json()).success&&await M()}catch(k){console.error("转接人工失败:",k)}finally{u.value=!1}}},M=async()=>{try{const v=await(await fetch(`/api/chat/history/${l.value}`)).json();v.success&&(n.value=v.data.messages,await pt(),j())}catch(k){console.error("加载消息失败:",k)}},$=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),I())},j=()=>{d.value&&(d.value.scrollTop=d.value.scrollHeight)},R=k=>k.senderType==="user"?"justify-end":"justify-start",U=k=>k.senderType==="user"?"bg-primary-600 text-white":k.senderType==="ai"?"bg-gray-200 text-gray-900":"bg-green-100 text-green-800",A=k=>k.senderType==="user"?k.userName||"我":k.senderType==="ai"?"AI助手":"人工客服",y=k=>{const v=new Date(k),P=new Date-v;return P<6e4?"刚刚":P<36e5?Math.floor(P/6e4)+"分钟前":v.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},_=()=>{t.go(-1)};return De(()=>{x()}),(k,v)=>(m(),g("div",ph,[s("div",mh,[s("div",gh,[s("div",hh,[s("button",{onClick:_,class:"p-2 hover:bg-gray-100 rounded-full"},[F(z(yu),{class:"w-5 h-5 text-gray-600"})]),s("div",vh,[s("div",xh,[F(z(ys),{class:"w-5 h-5 text-primary-600"})]),s("div",null,[v[1]||(v[1]=s("h1",{class:"font-semibold text-gray-900"},"在线客服",-1)),s("p",yh,h(c.value?"在线":"连接中..."),1)])])]),s("div",bh,[s("button",{onClick:E,disabled:u.value,class:"px-3 py-1.5 text-sm bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 disabled:opacity-50 transition-colors"},h(u.value?"转接中...":"转人工"),9,_h)])])]),s("div",wh,[s("div",kh,[s("div",{ref_key:"messagesContainer",ref:d,class:"flex-1 overflow-y-auto px-4 py-4 space-y-4"},[(m(!0),g(se,null,ae(n.value,S=>(m(),g("div",{key:S.id,class:ie(["flex",R(S)])},[s("div",$h,[s("div",{class:ie(["px-4 py-2 rounded-2xl",U(S)])},[s("p",Ch,h(S.message),1)],2),s("div",{class:ie(["flex items-center space-x-2 mt-1 px-2",R(S)])},[s("span",Sh,h(A(S)),1),s("span",Mh,h(y(S.createdAt)),1)],2)])],2))),128)),a.value?(m(),g("div",Th,v[2]||(v[2]=[Oe('<div class="max-w-xs lg:max-w-md" data-v-b6f2495d><div class="bg-gray-200 px-4 py-2 rounded-2xl" data-v-b6f2495d><div class="flex space-x-1" data-v-b6f2495d><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" data-v-b6f2495d></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-b6f2495d></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-b6f2495d></div></div></div><div class="text-xs text-gray-500 mt-1 px-2" data-v-b6f2495d>AI助手正在输入...</div></div>',1)]))):O("",!0)],512),s("div",Ph,[s("div",jh,[s("div",Ih,[X(s("textarea",{"onUpdate:modelValue":v[0]||(v[0]=S=>r.value=S),ref_key:"messageTextarea",ref:f,onKeydown:$,disabled:i.value,class:"w-full px-4 py-2 border border-gray-300 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:opacity-50",placeholder:"输入消息...",rows:"1"},null,40,Ah),[[le,r.value]])]),s("button",{onClick:I,disabled:!r.value.trim()||i.value,class:"p-2 bg-primary-600 text-white rounded-full hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[F(z(ku),{class:"w-5 h-5"})],8,Eh)])])])])]))}},Rh=tt(Oh,[["__scopeId","data-v-b6f2495d"]]),Nh={class:"min-h-screen bg-gray-100 flex items-center justify-center"},Vh={class:"max-w-md w-full bg-white rounded-lg shadow-md p-8"},Lh=["disabled"],Uh={key:0},Bh={key:1},Dh={key:0,class:"mt-4 p-3 bg-red-100 border border-red-300 rounded-md"},Fh={class:"text-red-700 text-sm"},Hh={__name:"AdminLogin",setup(e){const t=Ne(),o=B("admin"),n=B("123456"),r=B(!1),l=B(""),c=async()=>{r.value=!0,l.value="";try{const a=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o.value,password:n.value})});if(a.ok){const i=await a.json();localStorage.setItem("admin_token",i.token),t.push("/admin")}else try{const i=await a.json();l.value=i.message||"登录失败"}catch{l.value=`登录失败 (${a.status}): ${a.statusText}`}}catch(a){console.error("Login error:",a),l.value="网络错误，请稍后重试"}finally{r.value=!1}};return(a,i)=>(m(),g("div",Nh,[s("div",Vh,[i[4]||(i[4]=s("div",{class:"text-center mb-8"},[s("h1",{class:"text-2xl font-bold text-gray-900"},"管理员登录"),s("p",{class:"text-gray-600 mt-2"},"宝得利门窗管理系统")],-1)),s("form",{onSubmit:mt(c,["prevent"]),class:"space-y-6"},[s("div",null,[i[2]||(i[2]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"用户名",-1)),X(s("input",{"onUpdate:modelValue":i[0]||(i[0]=u=>o.value=u),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"请输入用户名"},null,512),[[le,o.value]])]),s("div",null,[i[3]||(i[3]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"密码",-1)),X(s("input",{"onUpdate:modelValue":i[1]||(i[1]=u=>n.value=u),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"请输入密码"},null,512),[[le,n.value]])]),s("button",{type:"submit",disabled:r.value,class:"w-full bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[r.value?(m(),g("span",Uh,"登录中...")):(m(),g("span",Bh,"登录"))],8,Lh)],32),l.value?(m(),g("div",Dh,[s("p",Fh,h(l.value),1)])):O("",!0),i[5]||(i[5]=s("div",{class:"mt-6 text-center text-sm text-gray-500"},[s("p",null,"默认账号：admin"),s("p",null,"默认密码：123456")],-1))])]))}},zh={class:"min-h-screen bg-gray-100"},qh={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},Wh={class:"mb-12"},Gh={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Jh={class:"mb-12"},Kh={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Zh={class:"mt-12"},Qh={class:"grid grid-cols-1 md:grid-cols-5 gap-6"},Yh={class:"bg-white rounded-lg shadow p-6"},Xh={class:"flex items-center"},ev={class:"ml-4"},tv={class:"text-2xl font-semibold text-gray-900"},sv={class:"bg-white rounded-lg shadow p-6"},ov={class:"flex items-center"},nv={class:"ml-4"},rv={class:"text-2xl font-semibold text-gray-900"},lv={class:"bg-white rounded-lg shadow p-6"},iv={class:"flex items-center"},av={class:"ml-4"},cv={class:"text-2xl font-semibold text-gray-900"},dv={class:"bg-white rounded-lg shadow p-6"},uv={class:"flex items-center"},fv={class:"ml-4"},pv={class:"text-2xl font-semibold text-gray-900"},mv={class:"bg-white rounded-lg shadow p-6"},gv={class:"flex items-center"},hv={class:"ml-4"},vv={class:"text-2xl font-semibold text-gray-900"},xv={__name:"AdminHome",setup(e){const t=Ne(),o=B({totalProducts:0,totalOrders:0,pendingOrders:0,todayAppointments:0,totalUsers:0,activeUsers:0}),n=()=>localStorage.getItem("admin_token")?!0:(t.push("/admin/login"),!1),r=a=>{t.push(a)},l=()=>{localStorage.removeItem("admin_token"),t.push("/admin/login")},c=async()=>{try{const a=localStorage.getItem("admin_token"),i=await fetch("/api/admin/stats",{headers:{Authorization:`Bearer ${a}`}});if(i.ok){const u=await i.json();o.value=u.data||u}else i.status===401||i.status===403?(localStorage.removeItem("admin_token"),t.push("/admin/login")):console.error("获取统计数据失败:",i.status,i.statusText)}catch(a){console.error("Failed to fetch stats:",a)}};return De(()=>{n()&&c()}),(a,i)=>(m(),g("div",zh,[s("header",{class:"bg-white shadow-sm border-b"},[s("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[s("div",{class:"flex justify-between items-center h-16"},[i[7]||(i[7]=s("div",{class:"flex items-center"},[s("h1",{class:"text-xl font-semibold text-gray-900"},"宝得利门窗管理系统")],-1)),s("div",{class:"flex items-center space-x-4"},[i[6]||(i[6]=s("span",{class:"text-sm text-gray-700"},"欢迎，管理员",-1)),s("button",{onClick:l,class:"text-sm text-red-600 hover:text-red-700 font-medium"}," 退出登录 ")])])])]),s("main",qh,[i[27]||(i[27]=s("div",{class:"mb-8"},[s("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"管理中心"),s("p",{class:"text-gray-600"},"选择功能模块进行管理")],-1)),s("div",Wh,[i[11]||(i[11]=Oe('<div class="mb-6"><h3 class="text-xl font-semibold text-gray-900 mb-2 flex items-center"><div class="w-6 h-6 bg-blue-500 rounded-lg flex items-center justify-center mr-3"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> 售前服务 </h3><p class="text-gray-600 ml-9">产品展示、客户咨询、用户管理等售前相关功能</p></div>',1)),s("div",Gh,[s("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:i[0]||(i[0]=u=>r("/admin/chat"))},i[8]||(i[8]=[Oe('<div class="p-6"><div class="flex items-center"><div class="flex-shrink-0"><div class="w-8 h-8 bg-orange-500 bg-opacity-20 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div></div><div class="ml-4"><h4 class="text-lg leading-6 font-medium text-gray-900">消息咨询</h4><p class="mt-2 text-sm text-gray-500">处理用户咨询和在线客服</p></div></div></div><div class="bg-gray-50 px-6 py-3"><div class="text-sm"><span class="text-orange-600 font-medium">进入管理 →</span></div></div>',2)])),s("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:i[1]||(i[1]=u=>r("/admin/products"))},i[9]||(i[9]=[Oe('<div class="p-6"><div class="flex items-center"><div class="flex-shrink-0"><div class="w-8 h-8 bg-blue-500 bg-opacity-20 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div></div><div class="ml-4"><h4 class="text-lg leading-6 font-medium text-gray-900">商品管理</h4><p class="mt-2 text-sm text-gray-500">管理门窗产品信息、价格、库存等</p></div></div></div><div class="bg-gray-50 px-6 py-3"><div class="text-sm"><span class="text-blue-600 font-medium">进入管理 →</span></div></div>',2)])),s("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:i[2]||(i[2]=u=>r("/admin/users"))},i[10]||(i[10]=[Oe('<div class="p-6"><div class="flex items-center"><div class="flex-shrink-0"><div class="w-8 h-8 bg-indigo-500 bg-opacity-20 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path></svg></div></div><div class="ml-4"><h4 class="text-lg leading-6 font-medium text-gray-900">用户管理</h4><p class="mt-2 text-sm text-gray-500">管理注册用户信息和订单历史</p></div></div></div><div class="bg-gray-50 px-6 py-3"><div class="text-sm"><span class="text-indigo-600 font-medium">进入管理 →</span></div></div>',2)]))])]),s("div",Jh,[i[15]||(i[15]=Oe('<div class="mb-6"><h3 class="text-xl font-semibold text-gray-900 mb-2 flex items-center"><div class="w-6 h-6 bg-green-500 rounded-lg flex items-center justify-center mr-3"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> 售后服务 </h3><p class="text-gray-600 ml-9">订单处理、合同生成、预约安排等售后相关功能</p></div>',1)),s("div",Kh,[s("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:i[3]||(i[3]=u=>r("/admin/orders"))},i[12]||(i[12]=[Oe('<div class="p-6"><div class="flex items-center"><div class="flex-shrink-0"><div class="w-8 h-8 bg-green-500 bg-opacity-20 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div></div><div class="ml-4"><h4 class="text-lg leading-6 font-medium text-gray-900">订单管理</h4><p class="mt-2 text-sm text-gray-500">查看客户订单、处理订单流程</p></div></div></div><div class="bg-gray-50 px-6 py-3"><div class="text-sm"><span class="text-green-600 font-medium">进入管理 →</span></div></div>',2)])),s("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:i[4]||(i[4]=u=>r("/admin/contracts"))},i[13]||(i[13]=[Oe('<div class="p-6"><div class="flex items-center"><div class="flex-shrink-0"><div class="w-8 h-8 bg-red-500 bg-opacity-20 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div></div><div class="ml-4"><h4 class="text-lg leading-6 font-medium text-gray-900">合同生成</h4><p class="mt-2 text-sm text-gray-500">生成和管理客户合同文件</p></div></div></div><div class="bg-gray-50 px-6 py-3"><div class="text-sm"><span class="text-red-600 font-medium">进入管理 →</span></div></div>',2)])),s("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:i[5]||(i[5]=u=>r("/admin/appointments"))},i[14]||(i[14]=[Oe('<div class="p-6"><div class="flex items-center"><div class="flex-shrink-0"><div class="w-8 h-8 bg-purple-500 bg-opacity-20 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div></div><div class="ml-4"><h4 class="text-lg leading-6 font-medium text-gray-900">预约管理</h4><p class="mt-2 text-sm text-gray-500">管理客户预约时间和安排</p></div></div></div><div class="bg-gray-50 px-6 py-3"><div class="text-sm"><span class="text-purple-600 font-medium">进入管理 →</span></div></div>',2)]))])]),s("div",Zh,[i[26]||(i[26]=s("h3",{class:"text-lg font-medium text-gray-900 mb-6"},"系统概览",-1)),s("div",Qh,[s("div",Yh,[s("div",Xh,[i[17]||(i[17]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})])])],-1)),s("div",ev,[i[16]||(i[16]=s("p",{class:"text-sm font-medium text-gray-600"},"总商品数",-1)),s("p",tv,h(o.value.totalProducts),1)])])]),s("div",sv,[s("div",ov,[i[19]||(i[19]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm1 2a1 1 0 000 2h6a1 1 0 100-2H7zm6 7a1 1 0 011 1v3a1 1 0 11-2 0v-3a1 1 0 011-1zm-3 3a1 1 0 100 2h.01a1 1 0 100-2H10zm-4 1a1 1 0 011-1h.01a1 1 0 110 2H7a1 1 0 01-1-1zm1-4a1 1 0 100 2h.01a1 1 0 100-2H7zm2 1a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1zm4-4a1 1 0 100 2h.01a1 1 0 100-2H13z","clip-rule":"evenodd"})])])],-1)),s("div",nv,[i[18]||(i[18]=s("p",{class:"text-sm font-medium text-gray-600"},"总订单数",-1)),s("p",rv,h(o.value.totalOrders),1)])])]),s("div",lv,[s("div",iv,[i[21]||(i[21]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})])])],-1)),s("div",av,[i[20]||(i[20]=s("p",{class:"text-sm font-medium text-gray-600"},"待处理订单",-1)),s("p",cv,h(o.value.pendingOrders),1)])])]),s("div",dv,[s("div",uv,[i[23]||(i[23]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})])])],-1)),s("div",fv,[i[22]||(i[22]=s("p",{class:"text-sm font-medium text-gray-600"},"注册用户",-1)),s("p",pv,h(o.value.totalUsers),1)])])]),s("div",mv,[s("div",gv,[i[25]||(i[25]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])])],-1)),s("div",hv,[i[24]||(i[24]=s("p",{class:"text-sm font-medium text-gray-600"},"今日预约",-1)),s("p",vv,h(o.value.todayAppointments),1)])])])])])])]))}},yv={class:"space-y-4"},bv={key:0,class:"relative"},_v={class:"w-full h-48 border border-gray-300 rounded-lg overflow-hidden bg-gray-50"},wv=["src"],kv={key:1,class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-gray-400 transition-colors"},$v={class:"text-center"},Cv={class:"mt-4"},Sv={for:"file-upload",class:"cursor-pointer"},Mv={key:2,class:"w-full bg-gray-200 rounded-full h-2"},Tv={key:3,class:"text-red-600 text-sm"},Pv={class:"border-t pt-4"},jv={class:"group"},Iv={class:"mt-2"},Av={__name:"ImageUpload",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const o=e,n=t,r=B(o.modelValue),l=B(!1),c=B(0),a=B(""),i=B(""),u=B(null);ot(()=>o.modelValue,M=>{r.value=M}),ot(r,M=>{n("update:modelValue",M)});const d=M=>{const $=M.target.files[0];$&&f($)},f=async M=>{if(!M.type.startsWith("image/")){a.value="请选择图片文件";return}if(M.size>5*1024*1024){a.value="文件大小不能超过5MB";return}a.value="",l.value=!0,c.value=0;try{const $=new FormData;$.append("image",M);const j=localStorage.getItem("admin_token"),R=new XMLHttpRequest;R.upload.addEventListener("progress",U=>{U.lengthComputable&&(c.value=Math.round(U.loaded/U.total*100))}),R.onload=function(){if(R.status===200){const U=JSON.parse(R.responseText);U.success?(r.value=U.data.url,c.value=100):a.value=U.message||"上传失败"}else a.value="上传失败";l.value=!1},R.onerror=function(){a.value="网络错误，上传失败",l.value=!1},R.open("POST","/api/upload/image"),R.setRequestHeader("Authorization",`Bearer ${j}`),R.send($)}catch($){console.error("Upload error:",$),a.value="上传失败",l.value=!1}},p=()=>{r.value="",u.value&&(u.value.value="")},x=()=>{i.value&&C()},C=()=>{i.value&&(r.value=i.value,i.value="")},I=M=>M?(M.startsWith("http://")||M.startsWith("https://")||M.startsWith("/uploads/"),M):"",E=M=>{if(console.log("图片加载失败，尝试直接访问后端:",r.value),r.value&&r.value.startsWith("/uploads/")){const $=`http://localhost:3000${r.value}`;M.target.src=$,console.log("切换到直接访问:",$)}};return(M,$)=>(m(),g("div",yv,[r.value?(m(),g("div",bv,[s("div",_v,[s("img",{src:I(r.value),alt:"商品图片",class:"w-full h-full object-cover",onError:E},null,40,wv)]),s("button",{onClick:p,type:"button",class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors"},$[1]||($[1]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):O("",!0),r.value?O("",!0):(m(),g("div",kv,[s("div",$v,[$[3]||($[3]=s("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[s("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),s("div",Cv,[s("label",Sv,[$[2]||($[2]=s("span",{class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),Z(" 选择图片 ")],-1)),s("input",{id:"file-upload",name:"file-upload",type:"file",accept:"image/*",class:"sr-only",onChange:d,ref_key:"fileInput",ref:u},null,544)])]),$[4]||($[4]=s("p",{class:"mt-2 text-sm text-gray-500"},"或拖拽图片到此区域",-1)),$[5]||($[5]=s("p",{class:"text-xs text-gray-400"},"支持 PNG, JPG, JPEG, WEBP 格式，最大5MB",-1))])])),l.value?(m(),g("div",Mv,[s("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:wo(`width: ${c.value}%`)},null,4)])):O("",!0),a.value?(m(),g("div",Tv,h(a.value),1)):O("",!0),s("div",Pv,[s("details",jv,[$[6]||($[6]=s("summary",{class:"cursor-pointer text-sm text-gray-600 hover:text-gray-800"}," 或者输入图片URL ",-1)),s("div",Iv,[X(s("input",{"onUpdate:modelValue":$[0]||($[0]=j=>i.value=j),type:"url",placeholder:"https://example.com/image.jpg",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onBlur:x},null,544),[[le,i.value]]),s("button",{onClick:C,type:"button",class:"mt-2 text-sm text-blue-600 hover:text-blue-800"}," 使用此URL ")])])])]))}},Ev={class:"min-h-screen bg-gray-100"},Ov={class:"bg-white shadow-sm border-b"},Rv={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Nv={class:"flex justify-between items-center h-16"},Vv={class:"flex items-center space-x-4"},Lv={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Uv={class:"bg-white shadow-sm rounded-lg overflow-hidden"},Bv={class:"overflow-x-auto"},Dv={class:"min-w-full divide-y divide-gray-200"},Fv={class:"bg-white divide-y divide-gray-200"},Hv={class:"px-6 py-4 whitespace-nowrap"},zv={class:"flex items-center"},qv={class:"flex-shrink-0 h-16 w-16 relative"},Wv=["src","alt","onError","data-product-id"],Gv=["data-placeholder"],Jv={class:"ml-4 min-w-0 flex-1"},Kv={class:"text-sm font-medium text-gray-900 truncate"},Zv={class:"text-xs text-gray-500 line-clamp-2"},Qv={class:"px-6 py-4 whitespace-nowrap"},Yv={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"},Xv={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ex={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},tx={key:0},sx={key:0,class:"text-gray-400"},ox={key:1},nx={class:"px-4 py-4 whitespace-nowrap text-sm font-medium"},rx={class:"flex items-center space-x-2"},lx=["onClick"],ix=["onClick"],ax={key:0,class:"text-center py-8"},cx={key:1,class:"text-center py-12"},dx={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},ux={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},fx={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},px={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},mx={class:"sm:flex sm:items-start"},gx={class:"w-full"},hx={class:"text-lg leading-6 font-medium text-gray-900 mb-4"},vx={class:"space-y-4"},xx={class:"grid grid-cols-2 gap-4"},yx={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},bx=["disabled"],_x={key:1,class:"fixed inset-0 z-50 overflow-y-auto"},wx={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},kx={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},$x={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Cx={class:"sm:flex sm:items-start"},Sx={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Mx={class:"mt-2"},Tx={class:"text-sm text-gray-500"},Px={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},jx=["disabled"],Ix={__name:"ProductAdmin",setup(e){const t=Ne(),o=B([]),n=B(!1),r=B(!1),l=B(!1),c=B(!1),a=B(!1),i=B(!1),u=B(null),d=B(null),f=B({name:"",category:"",description:"",price:0,priceUnit:"平方米",image:"",specificationsText:"",colorsText:"",featuresText:""}),p=()=>localStorage.getItem("admin_token")?!0:(t.push("/admin/login"),!1),x=async()=>{n.value=!0;try{const A=localStorage.getItem("admin_token"),y=await fetch("/api/products",{headers:{Authorization:`Bearer ${A}`}});if(y.ok){const _=await y.json();o.value=_.data||[]}else y.status===401||y.status===403?(localStorage.removeItem("admin_token"),t.push("/admin/login")):console.error("获取商品失败:",y.status,y.statusText)}catch(A){console.error("Failed to fetch products:",A)}finally{n.value=!1}},C=()=>{f.value={name:"",category:"",description:"",price:0,priceUnit:"平方米",image:"",specificationsText:"",colorsText:"",featuresText:""}},I=()=>{r.value=!1,l.value=!1,d.value=null,C()},E=A=>{d.value=A,f.value={name:A.name||"",category:A.category||"",description:A.description||"",price:A.price||0,priceUnit:A.priceUnit||"平方米",image:A.image||"",specificationsText:A.specifications?A.specifications.join(", "):"",colorsText:A.colors?A.colors.join(", "):"",featuresText:A.features?A.features.join(", "):""},l.value=!0},M=async()=>{a.value=!0;try{const A=localStorage.getItem("admin_token"),y={...f.value,specifications:f.value.specificationsText?f.value.specificationsText.split(",").map(S=>S.trim()).filter(S=>S):[],colors:f.value.colorsText?f.value.colorsText.split(",").map(S=>S.trim()).filter(S=>S):[],features:f.value.featuresText?f.value.featuresText.split(",").map(S=>S.trim()).filter(S=>S):[]};delete y.specificationsText,delete y.colorsText,delete y.featuresText;const _=l.value?`/api/products/${d.value.id}`:"/api/products",k=l.value?"PUT":"POST",v=await fetch(_,{method:k,headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify(y)});if(v.ok)await x(),I();else{const S=await v.json();alert(S.message||"操作失败")}}catch(A){console.error("Failed to submit product:",A),alert("网络错误，请稍后重试")}finally{a.value=!1}},$=A=>{u.value=A,c.value=!0},j=async()=>{i.value=!0;try{const A=localStorage.getItem("admin_token"),y=await fetch(`/api/products/${u.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${A}`}});if(y.ok)await x(),c.value=!1,u.value=null;else{const _=await y.json();alert(_.message||"删除失败")}}catch(A){console.error("Failed to delete product:",A),alert("网络错误，请稍后重试")}finally{i.value=!1}},R=A=>A?(A.startsWith("http://")||A.startsWith("https://")||A.startsWith("/uploads/"),A):"",U=(A,y,_)=>{if(console.log("商品图片加载失败，尝试直接访问后端:",y),y&&y.startsWith("/uploads/")&&!A.target.dataset.retried){const k=`http://localhost:3000${y}`;A.target.src=k,A.target.dataset.retried="true",console.log("切换到直接访问:",k)}else{console.log("图片完全加载失败，显示占位符:",_),A.target.style.display="none";const k=document.querySelector(`[data-placeholder="${_}"]`);k&&(k.style.display="flex")}};return De(()=>{p()&&x()}),(A,y)=>{var k;const _=qe("router-link");return m(),g("div",Ev,[s("header",Ov,[s("div",Rv,[s("div",Nv,[s("div",Vv,[F(_,{to:"/admin",class:"text-gray-600 hover:text-gray-900"},{default:ye(()=>y[12]||(y[12]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[12]}),y[13]||(y[13]=s("h1",{class:"text-xl font-semibold text-gray-900"},"商品管理",-1))]),s("button",{onClick:y[0]||(y[0]=v=>r.value=!0),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"}," 添加商品 ")])])]),s("main",Lv,[s("div",Uv,[s("div",Bv,[s("table",Dv,[y[17]||(y[17]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"w-2/5 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 商品信息 "),s("th",{class:"w-1/6 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 类型 "),s("th",{class:"w-1/6 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 价格 "),s("th",{class:"w-1/6 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 尺寸 "),s("th",{class:"w-32 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 操作 ")])],-1)),s("tbody",Fv,[(m(!0),g(se,null,ae(o.value,v=>(m(),g("tr",{key:v.id},[s("td",Hv,[s("div",zv,[s("div",qv,[v.image?(m(),g("img",{key:0,class:"h-16 w-16 rounded-lg object-cover border border-gray-200",src:R(v.image),alt:v.name,onError:S=>U(S,v.image,v.id),"data-product-id":v.id},null,40,Wv)):O("",!0),X(s("div",{class:"h-16 w-16 rounded-lg bg-gray-100 border border-gray-200 flex items-center justify-center","data-placeholder":v.id},y[14]||(y[14]=[s("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]),8,Gv),[[Vs,!v.image]])]),s("div",Jv,[s("div",Kv,h(v.name),1),s("div",Zv,h(v.description&&v.description.length>50?v.description.substring(0,50)+"...":v.description||"暂无描述"),1)])])]),s("td",Qv,[s("span",Yv,h(v.category),1)]),s("td",Xv," ¥"+h(v.price)+" / "+h(v.priceUnit),1),s("td",ex,[v.specifications&&v.specifications.length?(m(),g("div",tx,[(m(!0),g(se,null,ae(v.specifications.slice(0,2),(S,P)=>(m(),g("span",{key:S},h(S)+h(P<v.specifications.slice(0,2).length-1?", ":""),1))),128)),v.specifications.length>2?(m(),g("span",sx,"...")):O("",!0)])):(m(),g("span",ox,"-"))]),s("td",nx,[s("div",rx,[s("button",{onClick:S=>E(v),class:"inline-flex items-center px-3 py-1 rounded-md text-xs font-medium bg-indigo-100 text-indigo-700 hover:bg-indigo-200 transition-colors",title:"编辑商品"},y[15]||(y[15]=[s("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Z(" 编辑 ")]),8,lx),s("button",{onClick:S=>$(v),class:"inline-flex items-center px-3 py-1 rounded-md text-xs font-medium bg-red-100 text-red-700 hover:bg-red-200 transition-colors",title:"删除商品"},y[16]||(y[16]=[s("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),Z(" 删除 ")]),8,ix)])])]))),128))])])]),n.value?(m(),g("div",ax,y[18]||(y[18]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),s("p",{class:"mt-2 text-sm text-gray-500"},"加载中...",-1)]))):O("",!0),!n.value&&o.value.length===0?(m(),g("div",cx,y[19]||(y[19]=[s("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),s("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"暂无商品",-1),s("p",{class:"mt-1 text-sm text-gray-500"},"开始添加您的第一个商品吧！",-1)]))):O("",!0)])]),r.value||l.value?(m(),g("div",dx,[s("div",ux,[s("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:I}),s("div",fx,[s("form",{onSubmit:mt(M,["prevent"])},[s("div",px,[s("div",mx,[s("div",gx,[s("h3",hx,h(r.value?"添加商品":"编辑商品"),1),s("div",vx,[s("div",null,[y[20]||(y[20]=s("label",{class:"block text-sm font-medium text-gray-700"},"商品名称",-1)),X(s("input",{"onUpdate:modelValue":y[1]||(y[1]=v=>f.value.name=v),type:"text",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[le,f.value.name]])]),s("div",null,[y[22]||(y[22]=s("label",{class:"block text-sm font-medium text-gray-700"},"分类",-1)),X(s("select",{"onUpdate:modelValue":y[2]||(y[2]=v=>f.value.category=v),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},y[21]||(y[21]=[Oe('<option value="" data-v-7c12e5d8>请选择分类</option><optgroup label="门类" data-v-7c12e5d8><option value="入户门" data-v-7c12e5d8>入户门</option><option value="房间门" data-v-7c12e5d8>房间门</option><option value="卫生间门" data-v-7c12e5d8>卫生间门</option><option value="厨房推拉门" data-v-7c12e5d8>厨房推拉门</option><option value="阳台推拉门" data-v-7c12e5d8>阳台推拉门</option><option value="折叠门" data-v-7c12e5d8>折叠门</option></optgroup><optgroup label="窗户类" data-v-7c12e5d8><option value="推拉窗" data-v-7c12e5d8>推拉窗</option><option value="平开窗" data-v-7c12e5d8>平开窗</option></optgroup><optgroup label="其他配件" data-v-7c12e5d8><option value="纱窗" data-v-7c12e5d8>纱窗</option><option value="防盗栏" data-v-7c12e5d8>防盗栏</option><option value="瓷膏" data-v-7c12e5d8>瓷膏</option></optgroup>',4)]),512),[[Tt,f.value.category]])]),s("div",null,[y[23]||(y[23]=s("label",{class:"block text-sm font-medium text-gray-700"},"描述",-1)),X(s("textarea",{"onUpdate:modelValue":y[3]||(y[3]=v=>f.value.description=v),rows:"3",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[le,f.value.description]])]),s("div",xx,[s("div",null,[y[24]||(y[24]=s("label",{class:"block text-sm font-medium text-gray-700"},"价格",-1)),X(s("input",{"onUpdate:modelValue":y[4]||(y[4]=v=>f.value.price=v),type:"number",step:"0.01",required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[le,f.value.price,void 0,{number:!0}]])]),s("div",null,[y[25]||(y[25]=s("label",{class:"block text-sm font-medium text-gray-700"},"价格单位",-1)),X(s("input",{"onUpdate:modelValue":y[5]||(y[5]=v=>f.value.priceUnit=v),type:"text",placeholder:"如：平方米",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[le,f.value.priceUnit]])])]),s("div",null,[y[26]||(y[26]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"商品图片",-1)),F(Av,{modelValue:f.value.image,"onUpdate:modelValue":y[6]||(y[6]=v=>f.value.image=v)},null,8,["modelValue"])]),s("div",null,[y[27]||(y[27]=s("label",{class:"block text-sm font-medium text-gray-700"},"规格（用逗号分隔）",-1)),X(s("input",{"onUpdate:modelValue":y[7]||(y[7]=v=>f.value.specificationsText=v),type:"text",placeholder:"如：800x2000mm, 900x2100mm",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[le,f.value.specificationsText]])]),s("div",null,[y[28]||(y[28]=s("label",{class:"block text-sm font-medium text-gray-700"},"颜色（用逗号分隔）",-1)),X(s("input",{"onUpdate:modelValue":y[8]||(y[8]=v=>f.value.colorsText=v),type:"text",placeholder:"如：白色, 黑色, 棕色",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[le,f.value.colorsText]])]),s("div",null,[y[29]||(y[29]=s("label",{class:"block text-sm font-medium text-gray-700"},"特点（用逗号分隔）",-1)),X(s("input",{"onUpdate:modelValue":y[9]||(y[9]=v=>f.value.featuresText=v),type:"text",placeholder:"如：防盗, 静音, 保温",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[le,f.value.featuresText]])])])])])]),s("div",yx,[s("button",{type:"submit",disabled:a.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},h(a.value?"提交中...":r.value?"添加":"保存"),9,bx),s("button",{type:"button",onClick:I,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," 取消 ")])],32)])])])):O("",!0),c.value?(m(),g("div",_x,[s("div",wx,[s("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:y[10]||(y[10]=v=>c.value=!1)}),s("div",kx,[s("div",$x,[s("div",Cx,[y[31]||(y[31]=s("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[s("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.728-.833-2.498 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),s("div",Sx,[y[30]||(y[30]=s("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"删除商品",-1)),s("div",Mx,[s("p",Tx,' 确定要删除 "'+h((k=u.value)==null?void 0:k.name)+'" 吗？此操作无法撤销。 ',1)])])])]),s("div",Px,[s("button",{onClick:j,disabled:i.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},h(i.value?"删除中...":"删除"),9,jx),s("button",{onClick:y[11]||(y[11]=v=>c.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," 取消 ")])])])])):O("",!0)])}}},Ax=tt(Ix,[["__scopeId","data-v-7c12e5d8"]]),Ex={class:"min-h-screen bg-gray-100"},Ox={class:"bg-white shadow-sm border-b"},Rx={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Nx={class:"flex justify-between items-center h-16"},Vx={class:"flex items-center space-x-4"},Lx={class:"flex items-center space-x-4"},Ux={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Bx={class:"bg-white shadow-sm rounded-lg overflow-hidden"},Dx={class:"overflow-x-auto"},Fx={class:"min-w-full divide-y divide-gray-200"},Hx={class:"bg-white divide-y divide-gray-200"},zx={class:"px-6 py-4 whitespace-nowrap"},qx={class:"text-sm font-medium text-gray-900"},Wx={class:"text-sm text-gray-500"},Gx={key:0,class:"text-xs text-blue-600 mt-1"},Jx={class:"px-6 py-4 whitespace-nowrap"},Kx={key:0,class:"text-sm font-medium text-green-600"},Zx={class:"flex items-center"},Qx={class:"text-xs text-gray-500 mt-1"},Yx={key:1,class:"text-sm text-gray-500"},Xx={class:"px-6 py-4 whitespace-nowrap"},ey={class:"text-sm text-gray-900"},ty={key:0,class:"text-sm text-gray-500"},sy={class:"px-6 py-4"},oy={class:"text-sm text-gray-900 max-w-xs"},ny={key:0},ry={class:"font-medium"},ly={class:"text-gray-500"},iy={key:0},ay={key:1},cy={key:1,class:"text-gray-500"},dy={key:2,class:"text-xs text-blue-600 mt-2"},uy={class:"text-sm font-medium text-gray-900 mt-2"},fy={class:"px-6 py-4 whitespace-nowrap"},py=["value","onChange"],my={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},gy={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},hy=["onClick"],vy={key:0,class:"text-center py-8"},xy={key:1,class:"text-center py-12"},yy={class:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6"},by={class:"bg-white rounded-lg shadow p-6"},_y={class:"flex items-center"},wy={class:"ml-4"},ky={class:"text-2xl font-semibold text-gray-900"},$y={class:"bg-white rounded-lg shadow p-6"},Cy={class:"flex items-center"},Sy={class:"ml-4"},My={class:"text-2xl font-semibold text-gray-900"},Ty={class:"bg-white rounded-lg shadow p-6"},Py={class:"flex items-center"},jy={class:"ml-4"},Iy={class:"text-2xl font-semibold text-gray-900"},Ay={__name:"OrderAdmin",setup(e){const t=Ne(),o=B([]),n=B(!1),r=B(""),l=B(""),c=fe(()=>{const x=o.value.filter(E=>!E.status||E.status==="pending").length,C=o.value.filter(E=>["measuring","measured","producing","installing"].includes(E.status)).length,I=o.value.filter(E=>E.status==="completed").length;return{pending:x,contacted:C,completed:I}}),a=()=>localStorage.getItem("admin_token")?!0:(t.push("/admin/login"),!1),i=async()=>{n.value=!0;try{const x=localStorage.getItem("admin_token");let C="/api/orders";const I=new URLSearchParams;r.value&&I.append("status",r.value),l.value&&I.append("date",l.value),I.toString()&&(C+="?"+I.toString());const E=await fetch(C,{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});if(E.ok){const M=await E.json();M.success?(o.value=M.data||[],o.value.forEach($=>{if(typeof $.items=="string")try{$.items=JSON.parse($.items)}catch(j){console.error("解析订单商品失败:",j),$.items=[]}})):console.error("获取订单失败:",M.message)}else E.status===401||E.status===403?(localStorage.removeItem("admin_token"),t.push("/admin/login")):console.error("获取订单失败:",E.status,E.statusText)}catch(x){console.error("Failed to fetch orders:",x)}finally{n.value=!1}},u=async(x,C)=>{try{const I=localStorage.getItem("admin_token");if((await fetch(`/api/orders/${x}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I}`},body:JSON.stringify({status:C})})).ok){const M=o.value.findIndex($=>$.id===x);M!==-1&&(o.value[M].status=C)}else alert("状态更新失败")}catch(I){console.error("Failed to update order status:",I),alert("网络错误，请稍后重试")}},d=x=>{switch(x){case"pending":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"measuring":return"text-blue-600 bg-blue-50 border-blue-200";case"measured":return"text-indigo-600 bg-indigo-50 border-indigo-200";case"producing":return"text-purple-600 bg-purple-50 border-purple-200";case"installing":return"text-orange-600 bg-orange-50 border-orange-200";case"completed":return"text-green-600 bg-green-50 border-green-200";case"cancelled":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},f=x=>x?new Date(x).toLocaleString("zh-CN"):"-",p=x=>{t.push(`/admin/contracts?orderId=${x.id}`)};return De(()=>{a()&&i()}),(x,C)=>{const I=qe("router-link");return m(),g("div",Ex,[s("header",Ox,[s("div",Rx,[s("div",Nx,[s("div",Vx,[F(I,{to:"/admin",class:"text-gray-600 hover:text-gray-900"},{default:ye(()=>C[2]||(C[2]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[2]}),C[3]||(C[3]=s("h1",{class:"text-xl font-semibold text-gray-900"},"订单管理",-1))]),s("div",Lx,[X(s("select",{"onUpdate:modelValue":C[0]||(C[0]=E=>r.value=E),onChange:i,class:"border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"},C[4]||(C[4]=[s("option",{value:""},"全部状态",-1),s("option",{value:"pending"},"待处理",-1),s("option",{value:"contacted"},"已联系",-1),s("option",{value:"completed"},"已完成",-1)]),544),[[Tt,r.value]]),X(s("input",{"onUpdate:modelValue":C[1]||(C[1]=E=>l.value=E),onChange:i,type:"date",class:"border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"},null,544),[[le,l.value]])])])])]),s("main",Ux,[s("div",Bx,[s("div",Dx,[s("table",Fx,[C[8]||(C[8]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 客户信息 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 用户名 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 联系方式 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 订单详情 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 状态 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 下单时间 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 操作 ")])],-1)),s("tbody",Hx,[(m(!0),g(se,null,ae(o.value,E=>(m(),g("tr",{key:E.id},[s("td",zx,[s("div",qx,h(E.customerName),1),s("div",Wx,h(E.address),1),E.orderNo?(m(),g("div",Gx,"订单号: "+h(E.orderNo),1)):O("",!0)]),s("td",Jx,[E.user?(m(),g("div",Kx,[s("div",Zx,[C[5]||(C[5]=s("div",{class:"w-2 h-2 bg-green-500 rounded-full mr-2"},null,-1)),Z(" "+h(E.user.name),1)]),s("div",Qx," 注册用户 ID: "+h(E.user.id),1)])):(m(),g("div",Yx,C[6]||(C[6]=[s("div",{class:"flex items-center"},[s("div",{class:"w-2 h-2 bg-gray-400 rounded-full mr-2"}),Z(" 游客用户 ")],-1),s("div",{class:"text-xs text-gray-500 mt-1"}," 未登录下单 ",-1)])))]),s("td",Xx,[s("div",ey,h(E.phone),1),E.wechatId?(m(),g("div",ty," 微信: "+h(E.wechatId),1)):O("",!0)]),s("td",sy,[s("div",oy,[E.items&&Array.isArray(E.items)?(m(),g("div",ny,[(m(!0),g(se,null,ae(E.items,M=>(m(),g("div",{key:M.productId||M.id,class:"mb-2"},[s("div",ry,h(M.productName||M.name),1),s("div",ly,[Z(" 数量: "+h(M.quantity)+" ",1),M.color?(m(),g("span",iy," | 颜色: "+h(M.color),1)):O("",!0),M.specification?(m(),g("span",ay," | 规格: "+h(M.specification),1)):O("",!0)])]))),128))])):(m(),g("div",cy," 订单详情解析失败 ")),E.notes?(m(),g("div",dy," 备注: "+h(E.notes),1)):O("",!0)]),s("div",uy," 总金额: ¥"+h(E.totalAmount||0),1)]),s("td",fy,[s("select",{value:E.status||"pending",onChange:M=>u(E.id,M.target.value),class:ie(["text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",d(E.status||"pending")])},C[7]||(C[7]=[Oe('<option value="pending">待处理</option><option value="measuring">测量中</option><option value="measured">已测量</option><option value="producing">生产中</option><option value="installing">安装中</option><option value="completed">已完成</option><option value="cancelled">已取消</option>',7)]),42,py)]),s("td",my,h(f(E.createdAt)),1),s("td",gy,[s("button",{onClick:M=>p(E),class:"text-red-600 hover:text-red-900 bg-red-50 hover:bg-red-100 px-3 py-1 rounded-md border border-red-200"}," 生成合同 ",8,hy)])]))),128))])])]),n.value?(m(),g("div",vy,C[9]||(C[9]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),s("p",{class:"mt-2 text-sm text-gray-500"},"加载中...",-1)]))):O("",!0),!n.value&&o.value.length===0?(m(),g("div",xy,C[10]||(C[10]=[s("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),s("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"暂无订单",-1),s("p",{class:"mt-1 text-sm text-gray-500"},"还没有收到任何订单。",-1)]))):O("",!0)]),s("div",yy,[s("div",by,[s("div",_y,[C[12]||(C[12]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})])])],-1)),s("div",wy,[C[11]||(C[11]=s("p",{class:"text-sm font-medium text-gray-600"},"待处理订单",-1)),s("p",ky,h(c.value.pending),1)])])]),s("div",$y,[s("div",Cy,[C[14]||(C[14]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])])],-1)),s("div",Sy,[C[13]||(C[13]=s("p",{class:"text-sm font-medium text-gray-600"},"处理中订单",-1)),s("p",My,h(c.value.contacted),1)])])]),s("div",Ty,[s("div",Py,[C[16]||(C[16]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])])],-1)),s("div",jy,[C[15]||(C[15]=s("p",{class:"text-sm font-medium text-gray-600"},"已完成订单",-1)),s("p",Iy,h(c.value.completed),1)])])])])])])}}},Ey={class:"min-h-screen bg-gray-50"},Oy={class:"bg-white shadow-sm"},Ry={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ny={class:"flex justify-between items-center py-6"},Vy={class:"flex items-center"},Ly={class:"flex items-center space-x-4"},Uy={class:"text-sm text-gray-500"},By={class:"text-sm text-green-600"},Dy={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Fy={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},Hy={class:"flex flex-col sm:flex-row gap-4"},zy={class:"flex-1"},qy={class:"flex gap-2"},Wy={class:"bg-white rounded-lg shadow-sm overflow-hidden"},Gy={key:0,class:"p-8 text-center"},Jy={key:1,class:"p-8 text-center text-gray-500"},Ky={key:2,class:"overflow-x-auto"},Zy={class:"min-w-full divide-y divide-gray-200"},Qy={class:"bg-white divide-y divide-gray-200"},Yy={class:"px-6 py-4 whitespace-nowrap"},Xy={class:"flex items-center"},e2={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},t2={class:"ml-4"},s2={class:"text-sm font-medium text-gray-900"},o2={class:"text-sm text-gray-500"},n2={class:"px-6 py-4 whitespace-nowrap"},r2={class:"text-sm text-gray-900"},l2={class:"text-sm text-gray-500"},i2={class:"px-6 py-4"},a2={class:"text-sm text-gray-900"},c2={class:"text-sm text-gray-500 max-w-xs truncate"},d2={class:"px-6 py-4 whitespace-nowrap"},u2={class:"text-sm text-gray-900"},f2={class:"text-sm text-gray-500"},p2={class:"px-6 py-4 whitespace-nowrap"},m2={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},g2={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},h2={class:"flex items-center space-x-2"},v2=["onClick"],x2=["onClick","title"],y2={key:3,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},b2={class:"flex items-center justify-between"},_2={class:"flex items-center text-sm text-gray-700"},w2={class:"flex items-center space-x-2"},k2=["disabled"],$2={class:"px-3 py-1 text-sm text-gray-700"},C2=["disabled"],S2={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50"},M2={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-96 overflow-y-auto"},T2={class:"px-6 py-4 border-b border-gray-200"},P2={class:"flex items-center justify-between"},j2={key:0,class:"px-6 py-4"},I2={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},A2={class:"mt-1 text-sm text-gray-900"},E2={class:"mt-1 text-sm text-gray-900"},O2={class:"mt-1 text-sm text-gray-900"},R2={class:"mt-1 text-sm text-gray-900"},N2={class:"md:col-span-2"},V2={class:"mt-1 text-sm text-gray-900"},L2={class:"mt-1 text-sm text-gray-900"},U2={class:"mt-1 text-sm text-gray-900"},B2={class:"mt-1 text-sm text-gray-900"},D2={class:"mt-1 text-sm text-gray-900"},F2={key:0,class:"mt-6"},H2={class:"space-y-2"},z2={class:"text-sm font-medium text-gray-900"},q2={class:"text-xs text-gray-500"},W2={class:"text-right"},G2={class:"text-sm font-medium text-gray-900"},J2={__name:"UserAdmin",setup(e){const t=Ne(),o=B([]),n=B(!1),r=B(""),l=B(""),c=B(!1),a=B(null),i=B({page:1,limit:10,total:0,pages:0}),u=fe(()=>({total:i.value.total,active:o.value.filter(_=>_.status==="active").length})),d=B(null),f=()=>{clearTimeout(d.value),d.value=setTimeout(()=>{i.value.page=1,x()},300)},p=()=>localStorage.getItem("admin_token"),x=async()=>{n.value=!0;try{const _=p();if(!_){t.push("/admin/login");return}const k=new URLSearchParams({page:i.value.page,limit:i.value.limit,search:r.value,status:l.value}),S=await(await fetch(`/api/admin/users?${k}`,{headers:{Authorization:`Bearer ${_}`}})).json();if(S.success)o.value=S.data.users,i.value=S.data.pagination;else throw new Error(S.message)}catch(_){console.error("加载用户列表失败:",_),alert("加载用户列表失败: "+_.message)}finally{n.value=!1}},C=()=>{r.value="",l.value="",i.value.page=1,x()},I=_=>{_>=1&&_<=i.value.pages&&(i.value.page=_,x())},E=async _=>{try{const k=p(),S=await(await fetch(`/api/admin/users/${_.id}`,{headers:{Authorization:`Bearer ${k}`}})).json();if(S.success)a.value=S.data,c.value=!0;else throw new Error(S.message)}catch(k){console.error("获取用户详情失败:",k),alert("获取用户详情失败: "+k.message)}},M=()=>{c.value=!1,a.value=null},$=async _=>{const k=_.status==="active"?"inactive":"active",v=k==="active"?"启用":"禁用";if(confirm(`确定要${v}用户 ${_.name} 吗？`))try{const S=p(),Q=await(await fetch(`/api/admin/users/${_.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({status:k})})).json();if(Q.success)_.status=k,alert(`用户${v}成功`);else throw new Error(Q.message)}catch(S){console.error("更新用户状态失败:",S),alert("更新用户状态失败: "+S.message)}},j=_=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",banned:"bg-red-100 text-red-800"})[_]||"bg-gray-100 text-gray-800",R=_=>({active:"正常",inactive:"禁用",banned:"封禁"})[_]||"未知",U=_=>({pending:"bg-yellow-100 text-yellow-800",contacted:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[_]||"bg-gray-100 text-gray-800",A=_=>({pending:"待联系",contacted:"已联系",completed:"已完成",cancelled:"已取消"})[_]||"未知",y=_=>_?new Date(_).toLocaleString("zh-CN"):"-";return De(()=>{x()}),(_,k)=>{const v=qe("router-link");return m(),g("div",Ey,[s("div",Oy,[s("div",Ry,[s("div",Ny,[s("div",Vy,[F(v,{to:"/admin",class:"mr-4"},{default:ye(()=>[F(z(Vn),{class:"w-6 h-6 text-gray-400 hover:text-gray-600"})]),_:1}),k[4]||(k[4]=s("h1",{class:"text-2xl font-bold text-gray-900"},"用户管理",-1))]),s("div",Ly,[s("span",Uy,"总用户数："+h(u.value.total),1),s("span",By,"活跃用户："+h(u.value.active),1)])])])]),s("div",Dy,[s("div",Fy,[s("div",Hy,[s("div",zy,[X(s("input",{"onUpdate:modelValue":k[0]||(k[0]=S=>r.value=S),type:"text",placeholder:"搜索用户姓名或手机号...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",onInput:f},null,544),[[le,r.value]])]),s("div",qy,[X(s("select",{"onUpdate:modelValue":k[1]||(k[1]=S=>l.value=S),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",onChange:x},k[5]||(k[5]=[s("option",{value:""},"全部状态",-1),s("option",{value:"active"},"正常",-1),s("option",{value:"inactive"},"禁用",-1),s("option",{value:"banned"},"封禁",-1)]),544),[[Tt,l.value]]),s("button",{onClick:C,class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"}," 重置 ")])])]),s("div",Wy,[n.value?(m(),g("div",Gy,k[6]||(k[6]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"},null,-1),s("p",{class:"mt-2 text-gray-500"},"加载中...",-1)]))):o.value.length===0?(m(),g("div",Jy," 暂无用户数据 ")):(m(),g("div",Ky,[s("table",Zy,[k[7]||(k[7]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 用户信息 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 联系方式 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 地址信息 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 订单统计 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 状态 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 最后登录 "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 操作 ")])],-1)),s("tbody",Qy,[(m(!0),g(se,null,ae(o.value,S=>(m(),g("tr",{key:S.id,class:"hover:bg-gray-50"},[s("td",Yy,[s("div",Xy,[s("div",e2,[F(z(Ct),{class:"w-5 h-5 text-primary-600"})]),s("div",t2,[s("div",s2,h(S.name),1),s("div",o2,"ID: "+h(S.id),1)])])]),s("td",n2,[s("div",r2,h(S.phone),1),s("div",l2,h(S.wechatId||"未填写"),1)]),s("td",i2,[s("div",a2,h(S.district||"-"),1),s("div",c2,h(S.address||"-"),1)]),s("td",d2,[s("div",u2,h(S.totalOrders)+" 单",1),s("div",f2,"¥"+h(S.totalAmount||"0.00"),1)]),s("td",p2,[s("span",{class:ie([j(S.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},h(R(S.status)),3)]),s("td",m2,h(y(S.lastLoginAt)),1),s("td",g2,[s("div",h2,[s("button",{onClick:P=>E(S),class:"text-primary-600 hover:text-primary-900",title:"查看详情"},[F(z(vo),{class:"w-4 h-4"})],8,v2),s("button",{onClick:P=>$(S),class:ie(S.status==="active"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),title:S.status==="active"?"禁用用户":"启用用户"},[(m(),Pe(Ua(S.status==="active"?z(hn):z(Mi)),{class:"w-4 h-4"}))],10,x2)])])]))),128))])])])),i.value.pages>1?(m(),g("div",y2,[s("div",b2,[s("div",_2," 显示第 "+h((i.value.page-1)*i.value.limit+1)+" - "+h(Math.min(i.value.page*i.value.limit,i.value.total))+" 条， 共 "+h(i.value.total)+" 条记录 ",1),s("div",w2,[s("button",{onClick:k[2]||(k[2]=S=>I(i.value.page-1)),disabled:i.value.page===1,class:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," 上一页 ",8,k2),s("span",$2," 第 "+h(i.value.page)+" / "+h(i.value.pages)+" 页 ",1),s("button",{onClick:k[3]||(k[3]=S=>I(i.value.page+1)),disabled:i.value.page===i.value.pages,class:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," 下一页 ",8,C2)])])])):O("",!0)])]),c.value?(m(),g("div",S2,[s("div",M2,[s("div",T2,[s("div",P2,[k[8]||(k[8]=s("h3",{class:"text-lg font-medium text-gray-900"},"用户详情",-1)),s("button",{onClick:M,class:"text-gray-400 hover:text-gray-600"},[F(z(hn),{class:"w-6 h-6"})])])]),a.value?(m(),g("div",j2,[s("div",I2,[s("div",null,[k[9]||(k[9]=s("label",{class:"block text-sm font-medium text-gray-700"},"姓名",-1)),s("p",A2,h(a.value.name),1)]),s("div",null,[k[10]||(k[10]=s("label",{class:"block text-sm font-medium text-gray-700"},"手机号",-1)),s("p",E2,h(a.value.phone),1)]),s("div",null,[k[11]||(k[11]=s("label",{class:"block text-sm font-medium text-gray-700"},"微信号",-1)),s("p",O2,h(a.value.wechatId||"未填写"),1)]),s("div",null,[k[12]||(k[12]=s("label",{class:"block text-sm font-medium text-gray-700"},"所在区域",-1)),s("p",R2,h(a.value.district||"未填写"),1)]),s("div",N2,[k[13]||(k[13]=s("label",{class:"block text-sm font-medium text-gray-700"},"详细地址",-1)),s("p",V2,h(a.value.address||"未填写"),1)]),s("div",null,[k[14]||(k[14]=s("label",{class:"block text-sm font-medium text-gray-700"},"总订单数",-1)),s("p",L2,h(a.value.totalOrders)+" 单",1)]),s("div",null,[k[15]||(k[15]=s("label",{class:"block text-sm font-medium text-gray-700"},"总消费金额",-1)),s("p",U2,"¥"+h(a.value.totalAmount||"0.00"),1)]),s("div",null,[k[16]||(k[16]=s("label",{class:"block text-sm font-medium text-gray-700"},"注册时间",-1)),s("p",B2,h(y(a.value.createdAt)),1)]),s("div",null,[k[17]||(k[17]=s("label",{class:"block text-sm font-medium text-gray-700"},"最后登录",-1)),s("p",D2,h(y(a.value.lastLoginAt)),1)])]),a.value.orders&&a.value.orders.length>0?(m(),g("div",F2,[k[18]||(k[18]=s("h4",{class:"text-md font-medium text-gray-900 mb-3"},"最近订单",-1)),s("div",H2,[(m(!0),g(se,null,ae(a.value.orders.slice(0,5),S=>(m(),g("div",{key:S.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[s("div",null,[s("div",z2,h(S.orderNo),1),s("div",q2,h(y(S.createdAt)),1)]),s("div",W2,[s("div",G2,"¥"+h(S.totalAmount),1),s("span",{class:ie([U(S.status),"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium"])},h(A(S.status)),3)])]))),128))])])):O("",!0)])):O("",!0)])])):O("",!0)])}}},K2=tt(J2,[["__scopeId","data-v-b797aa24"]]),Z2={class:"min-h-screen bg-gray-50"},Q2={class:"bg-white shadow-sm border-b"},Y2={class:"container mx-auto px-4 py-6"},X2={class:"flex items-center space-x-4"},eb={class:"container mx-auto px-4 py-8"},tb={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},sb={class:"bg-white rounded-lg shadow-md p-6"},ob={class:"flex items-center"},nb={class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},rb={class:"ml-4"},lb={class:"text-2xl font-bold text-secondary-900"},ib={class:"bg-white rounded-lg shadow-md p-6"},ab={class:"flex items-center"},cb={class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},db={class:"ml-4"},ub={class:"text-2xl font-bold text-secondary-900"},fb={class:"bg-white rounded-lg shadow-md p-6"},pb={class:"flex items-center"},mb={class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},gb={class:"ml-4"},hb={class:"text-2xl font-bold text-secondary-900"},vb={class:"bg-white rounded-lg shadow-md p-6"},xb={class:"flex items-center"},yb={class:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},bb={class:"ml-4"},_b={class:"text-2xl font-bold text-secondary-900"},wb={class:"bg-white rounded-lg shadow-md"},kb={class:"px-6 py-4 border-b border-gray-200"},$b={class:"flex items-center justify-between"},Cb={class:"flex space-x-1"},Sb={class:"flex space-x-2"},Mb=["disabled"],Tb={key:0,class:"p-8 text-center"},Pb={key:1},jb={key:0,class:"divide-y divide-gray-200"},Ib=["onClick"],Ab={class:"flex items-start space-x-4"},Eb={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},Ob={class:"flex-1 min-w-0"},Rb={class:"flex items-center justify-between"},Nb={class:"flex items-center space-x-2"},Vb={class:"text-sm font-medium text-secondary-900"},Lb={key:0,class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},Ub={class:"text-xs text-gray-500"},Bb={class:"mt-1 text-sm text-secondary-600 truncate"},Db={class:"mt-2 flex items-center space-x-4"},Fb={class:"text-xs text-gray-500"},Hb={key:1,class:"p-8 text-center"},zb={key:2},qb={key:0,class:"divide-y divide-gray-200"},Wb={class:"flex items-start space-x-4"},Gb={class:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center"},Jb={class:"flex-1 min-w-0"},Kb={class:"flex items-center justify-between"},Zb={class:"flex items-center space-x-2"},Qb={class:"text-sm font-medium text-secondary-900"},Yb={key:0,class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},Xb={class:"text-xs text-gray-500"},e_={class:"mt-1 text-sm text-secondary-600 truncate"},t_={class:"mt-2 flex items-center justify-between"},s_={class:"flex items-center space-x-4"},o_={class:"text-xs text-gray-500"},n_={class:"text-xs text-gray-500"},r_={class:"flex space-x-2"},l_=["onClick"],i_=["onClick"],a_={key:1,class:"p-8 text-center"},c_={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},d_={class:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col"},u_={class:"px-6 py-4 border-b border-gray-200"},f_={class:"flex items-center justify-between"},p_={class:"flex items-center space-x-3"},m_={class:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center"},g_={class:"text-lg font-medium text-gray-900"},h_={class:"text-sm text-gray-500"},v_={class:"flex-1 overflow-y-auto p-6"},x_={class:"space-y-4"},y_={class:"max-w-xs lg:max-w-md"},b_={class:"text-sm whitespace-pre-wrap"},__={class:"text-xs text-gray-500"},w_={class:"text-xs text-gray-400"},k_={class:"px-6 py-4 border-t border-gray-200"},$_={class:"flex space-x-3 mb-3"},C_={class:"flex flex-col space-y-2"},S_=["disabled"],M_=["disabled"],T_={__name:"ChatAdmin",setup(e){const t=B(!1),o=B("pending"),n=B([]),r=B([]),l=B(null),c=B([]),a=B(""),i=B(!1),u=B(!1),d=B(0),f=B(0),p=B(0),x=B(0),C=async()=>{t.value=!0;try{const S=localStorage.getItem("admin_token"),Q=await(await fetch("/api/chat/admin/pending",{headers:{Authorization:`Bearer ${S}`}})).json();Q.success&&(n.value=Q.data.sessions,d.value=Q.data.total)}catch(S){console.error("获取待处理消息失败:",S)}finally{t.value=!1}},I=async()=>{t.value=!0;try{const S=localStorage.getItem("admin_token"),Q=await(await fetch("/api/chat/admin/active-sessions",{headers:{Authorization:`Bearer ${S}`}})).json();Q.success&&(r.value=Q.data.sessions,f.value=Q.data.total)}catch(S){console.error("获取活跃会话失败:",S)}finally{t.value=!1}},E=async S=>{l.value=S;try{const Q=await(await fetch(`/api/chat/history/${S.sessionId}`)).json();Q.success&&(c.value=Q.data.messages)}catch(P){console.error("获取会话历史失败:",P)}},M=async S=>{var P,Q;l.value={sessionId:S.sessionId,userName:(P=S.latestMessage)==null?void 0:P.userName,userPhone:(Q=S.latestMessage)==null?void 0:Q.userPhone};try{const Se=await(await fetch(`/api/chat/history/${S.sessionId}`)).json();Se.success&&(c.value=Se.data.messages)}catch(ee){console.error("获取会话历史失败:",ee)}},$=async()=>{if(!(!a.value.trim()||i.value)){i.value=!0;try{const S=localStorage.getItem("admin_token"),Q=await(await fetch("/api/chat/admin/reply",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({sessionId:l.value.sessionId,message:a.value.trim()})})).json();Q.success?(a.value="",A(),await y()):alert(Q.message||"发送回复失败")}catch(S){console.error("发送回复失败:",S),alert("网络错误，请稍后重试")}finally{i.value=!1}}},j=async S=>{if(confirm("确定要结束这个会话吗？"))try{const P=localStorage.getItem("admin_token"),ee=await(await fetch(`/api/chat/admin/end-session/${S}`,{method:"POST",headers:{Authorization:`Bearer ${P}`}})).json();ee.success?await y():alert(ee.message||"结束会话失败")}catch(P){console.error("结束会话失败:",P),alert("网络错误，请稍后重试")}},R=async()=>{var S;(S=l.value)!=null&&S.sessionId&&(await j(l.value.sessionId),A())},U=async()=>{if(confirm("确定要清理所有超时会话吗？这将结束3分钟内无活动的会话。")){u.value=!0;try{const S=localStorage.getItem("admin_token"),Q=await(await fetch("/api/chat/admin/cleanup-timeout",{method:"POST",headers:{Authorization:`Bearer ${S}`}})).json();Q.success?(alert(Q.message),await y()):alert(Q.message||"清理失败")}catch(S){console.error("清理超时会话失败:",S),alert("网络错误，请稍后重试")}finally{u.value=!1}}},A=()=>{l.value=null,c.value=[],a.value=""},y=async()=>{o.value==="pending"?await C():o.value==="active"&&await I()},_=S=>S.senderType==="user"?"bg-primary-600 text-white":S.senderType==="ai"?"bg-gray-200 text-gray-900":"bg-green-100 text-green-800",k=S=>S.senderType==="user"?S.userName||"用户":S.senderType==="ai"?"AI助手":"人工客服",v=S=>new Date(S).toLocaleString("zh-CN");return De(()=>{C(),I()}),(S,P)=>{const Q=qe("router-link");return m(),g("div",Z2,[s("div",Q2,[s("div",Y2,[s("div",X2,[F(Q,{to:"/admin",class:"text-gray-600 hover:text-gray-900"},{default:ye(()=>P[3]||(P[3]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[3]}),P[4]||(P[4]=s("div",null,[s("h1",{class:"text-2xl font-bold text-gray-900"},"客服管理"),s("p",{class:"text-gray-600 mt-1"},"处理用户咨询和在线客服")],-1))])])]),s("div",eb,[s("div",tb,[s("div",sb,[s("div",ob,[s("div",nb,[F(z(ys),{class:"w-6 h-6 text-blue-600"})]),s("div",rb,[P[5]||(P[5]=s("p",{class:"text-sm font-medium text-secondary-600"},"待处理咨询",-1)),s("p",lb,h(d.value),1)])])]),s("div",ib,[s("div",ab,[s("div",cb,[F(z(ys),{class:"w-6 h-6 text-orange-600"})]),s("div",db,[P[6]||(P[6]=s("p",{class:"text-sm font-medium text-secondary-600"},"活跃会话",-1)),s("p",ub,h(f.value),1)])])]),s("div",fb,[s("div",pb,[s("div",mb,[F(z(Gr),{class:"w-6 h-6 text-green-600"})]),s("div",gb,[P[7]||(P[7]=s("p",{class:"text-sm font-medium text-secondary-600"},"今日处理",-1)),s("p",hb,h(p.value),1)])])]),s("div",vb,[s("div",xb,[s("div",yb,[F(z(Cu),{class:"w-6 h-6 text-purple-600"})]),s("div",bb,[P[8]||(P[8]=s("p",{class:"text-sm font-medium text-secondary-600"},"活跃用户",-1)),s("p",_b,h(x.value),1)])])])]),s("div",wb,[s("div",kb,[s("div",$b,[s("div",Cb,[s("button",{onClick:P[0]||(P[0]=ee=>o.value="pending"),class:ie(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",o.value==="pending"?"bg-primary-600 text-white":"text-gray-500 hover:text-gray-700"])}," 待处理咨询 ("+h(d.value)+") ",3),s("button",{onClick:P[1]||(P[1]=ee=>o.value="active"),class:ie(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",o.value==="active"?"bg-primary-600 text-white":"text-gray-500 hover:text-gray-700"])}," 活跃会话 ("+h(f.value)+") ",3)]),s("div",Sb,[s("button",{onClick:U,class:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm",disabled:u.value},h(u.value?"清理中...":"清理超时会话"),9,Mb),s("button",{onClick:y,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors text-sm"}," 刷新 ")])])]),t.value?(m(),g("div",Tb,P[9]||(P[9]=[s("div",{class:"inline-flex items-center space-x-2 text-gray-500"},[s("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),s("span",null,"加载中...")],-1)]))):O("",!0),o.value==="pending"?(m(),g("div",Pb,[n.value.length>0?(m(),g("div",jb,[(m(!0),g(se,null,ae(n.value,ee=>(m(),g("div",{key:ee.id,class:"p-6 hover:bg-gray-50 cursor-pointer",onClick:Se=>E(ee)},[s("div",Ab,[s("div",Eb,[F(z(Ct),{class:"w-6 h-6 text-primary-600"})]),s("div",Ob,[s("div",Rb,[s("div",Nb,[s("p",Vb,h(ee.userName||"访客"),1),ee.userPhone?(m(),g("span",Lb,h(ee.userPhone),1)):O("",!0)]),s("p",Ub,h(v(ee.createdAt)),1)]),s("p",Bb,h(ee.message),1),s("div",Db,[P[10]||(P[10]=s("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"}," 待处理 ",-1)),s("span",Fb," 会话ID: "+h(ee.sessionId),1)])])])],8,Ib))),128))])):(m(),g("div",Hb,[F(z(Gr),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),P[11]||(P[11]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"暂无待处理咨询",-1)),P[12]||(P[12]=s("p",{class:"text-gray-500"},"所有咨询都已处理完毕",-1))]))])):o.value==="active"?(m(),g("div",zb,[r.value.length>0?(m(),g("div",qb,[(m(!0),g(se,null,ae(r.value,ee=>{var Se,he,de;return m(),g("div",{key:ee.sessionId,class:"p-6 hover:bg-gray-50"},[s("div",Wb,[s("div",Gb,[F(z(ys),{class:"w-6 h-6 text-orange-600"})]),s("div",Jb,[s("div",Kb,[s("div",Zb,[s("p",Qb,h(((Se=ee.latestMessage)==null?void 0:Se.userName)||"访客"),1),(he=ee.latestMessage)!=null&&he.userPhone?(m(),g("span",Yb,h(ee.latestMessage.userPhone),1)):O("",!0)]),s("p",Xb,h(v(ee.lastActivity)),1)]),s("p",e_,h((de=ee.latestMessage)==null?void 0:de.message),1),s("div",t_,[s("div",s_,[P[13]||(P[13]=s("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800"}," 活跃中 ",-1)),s("span",o_," 会话ID: "+h(ee.sessionId),1),s("span",n_," 待回复: "+h(ee.pendingCount),1)]),s("div",r_,[s("button",{onClick:ge=>M(ee),class:"px-3 py-1 bg-primary-600 text-white text-xs rounded hover:bg-primary-700 transition-colors"}," 回复 ",8,l_),s("button",{onClick:ge=>j(ee.sessionId),class:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors"}," 结束 ",8,i_)])])])])])}),128))])):(m(),g("div",a_,[F(z(ys),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),P[14]||(P[14]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"暂无活跃会话",-1)),P[15]||(P[15]=s("p",{class:"text-gray-500"},"当前没有进行中的人工对话",-1))]))])):O("",!0)]),l.value?(m(),g("div",c_,[s("div",d_,[s("div",u_,[s("div",f_,[s("div",p_,[s("div",m_,[F(z(Ct),{class:"w-6 h-6 text-primary-600"})]),s("div",null,[s("h3",g_,h(l.value.userName||"访客"),1),s("p",h_,h(l.value.userPhone||"未留手机号"),1)])]),s("button",{onClick:A,class:"text-gray-400 hover:text-gray-600"},[F(z(hn),{class:"w-6 h-6"})])])]),s("div",v_,[s("div",x_,[(m(!0),g(se,null,ae(c.value,ee=>(m(),g("div",{key:ee.id,class:ie(["flex",ee.senderType==="user"?"justify-end":"justify-start"])},[s("div",y_,[s("div",{class:ie(["px-4 py-2 rounded-2xl",_(ee)])},[s("p",b_,h(ee.message),1)],2),s("div",{class:ie(["flex items-center space-x-2 mt-1 px-2",ee.senderType==="user"?"justify-end":"justify-start"])},[s("span",__,h(k(ee)),1),s("span",w_,h(v(ee.createdAt)),1)],2)])],2))),128))])]),s("div",k_,[s("div",$_,[X(s("textarea",{"onUpdate:modelValue":P[2]||(P[2]=ee=>a.value=ee),class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"输入回复内容...",rows:"3"},null,512),[[le,a.value]]),s("div",C_,[s("button",{onClick:$,disabled:!a.value.trim()||i.value,class:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},h(i.value?"发送中...":"发送"),9,S_),s("button",{onClick:R,disabled:i.value,class:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm"}," 结束会话 ",8,M_)])]),P[16]||(P[16]=s("div",{class:"text-xs text-gray-500"}," 💡 提示：回复后会话将保持活跃状态，3分钟无新消息后自动结束 ",-1))])])])):O("",!0)])])}}},P_={name:"AppointmentAdmin",data(){return{activeTab:"measurements",statistics:{},measurements:{orders:[],total:0,page:1,totalPages:1},installations:{orders:[],total:0,page:1,totalPages:1},measurementFilters:{status:"all",date:""},installationFilters:{status:"all",date:""},scheduleModal:{show:!1,type:"",order:null,scheduledTime:"",notes:""},completeModal:{show:!1,type:"",order:null,notes:""}}},mounted(){this.loadStatistics(),this.loadMeasurements(),this.loadInstallations()},methods:{async loadStatistics(){try{const e=localStorage.getItem("admin_token"),t=await fetch("/api/appointments/statistics",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const o=await t.json();this.statistics=o.data}}catch(e){console.error("加载统计数据失败:",e)}},async loadMeasurements(e=1){try{const t=localStorage.getItem("admin_token"),o=new URLSearchParams({page:e.toString(),status:this.measurementFilters.status,date:this.measurementFilters.date}),n=await fetch(`/api/appointments/measurements?${o}`,{headers:{Authorization:`Bearer ${t}`}});if(n.ok){const r=await n.json();this.measurements=r.data}}catch(t){console.error("加载测量列表失败:",t)}},async loadInstallations(e=1){try{const t=localStorage.getItem("admin_token"),o=new URLSearchParams({page:e.toString(),status:this.installationFilters.status,date:this.installationFilters.date}),n=await fetch(`/api/appointments/installations?${o}`,{headers:{Authorization:`Bearer ${t}`}});if(n.ok){const r=await n.json();this.installations=r.data}}catch(t){console.error("加载安装列表失败:",t)}},resetMeasurementFilters(){this.measurementFilters={status:"all",date:""},this.loadMeasurements()},resetInstallationFilters(){this.installationFilters={status:"all",date:""},this.loadInstallations()},openScheduleModal(e,t){this.scheduleModal={show:!0,type:e,order:t,scheduledTime:"",notes:""}},closeScheduleModal(){this.scheduleModal={show:!1,type:"",order:null,scheduledTime:"",notes:""}},async confirmSchedule(){try{const e=localStorage.getItem("admin_token"),{type:t,order:o,scheduledTime:n,notes:r}=this.scheduleModal,l=await fetch(`/api/appointments/${t}s/${o.id}/schedule`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({scheduledTime:n,notes:r})});if(l.ok)alert("预约安排成功！"),this.closeScheduleModal(),this.loadStatistics(),t==="measurement"?this.loadMeasurements():this.loadInstallations();else{const c=await l.json();alert(c.message||"安排预约失败")}}catch(e){console.error("安排预约失败:",e),alert("安排预约失败")}},openCompleteModal(e,t){this.completeModal={show:!0,type:e,order:t,notes:""}},closeCompleteModal(){this.completeModal={show:!1,type:"",order:null,notes:""}},async confirmComplete(){try{const e=localStorage.getItem("admin_token"),{type:t,order:o,notes:n}=this.completeModal,r=await fetch(`/api/appointments/${t}s/${o.id}/complete`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({notes:n})});if(r.ok)alert(`${t==="measurement"?"测量":"安装"}完成记录成功！`),this.closeCompleteModal(),this.loadStatistics(),t==="measurement"?this.loadMeasurements():this.loadInstallations();else{const l=await r.json();alert(l.message||"完成记录失败")}}catch(e){console.error("完成记录失败:",e),alert("完成记录失败")}},formatDateTime(e){return e?new Date(e).toLocaleString("zh-CN"):"-"},getStatusClass(e){return{pending:"bg-gray-100 text-gray-800",measuring:"bg-blue-100 text-blue-800",measured:"bg-green-100 text-green-800",producing:"bg-yellow-100 text-yellow-800",installing:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"},getStatusText(e){return{pending:"待处理",measuring:"测量中",measured:"已测量",producing:"生产中",installing:"安装中",completed:"已完成",cancelled:"已取消"}[e]||e}}},j_={class:"min-h-screen bg-gray-50"},I_={class:"bg-white shadow-sm border-b"},A_={class:"container mx-auto px-4 py-6"},E_={class:"flex items-center space-x-4"},O_={class:"container mx-auto px-4 py-8"},R_={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},N_={class:"bg-white rounded-lg shadow p-6"},V_={class:"flex items-center"},L_={class:"ml-4"},U_={class:"text-2xl font-semibold text-gray-900"},B_={class:"bg-white rounded-lg shadow p-6"},D_={class:"flex items-center"},F_={class:"ml-4"},H_={class:"text-2xl font-semibold text-gray-900"},z_={class:"bg-white rounded-lg shadow p-6"},q_={class:"flex items-center"},W_={class:"ml-4"},G_={class:"text-2xl font-semibold text-gray-900"},J_={class:"bg-white rounded-lg shadow p-6"},K_={class:"flex items-center"},Z_={class:"ml-4"},Q_={class:"text-2xl font-semibold text-gray-900"},Y_={class:"bg-white rounded-lg shadow"},X_={class:"border-b border-gray-200"},ew={class:"-mb-px flex"},tw={class:"p-6"},sw={key:0},ow={class:"flex flex-wrap gap-4 mb-6"},nw={class:"space-y-4"},rw={class:"flex justify-between items-start"},lw={class:"flex-1"},iw={class:"flex items-center space-x-4 mb-2"},aw={class:"font-medium text-gray-900"},cw={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600"},dw={key:0},uw={key:1},fw={class:"flex space-x-2 ml-4"},pw=["onClick"],mw=["onClick"],gw={key:0,class:"flex justify-center mt-6"},hw={class:"flex space-x-2"},vw=["onClick"],xw={key:1},yw={class:"flex flex-wrap gap-4 mb-6"},bw={class:"space-y-4"},_w={class:"flex justify-between items-start"},ww={class:"flex-1"},kw={class:"flex items-center space-x-4 mb-2"},$w={class:"font-medium text-gray-900"},Cw={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600"},Sw={key:0},Mw={key:1},Tw={key:2},Pw={class:"flex space-x-2 ml-4"},jw=["onClick"],Iw=["onClick"],Aw={key:0,class:"flex justify-center mt-6"},Ew={class:"flex space-x-2"},Ow=["onClick"],Rw={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Nw={class:"bg-white rounded-lg p-6 w-full max-w-md"},Vw={class:"text-lg font-semibold mb-4"},Lw={class:"space-y-4"},Uw={class:"flex justify-end space-x-3 mt-6"},Bw=["disabled"],Dw={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Fw={class:"bg-white rounded-lg p-6 w-full max-w-md"},Hw={class:"text-lg font-semibold mb-4"},zw={class:"space-y-4"},qw={class:"flex justify-end space-x-3 mt-6"};function Ww(e,t,o,n,r,l){const c=qe("router-link");return m(),g("div",j_,[s("div",I_,[s("div",A_,[s("div",E_,[F(c,{to:"/admin",class:"text-gray-600 hover:text-gray-900"},{default:ye(()=>t[19]||(t[19]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[19]}),t[20]||(t[20]=s("div",null,[s("h1",{class:"text-2xl font-bold text-gray-900"},"预约管理"),s("p",{class:"text-gray-600 mt-1"},"管理测量和安装预约")],-1))])])]),s("div",O_,[s("div",R_,[s("div",N_,[s("div",V_,[t[22]||(t[22]=s("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),s("div",L_,[t[21]||(t[21]=s("p",{class:"text-sm font-medium text-gray-600"},"今日测量",-1)),s("p",U_,h(r.statistics.todayMeasurements||0),1)])])]),s("div",B_,[s("div",D_,[t[24]||(t[24]=s("div",{class:"p-3 rounded-full bg-green-100 text-green-600"},[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),s("div",F_,[t[23]||(t[23]=s("p",{class:"text-sm font-medium text-gray-600"},"今日安装",-1)),s("p",H_,h(r.statistics.todayInstallations||0),1)])])]),s("div",z_,[s("div",q_,[t[26]||(t[26]=s("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-600"},[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),s("div",W_,[t[25]||(t[25]=s("p",{class:"text-sm font-medium text-gray-600"},"待安排测量",-1)),s("p",G_,h(r.statistics.pendingMeasurements||0),1)])])]),s("div",J_,[s("div",K_,[t[28]||(t[28]=s("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600"},[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 011-1h1a2 2 0 100-4H7a1 1 0 01-1-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})])],-1)),s("div",Z_,[t[27]||(t[27]=s("p",{class:"text-sm font-medium text-gray-600"},"待安排安装",-1)),s("p",Q_,h(r.statistics.pendingInstallations||0),1)])])])]),s("div",Y_,[s("div",X_,[s("nav",ew,[s("button",{onClick:t[0]||(t[0]=a=>r.activeTab="measurements"),class:ie(["py-4 px-6 border-b-2 font-medium text-sm",r.activeTab==="measurements"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," 测量预约管理 ",2),s("button",{onClick:t[1]||(t[1]=a=>r.activeTab="installations"),class:ie(["py-4 px-6 border-b-2 font-medium text-sm",r.activeTab==="installations"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," 安装预约管理 ",2)])]),s("div",tw,[r.activeTab==="measurements"?(m(),g("div",sw,[s("div",ow,[X(s("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.measurementFilters.status=a),onChange:t[3]||(t[3]=(...a)=>l.loadMeasurements&&l.loadMeasurements(...a)),class:"px-3 py-2 border border-gray-300 rounded-md"},t[29]||(t[29]=[s("option",{value:"all"},"全部状态",-1),s("option",{value:"pending"},"待安排",-1),s("option",{value:"scheduled"},"已安排",-1),s("option",{value:"completed"},"已完成",-1)]),544),[[Tt,r.measurementFilters.status]]),X(s("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=a=>r.measurementFilters.date=a),onChange:t[5]||(t[5]=(...a)=>l.loadMeasurements&&l.loadMeasurements(...a)),class:"px-3 py-2 border border-gray-300 rounded-md"},null,544),[[le,r.measurementFilters.date]]),s("button",{onClick:t[6]||(t[6]=(...a)=>l.resetMeasurementFilters&&l.resetMeasurementFilters(...a)),class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"}," 重置筛选 ")]),s("div",nw,[(m(!0),g(se,null,ae(r.measurements.orders,a=>(m(),g("div",{key:a.id,class:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[s("div",rw,[s("div",lw,[s("div",iw,[s("h3",aw,"订单号: "+h(a.orderNo),1),s("span",{class:ie([l.getStatusClass(a.status),"px-2 py-1 rounded-full text-xs"])},h(l.getStatusText(a.status)),3)]),s("div",cw,[s("div",null,[s("p",null,[t[30]||(t[30]=s("strong",null,"客户:",-1)),Z(" "+h(a.customerName),1)]),s("p",null,[t[31]||(t[31]=s("strong",null,"电话:",-1)),Z(" "+h(a.phone),1)]),s("p",null,[t[32]||(t[32]=s("strong",null,"地址:",-1)),Z(" "+h(a.address),1)])]),s("div",null,[a.measurementScheduled?(m(),g("p",dw,[t[33]||(t[33]=s("strong",null,"预约时间:",-1)),Z(" "+h(l.formatDateTime(a.measurementScheduled)),1)])):O("",!0),a.measurementCompleted?(m(),g("p",uw,[t[34]||(t[34]=s("strong",null,"完成时间:",-1)),Z(" "+h(l.formatDateTime(a.measurementCompleted)),1)])):O("",!0),s("p",null,[t[35]||(t[35]=s("strong",null,"订单金额:",-1)),Z(" ¥"+h(a.totalAmount),1)])])])]),s("div",fw,[a.measurementScheduled?O("",!0):(m(),g("button",{key:0,onClick:i=>l.openScheduleModal("measurement",a),class:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600"}," 安排预约 ",8,pw)),a.measurementScheduled&&!a.measurementCompleted?(m(),g("button",{key:1,onClick:i=>l.openCompleteModal("measurement",a),class:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600"}," 完成测量 ",8,mw)):O("",!0)])])]))),128))]),r.measurements.totalPages>1?(m(),g("div",gw,[s("nav",hw,[(m(!0),g(se,null,ae(r.measurements.totalPages,a=>(m(),g("button",{key:a,onClick:i=>l.loadMeasurements(a),class:ie(["px-3 py-2 rounded",a===r.measurements.page?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},h(a),11,vw))),128))])])):O("",!0)])):O("",!0),r.activeTab==="installations"?(m(),g("div",xw,[s("div",yw,[X(s("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>r.installationFilters.status=a),onChange:t[8]||(t[8]=(...a)=>l.loadInstallations&&l.loadInstallations(...a)),class:"px-3 py-2 border border-gray-300 rounded-md"},t[36]||(t[36]=[s("option",{value:"all"},"全部状态",-1),s("option",{value:"pending"},"待安排",-1),s("option",{value:"scheduled"},"已安排",-1),s("option",{value:"completed"},"已完成",-1)]),544),[[Tt,r.installationFilters.status]]),X(s("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=a=>r.installationFilters.date=a),onChange:t[10]||(t[10]=(...a)=>l.loadInstallations&&l.loadInstallations(...a)),class:"px-3 py-2 border border-gray-300 rounded-md"},null,544),[[le,r.installationFilters.date]]),s("button",{onClick:t[11]||(t[11]=(...a)=>l.resetInstallationFilters&&l.resetInstallationFilters(...a)),class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"}," 重置筛选 ")]),s("div",bw,[(m(!0),g(se,null,ae(r.installations.orders,a=>(m(),g("div",{key:a.id,class:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[s("div",_w,[s("div",ww,[s("div",kw,[s("h3",$w,"订单号: "+h(a.orderNo),1),s("span",{class:ie([l.getStatusClass(a.status),"px-2 py-1 rounded-full text-xs"])},h(l.getStatusText(a.status)),3)]),s("div",Cw,[s("div",null,[s("p",null,[t[37]||(t[37]=s("strong",null,"客户:",-1)),Z(" "+h(a.customerName),1)]),s("p",null,[t[38]||(t[38]=s("strong",null,"电话:",-1)),Z(" "+h(a.phone),1)]),s("p",null,[t[39]||(t[39]=s("strong",null,"地址:",-1)),Z(" "+h(a.address),1)])]),s("div",null,[a.measurementCompleted?(m(),g("p",Sw,[t[40]||(t[40]=s("strong",null,"测量完成:",-1)),Z(" "+h(l.formatDateTime(a.measurementCompleted)),1)])):O("",!0),a.installationScheduled?(m(),g("p",Mw,[t[41]||(t[41]=s("strong",null,"安装预约:",-1)),Z(" "+h(l.formatDateTime(a.installationScheduled)),1)])):O("",!0),a.installationCompleted?(m(),g("p",Tw,[t[42]||(t[42]=s("strong",null,"安装完成:",-1)),Z(" "+h(l.formatDateTime(a.installationCompleted)),1)])):O("",!0),s("p",null,[t[43]||(t[43]=s("strong",null,"订单金额:",-1)),Z(" ¥"+h(a.totalAmount),1)])])])]),s("div",Pw,[a.installationScheduled?O("",!0):(m(),g("button",{key:0,onClick:i=>l.openScheduleModal("installation",a),class:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600"}," 安排预约 ",8,jw)),a.installationScheduled&&!a.installationCompleted?(m(),g("button",{key:1,onClick:i=>l.openCompleteModal("installation",a),class:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600"}," 完成安装 ",8,Iw)):O("",!0)])])]))),128))]),r.installations.totalPages>1?(m(),g("div",Aw,[s("nav",Ew,[(m(!0),g(se,null,ae(r.installations.totalPages,a=>(m(),g("button",{key:a,onClick:i=>l.loadInstallations(a),class:ie(["px-3 py-2 rounded",a===r.installations.page?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},h(a),11,Ow))),128))])])):O("",!0)])):O("",!0)])])]),r.scheduleModal.show?(m(),g("div",Rw,[s("div",Nw,[s("h3",Vw," 安排"+h(r.scheduleModal.type==="measurement"?"测量":"安装")+"预约 ",1),s("div",Lw,[s("div",null,[t[44]||(t[44]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"预约时间",-1)),X(s("input",{type:"datetime-local","onUpdate:modelValue":t[12]||(t[12]=a=>r.scheduleModal.scheduledTime=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md",required:""},null,512),[[le,r.scheduleModal.scheduledTime]])]),s("div",null,[t[45]||(t[45]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"备注",-1)),X(s("textarea",{"onUpdate:modelValue":t[13]||(t[13]=a=>r.scheduleModal.notes=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"3",placeholder:"请输入备注信息..."},null,512),[[le,r.scheduleModal.notes]])])]),s("div",Uw,[s("button",{onClick:t[14]||(t[14]=(...a)=>l.closeScheduleModal&&l.closeScheduleModal(...a)),class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"}," 取消 "),s("button",{onClick:t[15]||(t[15]=(...a)=>l.confirmSchedule&&l.confirmSchedule(...a)),disabled:!r.scheduleModal.scheduledTime,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50"}," 确认安排 ",8,Bw)])])])):O("",!0),r.completeModal.show?(m(),g("div",Dw,[s("div",Fw,[s("h3",Hw," 完成"+h(r.completeModal.type==="measurement"?"测量":"安装"),1),s("div",zw,[s("div",null,[t[46]||(t[46]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"完成备注",-1)),X(s("textarea",{"onUpdate:modelValue":t[16]||(t[16]=a=>r.completeModal.notes=a),class:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"4",placeholder:"请输入完成情况说明..."},null,512),[[le,r.completeModal.notes]])])]),s("div",qw,[s("button",{onClick:t[17]||(t[17]=(...a)=>l.closeCompleteModal&&l.closeCompleteModal(...a)),class:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"}," 取消 "),s("button",{onClick:t[18]||(t[18]=(...a)=>l.confirmComplete&&l.confirmComplete(...a)),class:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600"}," 确认完成 ")])])])):O("",!0)])}const Gw=tt(P_,[["render",Ww]]),Jw={name:"ContractAdmin",data(){return{contracts:[],page:1,totalPages:1,loading:!1,showGenerate:!1,showPreview:!1,showDetail:!1,generating:!1,previewContractData:null,detailContract:null,orderId:null,contractForm:{client_name:"",client_contact:"",client_id_card:"",sign_date:"",install_address:"",products:[{product_name:"",quantity:1,unit:"套",unit_price:0,remark:""}]},showDeleteConfirm:!1,contractToDelete:null,deleting:!1,confirmContractNo:"",confirmContractNoError:null}},async mounted(){if(!this.checkAuth())return;const e=new URLSearchParams(window.location.search);this.orderId=e.get("orderId"),await this.loadContracts()},computed:{isDeleteConfirmValid(){var e;return this.confirmContractNo===((e=this.contractToDelete)==null?void 0:e.contractNo)}},methods:{checkAuth(){return localStorage.getItem("admin_token")?!0:(this.$router.push("/admin/login"),!1)},async loadContracts(){this.loading=!0;try{const e=new URLSearchParams({page:this.page,limit:10});this.orderId&&e.append("orderId",this.orderId);const t=await fetch(`/api/contracts?${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admin_token")}`}});if(t.ok){const o=await t.json();o.success?(this.contracts=o.data.contracts,this.totalPages=o.data.totalPages):alert("获取合同列表失败："+o.message)}else t.status===401||t.status===403?(localStorage.removeItem("admin_token"),this.$router.push("/admin/login")):alert("获取合同列表失败，请稍后重试")}catch(e){console.error("获取合同列表失败:",e),alert("获取合同列表失败")}finally{this.loading=!1}},changePage(e){e>=1&&e<=this.totalPages&&(this.page=e,this.loadContracts())},showGenerateModal(){this.showGenerate=!0},closeGenerateModal(){this.showGenerate=!1,this.resetForm()},resetForm(){this.contractForm={client_name:"",client_contact:"",client_id_card:"",sign_date:"",install_address:"",products:[{product_name:"",quantity:1,unit:"套",unit_price:0,remark:""}]}},addProduct(){this.contractForm.products.push({product_name:"",quantity:1,unit:"套",unit_price:0,remark:""})},removeProduct(e){this.contractForm.products.length>1&&this.contractForm.products.splice(e,1)},async generateContract(){this.generating=!0;try{const t=await(await fetch("/api/contracts/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("admin_token")}`},body:JSON.stringify({...this.contractForm,order_id:this.orderId})})).json();t.success?(alert(`合同生成成功！合同编号：${t.data.contractNo}`),this.closeGenerateModal(),await this.loadContracts()):alert("生成合同失败："+t.message)}catch(e){console.error("生成合同失败:",e),alert("生成合同失败")}finally{this.generating=!1}},async viewContract(e){try{const o=await(await fetch(`/api/contracts/${e.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admin_token")}`}})).json();o.success?(this.detailContract=o.data,this.showDetail=!0):alert("获取合同详情失败："+o.message)}catch(t){console.error("获取合同详情失败:",t),alert("获取合同详情失败")}},closeDetailModal(){this.showDetail=!1,this.detailContract=null},previewContract(e){this.previewContractData=e,this.showPreview=!0},closePreviewModal(){this.showPreview=!1,this.previewContractData=null},downloadContract(e){const t=`${e.contractNo}.jpg`;fetch(`/api/contracts/download/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admin_token")}`}}).then(o=>{if(o.ok)return o.blob();throw o.status===401||o.status===403?(localStorage.removeItem("admin_token"),this.$router.push("/admin/login"),new Error("认证失败")):new Error("下载失败")}).then(o=>{const n=window.URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download=t,r.click(),window.URL.revokeObjectURL(n)}).catch(o=>{o.message!=="认证失败"&&alert("下载合同失败")})},async generateFromOrder(){if(!this.orderId){alert("未找到订单信息");return}try{const e=await fetch(`/api/orders/${this.orderId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("admin_token")}`}});if(e.ok){const t=await e.json();if(t.success&&t.data){const o=t.data;this.contractForm.client_name=o.customerName||"",this.contractForm.client_contact=o.phone||"",this.contractForm.install_address=o.address||"";const n=new Date;this.contractForm.sign_date=n.toISOString().split("T")[0],o.items&&o.items.length>0&&(this.contractForm.products=o.items.map(r=>({product_name:r.productName||"",quantity:r.quantity||1,unit:r.priceUnit||"套",unit_price:r.price||0,remark:r.specification||r.category||""}))),this.showGenerateModal()}else alert("获取订单信息失败："+(t.message||"未知错误"))}else alert("获取订单信息失败，请稍后重试")}catch(e){console.error("获取订单信息失败:",e),alert("获取订单信息失败")}},formatDate(e){return new Date(e).toLocaleDateString("zh-CN")},formatDateTime(e){return new Date(e).toLocaleString("zh-CN")},confirmDelete(e){this.contractToDelete=e,this.confirmContractNo="",this.confirmContractNoError=null,this.showDeleteConfirm=!0},closeDeleteModal(){this.showDeleteConfirm=!1,this.contractToDelete=null,this.confirmContractNo="",this.confirmContractNoError=null},async deleteContract(){if(this.confirmContractNo!==this.contractToDelete.contractNo){this.confirmContractNoError="合同编号不匹配，请重新输入";return}this.confirmContractNoError=null,this.deleting=!0;try{const t=await(await fetch(`/api/contracts/${this.contractToDelete.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("admin_token")}`}})).json();t.success?(alert("合同删除成功"),this.closeDeleteModal(),await this.loadContracts()):alert("删除合同失败："+t.message)}catch(e){console.error("删除合同失败:",e),alert("删除合同失败")}finally{this.deleting=!1}}}},Kw={class:"contract-admin"},Zw={class:"header"},Qw={class:"contracts-table"},Yw={class:"table-container"},Xw={key:0},e4={key:1},t4=["onClick"],s4=["onClick"],o4=["onClick"],n4=["onClick"],r4={key:0,class:"pagination"},l4=["disabled"],i4=["disabled"],a4={class:"modal-header"},c4={class:"form-row"},d4={class:"form-group"},u4={class:"form-group"},f4={class:"form-row"},p4={class:"form-group"},m4={class:"form-group"},g4={class:"form-group"},h4={class:"products-section"},v4={class:"product-row"},x4={class:"form-group"},y4=["onUpdate:modelValue"],b4={class:"form-group"},_4=["onUpdate:modelValue"],w4={class:"form-group"},k4=["onUpdate:modelValue"],$4={class:"form-group"},C4=["onUpdate:modelValue"],S4={class:"form-group"},M4=["onUpdate:modelValue"],T4=["onClick"],P4={class:"modal-footer"},j4=["disabled"],I4={class:"modal-header"},A4={class:"preview-content"},E4={class:"preview-image-container"},O4=["src"],R4={class:"modal-footer"},N4={class:"modal-header"},V4={class:"detail-content"},L4={class:"detail-section"},U4={class:"detail-row"},B4={class:"detail-row"},D4={class:"detail-row"},F4={class:"detail-row"},H4={class:"detail-row"},z4={class:"detail-row"},q4={class:"detail-row"},W4={class:"detail-section"},G4={class:"products-table"},J4={class:"modal-footer"},K4={class:"modal-header"},Z4={class:"delete-content"},Q4={class:"warning-text"},Y4={class:"contract-info"},X4={class:"highlight"},e5={class:"highlight"},t5={class:"confirm-input-section"},s5={key:0,class:"error-message"},o5={class:"modal-footer"},n5=["disabled"],r5={key:4,class:"quick-actions"};function l5(e,t,o,n,r,l){var c,a;return m(),g("div",Kw,[s("div",Zw,[t[32]||(t[32]=s("h1",null,"合同管理",-1)),s("button",{onClick:t[0]||(t[0]=(...i)=>l.showGenerateModal&&l.showGenerateModal(...i)),class:"btn-primary"}," 生成新合同 ")]),s("div",Qw,[t[34]||(t[34]=s("h2",null,"合同列表",-1)),s("div",Yw,[s("table",null,[t[33]||(t[33]=s("thead",null,[s("tr",null,[s("th",null,"合同编号"),s("th",null,"客户名称"),s("th",null,"签订日期"),s("th",null,"合同金额"),s("th",null,"关联订单"),s("th",null,"创建时间"),s("th",null,"操作")])],-1)),s("tbody",null,[(m(!0),g(se,null,ae(r.contracts,i=>(m(),g("tr",{key:i.id},[s("td",null,h(i.contractNo),1),s("td",null,h(i.clientName),1),s("td",null,h(l.formatDate(i.signDate)),1),s("td",null,"￥"+h(i.totalAmount),1),s("td",null,[i.orderId?(m(),g("span",Xw,"订单 #"+h(i.orderId),1)):(m(),g("span",e4,"-"))]),s("td",null,h(l.formatDateTime(i.createdAt)),1),s("td",null,[s("button",{onClick:u=>l.viewContract(i),class:"btn-info"},"查看",8,t4),s("button",{onClick:u=>l.previewContract(i),class:"btn-secondary"},"预览",8,s4),s("button",{onClick:u=>l.downloadContract(i),class:"btn-success"},"下载",8,o4),s("button",{onClick:u=>l.confirmDelete(i),class:"btn-danger"},"删除",8,n4)])]))),128))])])]),r.totalPages>1?(m(),g("div",r4,[s("button",{onClick:t[1]||(t[1]=i=>l.changePage(r.page-1)),disabled:r.page<=1,class:"btn-page"}," 上一页 ",8,l4),s("span",null,"第 "+h(r.page)+" 页，共 "+h(r.totalPages)+" 页",1),s("button",{onClick:t[2]||(t[2]=i=>l.changePage(r.page+1)),disabled:r.page>=r.totalPages,class:"btn-page"}," 下一页 ",8,i4)])):O("",!0)]),r.showGenerate?(m(),g("div",{key:0,class:"modal-overlay",onClick:t[13]||(t[13]=(...i)=>l.closeGenerateModal&&l.closeGenerateModal(...i))},[s("div",{class:"modal-content",onClick:t[12]||(t[12]=mt(()=>{},["stop"]))},[s("div",a4,[t[35]||(t[35]=s("h3",null,"生成新合同",-1)),s("button",{onClick:t[3]||(t[3]=(...i)=>l.closeGenerateModal&&l.closeGenerateModal(...i)),class:"btn-close"},"×")]),s("form",{onSubmit:t[11]||(t[11]=mt((...i)=>l.generateContract&&l.generateContract(...i),["prevent"])),class:"contract-form"},[s("div",c4,[s("div",d4,[t[36]||(t[36]=s("label",null,"客户名称 *",-1)),X(s("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>r.contractForm.client_name=i),type:"text",required:"",placeholder:"请输入客户名称"},null,512),[[le,r.contractForm.client_name]])]),s("div",u4,[t[37]||(t[37]=s("label",null,"联系电话",-1)),X(s("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>r.contractForm.client_contact=i),type:"text",placeholder:"请输入联系电话"},null,512),[[le,r.contractForm.client_contact]])])]),s("div",f4,[s("div",p4,[t[38]||(t[38]=s("label",null,"身份证号",-1)),X(s("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>r.contractForm.client_id_card=i),type:"text",placeholder:"请输入身份证号"},null,512),[[le,r.contractForm.client_id_card]])]),s("div",m4,[t[39]||(t[39]=s("label",null,"签订日期 *",-1)),X(s("input",{"onUpdate:modelValue":t[7]||(t[7]=i=>r.contractForm.sign_date=i),type:"date",required:""},null,512),[[le,r.contractForm.sign_date]])])]),s("div",g4,[t[40]||(t[40]=s("label",null,"安装地址 *",-1)),X(s("textarea",{"onUpdate:modelValue":t[8]||(t[8]=i=>r.contractForm.install_address=i),required:"",placeholder:"请输入安装地址",rows:"3"},null,512),[[le,r.contractForm.install_address]])]),t[46]||(t[46]=s("h4",null,"产品信息",-1)),s("div",h4,[(m(!0),g(se,null,ae(r.contractForm.products,(i,u)=>(m(),g("div",{class:"product-item",key:u},[s("div",v4,[s("div",x4,[t[41]||(t[41]=s("label",null,"产品名称",-1)),X(s("input",{"onUpdate:modelValue":d=>i.product_name=d,type:"text",required:"",placeholder:"产品名称"},null,8,y4),[[le,i.product_name]])]),s("div",b4,[t[42]||(t[42]=s("label",null,"数量",-1)),X(s("input",{"onUpdate:modelValue":d=>i.quantity=d,type:"number",required:"",min:"1",placeholder:"数量"},null,8,_4),[[le,i.quantity,void 0,{number:!0}]])]),s("div",w4,[t[43]||(t[43]=s("label",null,"单位",-1)),X(s("input",{"onUpdate:modelValue":d=>i.unit=d,type:"text",required:"",placeholder:"单位"},null,8,k4),[[le,i.unit]])]),s("div",$4,[t[44]||(t[44]=s("label",null,"单价",-1)),X(s("input",{"onUpdate:modelValue":d=>i.unit_price=d,type:"number",required:"",min:"0",step:"0.01",placeholder:"单价"},null,8,C4),[[le,i.unit_price,void 0,{number:!0}]])]),s("div",S4,[t[45]||(t[45]=s("label",null,"备注",-1)),X(s("input",{"onUpdate:modelValue":d=>i.remark=d,type:"text",placeholder:"备注"},null,8,M4),[[le,i.remark]])]),r.contractForm.products.length>1?(m(),g("button",{key:0,type:"button",onClick:d=>l.removeProduct(u),class:"btn-danger"}," 删除 ",8,T4)):O("",!0)])]))),128)),s("button",{type:"button",onClick:t[9]||(t[9]=(...i)=>l.addProduct&&l.addProduct(...i)),class:"btn-secondary"}," 添加产品 ")]),s("div",P4,[s("button",{type:"button",onClick:t[10]||(t[10]=(...i)=>l.closeGenerateModal&&l.closeGenerateModal(...i)),class:"btn-secondary"},"取消"),s("button",{type:"submit",class:"btn-primary",disabled:r.generating},h(r.generating?"生成中...":"生成合同"),9,j4)])],32)])])):O("",!0),r.showPreview?(m(),g("div",{key:1,class:"modal-overlay",onClick:t[18]||(t[18]=(...i)=>l.closePreviewModal&&l.closePreviewModal(...i))},[s("div",{class:"modal-content",onClick:t[17]||(t[17]=mt(()=>{},["stop"]))},[s("div",I4,[s("h3",null,"合同预览 - "+h(r.previewContractData.contractNo),1),s("button",{onClick:t[14]||(t[14]=(...i)=>l.closePreviewModal&&l.closePreviewModal(...i)),class:"btn-close"},"×")]),s("div",A4,[s("div",E4,[s("img",{src:`/api/contracts/preview/${r.previewContractData.contractNo}.jpg`,alt:"合同预览",class:"contract-image"},null,8,O4)])]),s("div",R4,[s("button",{onClick:t[15]||(t[15]=i=>l.downloadContract(r.previewContractData)),class:"btn-primary"}," 下载合同 "),s("button",{onClick:t[16]||(t[16]=(...i)=>l.closePreviewModal&&l.closePreviewModal(...i)),class:"btn-secondary"}," 关闭 ")])])])):O("",!0),r.showDetail?(m(),g("div",{key:2,class:"modal-overlay",onClick:t[24]||(t[24]=(...i)=>l.closeDetailModal&&l.closeDetailModal(...i))},[s("div",{class:"modal-content",onClick:t[23]||(t[23]=mt(()=>{},["stop"]))},[s("div",N4,[s("h3",null,"合同详情 - "+h(r.detailContract.contractNo),1),s("button",{onClick:t[19]||(t[19]=(...i)=>l.closeDetailModal&&l.closeDetailModal(...i)),class:"btn-close"},"×")]),s("div",V4,[s("div",L4,[t[54]||(t[54]=s("h4",null,"基本信息",-1)),s("div",U4,[t[47]||(t[47]=s("span",{class:"label"},"合同编号：",-1)),s("span",null,h(r.detailContract.contractNo),1)]),s("div",B4,[t[48]||(t[48]=s("span",{class:"label"},"客户名称：",-1)),s("span",null,h(r.detailContract.clientName),1)]),s("div",D4,[t[49]||(t[49]=s("span",{class:"label"},"联系电话：",-1)),s("span",null,h(r.detailContract.clientContact||"-"),1)]),s("div",F4,[t[50]||(t[50]=s("span",{class:"label"},"身份证号：",-1)),s("span",null,h(r.detailContract.clientIdCard||"-"),1)]),s("div",H4,[t[51]||(t[51]=s("span",{class:"label"},"签订日期：",-1)),s("span",null,h(l.formatDate(r.detailContract.signDate)),1)]),s("div",z4,[t[52]||(t[52]=s("span",{class:"label"},"安装地址：",-1)),s("span",null,h(r.detailContract.installAddress),1)]),s("div",q4,[t[53]||(t[53]=s("span",{class:"label"},"合同金额：",-1)),s("span",null,"￥"+h(r.detailContract.totalAmount),1)])]),s("div",W4,[t[56]||(t[56]=s("h4",null,"产品明细",-1)),s("table",G4,[t[55]||(t[55]=s("thead",null,[s("tr",null,[s("th",null,"产品名称"),s("th",null,"数量"),s("th",null,"单位"),s("th",null,"单价"),s("th",null,"总价"),s("th",null,"备注")])],-1)),s("tbody",null,[(m(!0),g(se,null,ae(r.detailContract.products,i=>(m(),g("tr",{key:i.id},[s("td",null,h(i.productName),1),s("td",null,h(i.quantity),1),s("td",null,h(i.unit),1),s("td",null,"￥"+h(i.unitPrice),1),s("td",null,"￥"+h(i.totalPrice),1),s("td",null,h(i.remark||"-"),1)]))),128))])])])]),s("div",J4,[s("button",{onClick:t[20]||(t[20]=i=>l.previewContract(r.detailContract)),class:"btn-info"}," 预览合同 "),s("button",{onClick:t[21]||(t[21]=i=>l.downloadContract(r.detailContract)),class:"btn-primary"}," 下载合同 "),s("button",{onClick:t[22]||(t[22]=(...i)=>l.closeDetailModal&&l.closeDetailModal(...i)),class:"btn-secondary"}," 关闭 ")])])])):O("",!0),r.showDeleteConfirm?(m(),g("div",{key:3,class:"modal-overlay",onClick:t[30]||(t[30]=(...i)=>l.closeDeleteModal&&l.closeDeleteModal(...i))},[s("div",{class:"modal-content modal-small",onClick:t[29]||(t[29]=mt(()=>{},["stop"]))},[s("div",K4,[t[57]||(t[57]=s("h3",null,"确认删除",-1)),s("button",{onClick:t[25]||(t[25]=(...i)=>l.closeDeleteModal&&l.closeDeleteModal(...i)),class:"btn-close"},"×")]),s("div",Z4,[t[64]||(t[64]=s("div",{class:"warning-icon"},[s("svg",{class:"w-12 h-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),s("div",Q4,[t[62]||(t[62]=s("p",null,[s("strong",null,"确定要删除此合同吗？")],-1)),s("p",Y4,[t[58]||(t[58]=Z(" 合同编号：")),s("span",X4,h((c=r.contractToDelete)==null?void 0:c.contractNo),1),t[59]||(t[59]=s("br",null,null,-1)),t[60]||(t[60]=Z(" 客户名称：")),s("span",e5,h((a=r.contractToDelete)==null?void 0:a.clientName),1)]),t[63]||(t[63]=s("p",{class:"warning-note"},"此操作不可撤销，请谨慎操作！",-1)),s("div",t5,[t[61]||(t[61]=s("label",{for:"confirmContractNo"},"请输入合同编号以确认删除：",-1)),X(s("input",{id:"confirmContractNo","onUpdate:modelValue":t[26]||(t[26]=i=>r.confirmContractNo=i),type:"text",placeholder:"请输入合同编号",class:ie(["confirm-input",{error:r.confirmContractNoError}])},null,2),[[le,r.confirmContractNo]]),r.confirmContractNoError?(m(),g("p",s5,h(r.confirmContractNoError),1)):O("",!0)])])]),s("div",o5,[s("button",{onClick:t[27]||(t[27]=(...i)=>l.closeDeleteModal&&l.closeDeleteModal(...i)),class:"btn-secondary"},"取消"),s("button",{onClick:t[28]||(t[28]=(...i)=>l.deleteContract&&l.deleteContract(...i)),class:"btn-danger",disabled:r.deleting||!l.isDeleteConfirmValid},h(r.deleting?"删除中...":"确认删除"),9,n5)])])])):O("",!0),r.orderId?(m(),g("div",r5,[t[65]||(t[65]=s("h2",null,"从订单生成合同",-1)),s("p",null,"订单ID: "+h(r.orderId),1),s("button",{onClick:t[31]||(t[31]=(...i)=>l.generateFromOrder&&l.generateFromOrder(...i)),class:"btn-primary"}," 基于此订单生成合同 ")])):O("",!0)])}const i5=tt(Jw,[["render",l5],["__scopeId","data-v-e2166935"]]),a5=[{path:"/",name:"Home",component:H0},{path:"/product/:id",name:"ProductDetail",component:sp,props:!0},{path:"/cart",name:"Cart",component:Lm},{path:"/order",name:"Order",component:Qp},{path:"/login",name:"UserLogin",component:f1},{path:"/register",name:"UserRegister",component:W1},{path:"/orders",name:"UserOrders",component:Xg},{path:"/orders-debug",name:"OrdersDebug",component:fh},{path:"/chat",name:"Chat",component:Rh},{path:"/admin/login",name:"AdminLogin",component:Hh},{path:"/admin",name:"AdminHome",component:xv},{path:"/admin/products",name:"ProductAdmin",component:Ax},{path:"/admin/orders",name:"OrderAdmin",component:Ay},{path:"/admin/users",name:"UserAdmin",component:K2},{path:"/admin/chat",name:"ChatAdmin",component:T_},{path:"/admin/appointments",name:"AppointmentAdmin",component:Gw},{path:"/admin/contracts",name:"ContractAdmin",component:i5}],c5=vu({history:Wd(),routes:a5,scrollBehavior(e,t,o){return o||{top:0}}}),d5={class:"fixed top-0 left-0 right-0 bg-white shadow-sm z-50"},u5={class:"container mx-auto px-4 py-4"},f5={class:"flex items-center justify-between"},p5={class:"flex items-center"},m5={key:0,class:"hidden md:flex items-center space-x-8"},g5={class:"relative group"},h5={class:"text-secondary-700 hover:text-primary-600 transition-colors flex items-center"},v5={class:"absolute top-full left-0 mt-2 w-80 bg-white rounded-lg shadow-lg border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-[60]"},x5={class:"py-2"},y5=["onClick"],b5={class:"flex items-center"},_5={class:"mr-2"},w5={class:"text-xs text-gray-500"},k5={class:"pl-6 bg-gray-50"},$5=["onClick"],C5={class:"text-xs text-gray-400"},S5={class:"flex items-center space-x-4"},M5={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center"},T5={class:"relative group hidden md:block"},P5={key:0,class:"flex items-center space-x-2 text-secondary-700 hover:text-primary-600 transition-colors"},j5={class:"text-sm"},I5={key:1,class:"flex items-center space-x-4"},A5={key:2,class:"absolute top-full right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-[60]"},E5={class:"py-2"},O5={class:"px-4 py-2 border-b border-gray-100"},R5={class:"text-sm font-medium text-gray-900"},N5={class:"text-xs text-gray-500"},V5={key:0,class:"md:hidden mt-4 pb-4 bg-white border-t border-gray-200 mobile-menu"},L5={class:"flex flex-col space-y-4"},U5={class:"border-t pt-4"},B5={key:0,class:"space-y-2"},D5={class:"flex items-center space-x-2 text-secondary-700"},F5={class:"text-sm font-medium"},H5={class:"text-xs text-gray-500"},z5={key:1,class:"space-y-2"},q5={key:2,class:"border-t pt-4"},W5={class:"space-y-3"},G5=["onClick"],J5={class:"flex items-center"},K5={class:"mr-2"},Z5={class:"text-xs text-gray-500"},Q5={class:"pl-6 mt-2 space-y-1"},Y5=["onClick"],X5={class:"text-xs text-gray-400"},e6={__name:"Header",setup(e){const t=Ne(),o=qs(),n=Ws(),r=Gs(),l=Xt(),c=B(!1),a=fe(()=>o.path.startsWith("/admin")),i=fe(()=>n.getCategoryHierarchy),u=fe(()=>r.cartItemCount),d=()=>{c.value=!c.value},f=E=>n.getProductsByCategory(E),p=E=>n.getSubcategoryProductCount(E),x=E=>{t.currentRoute.value.name==="Home"?(t.replace({query:{primaryCategory:E}}),setTimeout(()=>{const M=document.querySelector("[data-products-section]");M&&M.scrollIntoView({behavior:"smooth"})},100)):t.push({name:"Home",query:{primaryCategory:E}}),c.value=!1},C=(E,M)=>{t.currentRoute.value.name==="Home"?(t.replace({query:{primaryCategory:E,subcategory:M}}),setTimeout(()=>{const $=document.querySelector("[data-products-section]");$&&$.scrollIntoView({behavior:"smooth"})},100)):t.push({name:"Home",query:{primaryCategory:E,subcategory:M}}),c.value=!1},I=()=>{l.logout(),c.value=!1,t.currentRoute.value.name==="Order"&&t.push("/")};return De(()=>{l.checkLoginStatus()}),(E,M)=>{const $=qe("router-link");return m(),g("header",d5,[s("nav",u5,[s("div",f5,[s("div",p5,[a.value?(m(),Pe($,{key:1,to:"/admin",class:"text-2xl font-bold text-primary-600 hover:text-primary-700 transition-colors"},{default:ye(()=>M[5]||(M[5]=[Z(" 管理后台 ")])),_:1,__:[5]})):(m(),Pe($,{key:0,to:"/",class:"text-2xl font-bold text-primary-600"},{default:ye(()=>M[4]||(M[4]=[Z(" 宝得利门窗 ")])),_:1,__:[4]}))]),a.value?O("",!0):(m(),g("div",m5,[F($,{to:"/",class:"text-secondary-700 hover:text-primary-600 transition-colors"},{default:ye(()=>M[6]||(M[6]=[Z(" 首页 ")])),_:1,__:[6]}),F($,{to:"/chat",class:"text-secondary-700 hover:text-primary-600 transition-colors"},{default:ye(()=>M[7]||(M[7]=[Z(" 联系我们 ")])),_:1,__:[7]}),s("div",g5,[s("button",h5,[M[8]||(M[8]=Z(" 产品分类 ")),F(z(ho),{class:"w-4 h-4 ml-1"})]),s("div",v5,[s("div",x5,[(m(!0),g(se,null,ae(i.value,(j,R)=>(m(),g("div",{key:R,class:"border-b border-gray-100 last:border-b-0"},[s("div",{onClick:U=>x(R),class:"px-4 py-2 text-sm font-medium text-secondary-700 hover:bg-gray-50 cursor-pointer flex items-center justify-between"},[s("div",b5,[s("span",_5,h(j.icon),1),s("span",null,h(j.name),1)]),s("span",w5,"("+h(f(R).length)+")",1)],8,y5),s("div",k5,[(m(!0),g(se,null,ae(j.subcategories,(U,A)=>(m(),g("div",{key:A,onClick:y=>C(R,A),class:"px-4 py-1 text-xs text-secondary-600 hover:bg-gray-100 cursor-pointer flex items-center justify-between"},[s("span",null,h(U.name),1),s("span",C5,"("+h(p(A))+")",1)],8,$5))),128))])]))),128))])])])])),s("div",S5,[a.value?O("",!0):(m(),Pe($,{key:0,to:"/cart",class:"relative p-2 text-secondary-700 hover:text-primary-600 transition-colors"},{default:ye(()=>[F(z(Un),{class:"w-6 h-6"}),u.value>0?(m(),g("span",M5,h(u.value),1)):O("",!0)]),_:1})),s("div",T5,[z(l).isLoggedIn?(m(),g("button",P5,[F(z(Ct),{class:"w-5 h-5"}),s("span",j5,h(z(l).userName),1),F(z(ho),{class:"w-4 h-4"})])):(m(),g("div",I5,[F($,{to:"/login",class:"flex items-center space-x-1 text-secondary-700 hover:text-primary-600 transition-colors"},{default:ye(()=>[F(z(Ct),{class:"w-5 h-5"}),M[9]||(M[9]=s("span",{class:"text-sm"},"登录",-1))]),_:1,__:[9]}),F($,{to:"/register",class:"px-3 py-1.5 bg-primary-600 text-white text-sm rounded-lg hover:bg-primary-700 transition-colors"},{default:ye(()=>M[10]||(M[10]=[Z(" 注册 ")])),_:1,__:[10]})])),z(l).isLoggedIn?(m(),g("div",A5,[s("div",E5,[s("div",O5,[s("p",R5,h(z(l).userName),1),s("p",N5,h(z(l).userPhone),1)]),a.value?O("",!0):(m(),Pe($,{key:0,to:"/orders",class:"block px-4 py-2 text-sm text-secondary-700 hover:bg-gray-50 transition-colors"},{default:ye(()=>M[11]||(M[11]=[Z(" 我的订单 ")])),_:1,__:[11]})),s("button",{onClick:I,class:"w-full text-left px-4 py-2 text-sm text-secondary-700 hover:bg-gray-50 transition-colors"}," 退出登录 ")])])):O("",!0)]),s("button",{class:"md:hidden p-2 text-secondary-700",onClick:d},[F(z(bu),{class:"w-6 h-6"})])])]),c.value?(m(),g("div",V5,[s("div",L5,[a.value?O("",!0):(m(),Pe($,{key:0,to:"/",class:"text-secondary-700 hover:text-primary-600 transition-colors"},{default:ye(()=>M[12]||(M[12]=[Z(" 首页 ")])),_:1,__:[12]})),a.value?O("",!0):(m(),Pe($,{key:1,to:"/chat",onClick:M[0]||(M[0]=j=>c.value=!1),class:"text-secondary-700 hover:text-primary-600 transition-colors"},{default:ye(()=>M[13]||(M[13]=[Z(" 联系我们 ")])),_:1,__:[13]})),s("div",U5,[z(l).isLoggedIn?(m(),g("div",B5,[s("div",D5,[F(z(Ct),{class:"w-5 h-5"}),s("div",null,[s("p",F5,h(z(l).userName),1),s("p",H5,h(z(l).userPhone),1)])]),a.value?O("",!0):(m(),Pe($,{key:0,to:"/orders",onClick:M[1]||(M[1]=j=>c.value=!1),class:"block text-sm text-secondary-600 hover:text-primary-600 transition-colors"},{default:ye(()=>M[14]||(M[14]=[Z(" 我的订单 ")])),_:1,__:[14]})),s("button",{onClick:I,class:"text-sm text-secondary-600 hover:text-primary-600 transition-colors"}," 退出登录 ")])):(m(),g("div",z5,[F($,{to:"/login",onClick:M[2]||(M[2]=j=>c.value=!1),class:"flex items-center space-x-2 text-secondary-700 hover:text-primary-600 transition-colors"},{default:ye(()=>[F(z(Ct),{class:"w-5 h-5"}),M[15]||(M[15]=s("span",{class:"text-sm"},"登录",-1))]),_:1,__:[15]}),F($,{to:"/register",onClick:M[3]||(M[3]=j=>c.value=!1),class:"flex items-center space-x-2 px-3 py-2 bg-primary-600 text-white text-sm rounded-lg hover:bg-primary-700 transition-colors"},{default:ye(()=>[F(z(Ct),{class:"w-5 h-5"}),M[16]||(M[16]=s("span",null,"注册账户",-1))]),_:1,__:[16]})]))]),a.value?O("",!0):(m(),g("div",q5,[M[17]||(M[17]=s("p",{class:"text-sm font-medium text-secondary-600 mb-2"},"产品分类",-1)),s("div",W5,[(m(!0),g(se,null,ae(i.value,(j,R)=>(m(),g("div",{key:R,class:"border-b border-gray-100 pb-2 last:border-b-0"},[s("div",{onClick:U=>x(R),class:"flex items-center justify-between text-sm text-secondary-700 hover:text-primary-600 cursor-pointer font-medium"},[s("div",J5,[s("span",K5,h(j.icon),1),s("span",null,h(j.name),1)]),s("span",Z5,"("+h(f(R).length)+")",1)],8,G5),s("div",Q5,[(m(!0),g(se,null,ae(j.subcategories,(U,A)=>(m(),g("div",{key:A,onClick:y=>C(R,A),class:"flex items-center justify-between text-xs text-secondary-600 hover:text-primary-600 cursor-pointer"},[s("span",null,h(U.name),1),s("span",X5,"("+h(p(A))+")",1)],8,Y5))),128))])]))),128))])]))])])):O("",!0)])])}}},t6=tt(e6,[["__scopeId","data-v-c1758a9a"]]),s6={},o6={class:"bg-secondary-800 text-white mt-16"},n6={class:"container mx-auto px-4 py-12"},r6={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},l6={class:"space-y-2 text-sm"};function i6(e,t){const o=qe("router-link");return m(),g("footer",o6,[s("div",n6,[s("div",r6,[t[4]||(t[4]=s("div",null,[s("h3",{class:"text-xl font-bold mb-4"},"宝得利门窗"),s("p",{class:"text-secondary-300 text-sm"}," 专业门窗制造商，为您提供高品质的门窗产品和优质的服务。 ")],-1)),s("div",null,[t[3]||(t[3]=s("h4",{class:"font-semibold mb-4"},"产品分类",-1)),s("ul",l6,[s("li",null,[F(o,{to:"/?primaryCategory=门",class:"text-secondary-300 hover:text-white transition-colors flex items-center"},{default:ye(()=>t[0]||(t[0]=[s("span",{class:"mr-1"},null,-1),Z(" 门类产品 ")])),_:1,__:[0]})]),s("li",null,[F(o,{to:"/?primaryCategory=窗户",class:"text-secondary-300 hover:text-white transition-colors flex items-center"},{default:ye(()=>t[1]||(t[1]=[s("span",{class:"mr-1"},null,-1),Z(" 窗户类产品 ")])),_:1,__:[1]})]),s("li",null,[F(o,{to:"/?primaryCategory=其他配件",class:"text-secondary-300 hover:text-white transition-colors flex items-center"},{default:ye(()=>t[2]||(t[2]=[s("span",{class:"mr-1"},null,-1),Z(" 其他配件 ")])),_:1,__:[2]})])])]),t[5]||(t[5]=Oe('<div><h4 class="font-semibold mb-4">客户服务</h4><ul class="space-y-2 text-sm"><li><span class="text-secondary-300">专业测量</span></li><li><span class="text-secondary-300">免费设计</span></li><li><span class="text-secondary-300">上门安装</span></li><li><span class="text-secondary-300">售后保障</span></li><li><span class="text-secondary-300">质量保证</span></li></ul></div><div><h4 class="font-semibold mb-4">联系信息</h4><div class="space-y-2 text-sm text-secondary-300"><div><p class="font-medium text-secondary-200 mb-1">联系电话</p><p><a href="tel:18960805927" class="hover:text-white transition-colors">189-6080-5927</a></p><p><a href="tel:13134509296" class="hover:text-white transition-colors">131-3450-9296</a></p></div><div><p class="font-medium text-secondary-200 mb-1">邮箱地址</p><p><a href="mailto:2039017996@qq.com" class="hover:text-white transition-colors">2039017996@qq.com</a></p></div><div><p class="font-medium text-secondary-200 mb-1">门店地址</p><p>福建省福州市福清市</p></div></div></div>',2))]),t[6]||(t[6]=s("div",{class:"border-t border-secondary-700 mt-8 pt-8 text-center text-sm text-secondary-400"},[s("p",null,"© 2024 宝得利门窗. 版权所有.")],-1))])])}const a6=tt(s6,[["render",i6]]),c6={id:"app",class:"min-h-screen bg-gray-50"},d6={class:"min-h-screen pt-20"},u6={__name:"App",setup(e){return(t,o)=>{const n=qe("router-view");return m(),g("div",c6,[F(t6),s("main",d6,[F(n)]),F(a6)])}}},Dn=id(u6);Dn.use(dd());Dn.use(c5);Dn.mount("#app");
